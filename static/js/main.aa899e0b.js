/*! For license information please see main.aa899e0b.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ce(e,t,n)}finally{je=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Re=!1}function Oe(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,i,a,o,s,u){Le=!1,Me=null,Oe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,jt=null,At=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==jt&&Bt(jt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Kt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=M({},cn,{view:0,detail:0}),dn=an(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),vn=an(M({},fn,{dataTransfer:0})),mn=an(M({},hn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(M({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=M({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),jn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),Rn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,On=null;l&&"documentMode"in document&&(On=document.documentMode);var Ln=l&&"TextEvent"in window&&!On,Mn=l&&(!Dn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Fr(e,0)}function Yn(e){if(K(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,be(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){jr.set(e,t),u(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Dr=Ar[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=a,i=be(n),o=[];e:{var s=jr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Sr:case Tr:case Cr:u=yn;break;case Nr:u=jn;break;case"scroll":u=dn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,d=l?null!==s?s+"Capture":null:s;l=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==d&&(null!=(v=Pe(p,d))&&l.push(Hr(p,v,f)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?s:wi(u),f=null==c?s:wi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=f,v=null,gi(i)===r&&((l=new l(d,p+"enter",c,n,i)).target=f,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(d=c,p=0,f=l=u;f;f=Kr(f))p++;for(f=0,v=d;v;v=Kr(v))f++;for(;0<p-f;)l=Kr(l),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Kr(l),d=Kr(d)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Jn;else if(Wn(s))if($n)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,qn=!0)),0<(y=Gr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Pe(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Pe(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[di])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[fi]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),ji=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ni),Ei(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,ji=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,ji),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Wi=0,Hi=null,Gi=0,Ki=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){zi[Wi++]=Gi,zi[Wi++]=Hi,Hi=e,Gi=t}function Zi(e,t,n){Ki[Qi++]=Ji,Ki[Qi++]=$i,Ki[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=zi[--Wi],zi[Wi]=null,Gi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,$i=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=ci(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function _a(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var ja=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;ja=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:ja=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=f,u=h):l=l.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),Oa(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?ji:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?ji:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=f(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===s.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=d(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,s,u,c){var l=O(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=f(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?l=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=d(i,g.value,c))&&(s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Oc(o.type,o.key,o.props,null,r.mode,u)).ref=Ga(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case P:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(O(o))return m(r,a,o,u);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ja=Ya(!0),$a=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var so=Ii(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=d,s=r):c=c.next=d,vo.lanes|=h,Mu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jo(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ws=!0),r=r.queue,Wo(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===ju)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function Oo(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return qo(2048,8,e,t)}function Ho(e,t){return qo(4,2,e,t)}function Go(e,t){return qo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ju)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=ju.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:$o,useReducer:jo,useRef:Vo,useState:function(){return jo(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[jo(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Gu=r),ds(0,t)},n}function vs(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=w.ReactCurrentOwner,ws=!1;function bs(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ja(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||ws?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Is(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Du,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Du,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Du,Ru),Ru|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Du,Ru),Ru|=r;return bs(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Pi(n)?ji:Ci.current;return a=Ai(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||ws?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Cs(e,t,n,r,i){if(Pi(n)){var a=!0;Li(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Ws(e,t),za(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ai(t,c=Pi(n)?ji:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),ja=!1;var d=t.memoizedState;o.state=d,Ma(t,r,o,i),u=t.memoizedState,s!==r||d!==u||Ni.current||ja?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=ja||qa(t,n,s,r,d,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Ai(t,u=Pi(n)?ji:Ci.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==u)&&Wa(t,o,r,u),ja=!1,d=t.memoizedState,o.state=d,Ma(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||Ni.current||ja?("function"===typeof f&&(Va(t,n,f,r),p=t.memoizedState),(c=ja||qa(t,n,c,r,d,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,i){return fa(),pa(i),t.flags|=256,bs(e,t,n,r),t.child}var Ps,Rs,Ds,Os,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=ju)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Qi++]=Ji,Ki[Qi++]=$i,Ki[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Ks(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Rs(e,t),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[di]=t,e[fi]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Os(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),fa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ou&&(Ou=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),Rs(e,t),null===e&&qr(t.stateNode.containerInfo),Ks(t),null;case 10:return _a(t.type._context),Ks(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Gs(o,!1);else{if(0!==Ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zu&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*$e()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,$s=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var hu=null,du=!1;function fu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||eu(n,t);case 6:var r=hu,i=du;hu=null,fu(e,t,n),du=i,null!==(hu=r)&&(du?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(du?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=du,hu=n.stateNode.containerInfo,du=!0,fu(e,t,n),hu=r,du=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!$s&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,fu(e,t,n),$s=r):fu(e,t,n);break;default:fu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,du=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===hu)throw Error(a(160));pu(o,s,i),hu=null,du=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Ec(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):k(i,h,d,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=$e())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($s=(l=$s)||h,mu(t,e),$s=l):mu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(d=Zs=h;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:eu(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:eu(f,f.return);break;case 22:if(null!==f.memoizedState){_u(d);continue}}null!==p?(p.return=f,Zs=p):_u(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Js;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Js;var c=$s;if(Js=o,($s=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Zs=u):xu(i);for(;null!==a;)Zs=a,wu(a,t,n),a=a.sibling;Zs=i,Js=s,$s=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):bu(e)}}function bu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(a(163))}$s||512&t.flags&&au(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Iu,Eu=Math.ceil,Su=w.ReactCurrentDispatcher,Tu=w.ReactCurrentOwner,Cu=w.ReactCurrentBatchConfig,Nu=0,ju=null,Au=null,Pu=0,Ru=0,Du=Ii(0),Ou=0,Lu=null,Mu=0,Fu=0,Uu=0,Vu=null,Bu=null,qu=0,zu=1/0,Wu=null,Hu=!1,Gu=null,Ku=null,Qu=!1,Yu=null,Ju=0,$u=0,Xu=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?$e():-1!==Zu?Zu:Zu=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<$u)throw $u=0,Xu=null,Error(a(185));yt(e,n,r),0!==(2&Nu)&&e===ju||(e===ju&&(0===(2&Nu)&&(Fu|=n),4===Ou&&uc(e,Pu)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(zu=$e()+500,Ui&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===ju?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&qi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=jc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===ju?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(ju===e&&Pu===t||(Wu=null,zu=$e()+500,fc(e,t));;)try{kc();break}catch(u){pc(e,u)}ba(),Su.current=o,Nu=i,null!==Au?t=0:(ju=null,Pu=0,t=Ou)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Lu,fc(e,0),uc(e,r),ic(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Lu,fc(e,0),uc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bu,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qu+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bu,Wu),t);break}_c(e,Bu,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bu,Wu),r);break}_c(e,Bu,Wu);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bu,Bu=n,null!==t&&sc(t)),e}function sc(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function uc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));xc();var t=dt(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Lu,fc(e,0),uc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bu,Wu),ic(e,$e()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(zu=$e()+500,Ui&&qi())}}function hc(e){null!==Yu&&0===Yu.tag&&0===(6&Nu)&&xc();var t=Nu;Nu|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Nu=t))&&qi()}}function dc(){Ru=Du.current,Ei(Du)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:_a(r.type._context);break;case 22:case 23:dc()}n=n.return}if(ju=e,Au=e=Dc(e.current,null),Pu=Ru=t,Ou=0,Lu=null,Uu=Fu=Mu=0,Bu=Vu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Au;try{if(ba(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,wo=0,Tu.current=null,null===n||null===n.return){Ou=1,Lu=t,Au=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Ou&&(Ou=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ku||!Ku.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function vc(){var e=Su.current;return Su.current=os,null===e?os:e}function mc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===ju||0===(268435455&Mu)&&0===(268435455&Fu)||uc(ju,Pu)}function yc(e,t){var n=Nu;Nu|=2;var r=vc();for(ju===e&&Pu===t||(Wu=null,fc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),Nu=n,Su.current=r,null!==Au)throw Error(a(261));return ju=null,Pu=0,Ou}function gc(){for(;null!==Au;)wc(Au)}function kc(){for(;null!==Au&&!Ye();)wc(Au)}function wc(e){var t=Iu(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?bc(e):Au=t,Tu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ru)))return void(Au=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Ou=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Ou&&(Ou=5)}function _c(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Yu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===ju&&(Au=ju=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,jc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=s+i),d!==o||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++l===i&&(u=s),f===o&&++h===r&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),yu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Je(),Nu=u,kt=s,Cu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,Ju=i),o=e.pendingLanes,0===o&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Gu,Gu=null,e;0!==(1&Ju)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xu?$u++:($u=0,Xu=e):$u=0,qi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function xc(){if(null!==Yu){var e=wt(Ju),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Ju=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var d=h.child;if(null!==d)d.return=h,Zs=d;else for(;null!==Zs;){var f=(h=Zs).sibling,p=h.return;if(ou(h),h===l){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(_){Ec(u,u.return,_)}if(u===s){Zs=null;break e}var b=u.sibling;if(null!==b){b.return=u.return,Zs=b;break e}Zs=u.return}}if(Nu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function Ic(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,ju===e&&(Pu&n)===n&&(4===Ou||3===Ou&&(130023424&Pu)===Pu&&500>$e()-qu?fc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function jc(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:s=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case j:return(e=Pc(19,n,t,i)).elementType=j,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case C:s=11;break e;case A:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,a,o,s,u){return(e=Bc(n,r,!0,e,0,a,0,s,u)).context=qc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),Oa(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:js(t),fa();break;case 5:ao(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Si(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(js(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ws(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Ia(t,n),za(t,r,i),Ha(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Nu)&&(zu=$e()+500,qi()))}break;case 13:hc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));K(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=hc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,v(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function j(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,d=null,f=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,R(_);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var u=!0;else{var h=r(l);null!==h&&D(b,h.startTime-n),u=!1}return u}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function j(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=j,x=function(){P.postMessage(null)}}else x=function(){y(j,0)};function R(e){E=e,I||(I=!0,x())}function D(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,D(b,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,R(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Tt},SDK_VERSION:function(){return Xn},_DEFAULT_ENTRY_NAME:function(){return Un},_addComponent:function(){return zn},_addOrOverwriteComponent:function(){return Wn},_apps:function(){return Bn},_clearComponents:function(){return Qn},_components:function(){return qn},_getProvider:function(){return Gn},_registerComponent:function(){return Hn},_removeServiceInstance:function(){return Kn},deleteApp:function(){return nr},getApp:function(){return er},getApps:function(){return tr},initializeApp:function(){return Zn},onLog:function(){return ar},registerVersion:function(){return ir},setLogLevel:function(){return or}});var t,r=n(791),i=n.t(r,2),a=n(164);function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||u(e,t)||c()}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){return function(e){if(Array.isArray(e))return s(e)}(e)||h(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){var t=b();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function I(e,t,n){return I=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},I.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},E(e)}function S(e){return o(e)||h(e)||u(e)||c()}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var N,j="popstate";function A(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function P(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?L(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function O(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function L(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function M(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,h=t.Pop,d=null,f=p();function p(){return(l.state||{idx:null}).idx}function v(){h=t.Pop;var e=p(),n=null==e?null:e-f;f=e,d&&d({action:h,location:y.location,delta:n})}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:O(e);return A(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,l.replaceState(C({},l.state,{idx:f}),""));var y={get action(){return h},get location(){return e(s,l)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(j,v),d=e,function(){s.removeEventListener(j,v),d=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;var i=D(y.location,e,n);r&&r(i,e);var a=R(i,f=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(BC){s.location.assign(o)}c&&d&&d({action:h,location:y.location,delta:1})},replace:function(e,n){h=t.Replace;var i=D(y.location,e,n);r&&r(i,e);var a=R(i,f=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&d&&d({action:h,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(N||(N={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?L(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Y(i[o],$(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(A(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ne([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(A(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),U(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Q(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=T(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=S(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=V(i.join("/")),u=[];return u.push.apply(u,d(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,d(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var B=/^:\w+$/,q=3,z=2,W=1,H=10,G=-2,K=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(K)&&(r+=G),t&&(r+=z),n.filter((function(e){return!K(e)})).reduce((function(e,t){return e+(B.test(t)?q:""===t?W:H)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=J({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function J(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);P("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(BC){return P(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+BC+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function $(e){try{return decodeURI(e)}catch(BC){return P(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+BC+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=L(e):(A(!(i=C({},e)).pathname||!i.pathname.includes("?"),Z("?","pathname","search",i)),A(!i.pathname||!i.pathname.includes("#"),Z("#","pathname","hash",i)),A(!i.search||!i.search.includes("#"),Z("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?L(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ie(a),hash:ae(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),d=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!d||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(E(Error));function se(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ue=["post","put","patch","delete"],ce=(new Set(ue),["get"].concat(ue));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var le="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},he=r.useState,de=r.useEffect,fe=r.useLayoutEffect,pe=r.useDebugValue;function ve(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!le(n,r)}catch(BC){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var me=r.createContext(null);var ye=r.createContext(null);var ge=r.createContext(null);var ke=r.createContext(null);var we=r.createContext(null);var be=r.createContext({outlet:null,matches:[]});var _e=r.createContext(null);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Ie(){return null!=r.useContext(we)}function Ee(){return Ie()||A(!1),r.useContext(we).location}function Se(){Ie()||A(!1);var e=r.useContext(ke),t=e.basename,n=e.navigator,i=r.useContext(be).matches,a=Ee().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);r.useEffect((function(){s.current=!0}));var u=r.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=te(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:ne([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return u}function Te(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(be).matches,a=Ee().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return te(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Ce(){var e=function(){var e,t=r.useContext(_e),n=De(je.UseRouteError),i=Oe(je.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=se(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ne,je,Ae=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(be.Provider,{value:this.props.routeContext},r.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function Pe(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(me);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(be.Provider,{value:t},i)}function Re(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||A(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;n&&(c=o.route.ErrorBoundary?r.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:r.createElement(Ce,null));var l=t.concat(i.slice(0,s+1)),h=function(){var t=e;return u?t=c:o.route.Component?t=r.createElement(o.route.Component,null):o.route.element&&(t=o.route.element),r.createElement(Pe,{match:o,routeContext:{outlet:e,matches:l},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===s)?r.createElement(Ae,{location:n.location,component:c,error:u,children:h(),routeContext:{outlet:null,matches:l}}):h()}),null)}function De(e){var t=r.useContext(ye);return t||A(!1),t}function Oe(e){var t=function(e){var t=r.useContext(be);return t||A(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||A(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Ne||(Ne={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(je||(je={}));var Le;function Me(e){A(!1)}function Fe(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,h=e.static,d=void 0!==h&&h;Ie()&&A(!1);var f=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:f,navigator:l,static:d}}),[f,l,d]);"string"===typeof s&&(s=L(s));var v=s,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,w=v.hash,b=void 0===w?"":w,_=v.state,x=void 0===_?null:_,I=v.key,E=void 0===I?"default":I,S=r.useMemo((function(){var e=X(y,f);return null==e?null:{location:{pathname:e,search:k,hash:b,state:x,key:E},navigationType:c}}),[f,y,k,b,x,E,c]);return null==S?null:r.createElement(ke.Provider,{value:p},r.createElement(we.Provider,{children:o,value:S}))}function Ue(e){var n=e.children,i=e.location,a=r.useContext(me);return function(e,n){Ie()||A(!1);var i,a=r.useContext(ke).navigator,o=r.useContext(ye),s=r.useContext(be).matches,u=s[s.length-1],c=u?u.params:{},l=(u&&u.pathname,u?u.pathnameBase:"/"),h=(u&&u.route,Ee());if(n){var d,f="string"===typeof n?L(n):n;"/"===l||(null==(d=f.pathname)?void 0:d.startsWith(l))||A(!1),i=f}else i=h;var p=i.pathname||"/",v=F(e,{pathname:"/"===l?p:p.slice(l.length)||"/"}),m=Re(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,o||void 0);return n&&m?r.createElement(we.Provider,{value:{location:xe({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},m):m}(a&&!n?a.router.routes:Be(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Le||(Le={}));var Ve=new Promise((function(){}));r.Component;function Be(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(d(t),[i]);if(e.type!==r.Fragment){e.type!==Me&&A(!1),e.props.index&&e.props.children&&A(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Be(e.props.children,a)),n.push(o)}else n.push.apply(n,Be(e.props.children,a))}})),n}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}function ze(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var We=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function He(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),M((function(e,t){var n=e.location;return D("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:O(t)}),null,t)));var s=o.current,u=l(r.useState({action:s.action,location:s.location}),2),c=u[0],h=u[1];return r.useLayoutEffect((function(){return s.listen(h)}),[s]),r.createElement(Fe,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:s})}var Ge="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qe=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,s=e.replace,u=e.state,c=e.target,l=e.to,h=e.preventScrollReset,d=ze(e,We),f=r.useContext(ke).basename,p=!1;if("string"===typeof l&&Ke.test(l)&&(n=l,Ge)){var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=X(m.pathname,f);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}var g=function(e,t){var n=(void 0===t?{}:t).relative;Ie()||A(!1);var i=r.useContext(ke),a=i.basename,o=i.navigator,s=Te(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==a&&(h="/"===c?a:ne([a,c])),o.createHref({pathname:h,search:l,hash:u})}(l,{relative:a}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,c=Se(),l=Ee(),h=Te(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:O(l)===O(h);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,h,a,o,i,e,s,u])}(l,{replace:s,state:u,target:c,preventScrollReset:h,relative:a});return r.createElement("a",qe({},d,{href:n||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:t,target:c}))}));var Ye,Je;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ye||(Ye={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Je||(Je={}));var $e=n(184);function Xe(){return(0,$e.jsxs)("div",{children:[(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{class:"ed-mob-menu",children:(0,$e.jsxs)("div",{class:"ed-mob-menu-con",children:[(0,$e.jsx)("div",{class:"ed-mm-left",children:(0,$e.jsx)("div",{class:"wed-logo",children:(0,$e.jsx)("a",{href:"index-2.html",children:(0,$e.jsx)("img",{src:"images/logo.png",alt:""})})})}),(0,$e.jsx)("div",{class:"ed-mm-right",children:(0,$e.jsxs)("div",{class:"ed-mm-menu",children:[(0,$e.jsx)("a",{href:"#!",class:"ed-micon",children:(0,$e.jsx)("i",{class:"fa fa-bars"})}),(0,$e.jsxs)("div",{class:"ed-mm-inn",children:[(0,$e.jsx)("h4",{children:"User Account"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"#!","data-toggle":"modal","data-target":"#modal1",children:"Log In"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/AdminLogin","data-toggle":"modal","data-target":"#modal2",children:"Admin Login"})})]}),(0,$e.jsx)("h4",{children:"All Pages"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/",children:"Home"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/about",children:"About us"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/Eventuser",children:"Events"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/Contact",children:"Contact us"})})]})]})]})})]})})}),(0,$e.jsxs)("section",{children:[(0,$e.jsx)("div",{class:"ed-top",children:(0,$e.jsx)("div",{class:"container",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsxs)("div",{class:"col-md-12",children:[(0,$e.jsx)("div",{class:"ed-com-t1-left",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"https://goo.gl/maps/9UBdx9pSnKXsWKzL6",target:"_blank",children:"Location:Behind Railway station,Rohtak"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"tel:+918571892019",children:"Phone: +91-8571892019"})})]})}),(0,$e.jsx)("div",{class:"ed-com-t1-right",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#!","data-toggle":"modal","data-target":"#modal1",children:"Log In"})}),(0,$e.jsx)("li",{className:"",children:(0,$e.jsx)(Qe,{to:"/AdminLogin",children:"Admin Login"})})]})}),(0,$e.jsx)("div",{class:"ed-com-t1-social",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"https://vcertk.com/",target:"-",children:(0,$e.jsx)("i",{class:"fa fa-facebook","aria-hidden":"true"})})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:(0,$e.jsx)("i",{class:"fa fa-google-plus","aria-hidden":"true"})})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:(0,$e.jsx)("i",{class:"fa fa-twitter","aria-hidden":"true"})})})]})})]})})})}),(0,$e.jsx)("div",{class:"top-logo","data-spy":"affix","data-offset-top":"250",children:(0,$e.jsx)("div",{class:"container",children:(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsxs)("div",{class:"col-md-12",children:[(0,$e.jsx)("div",{class:"wed-logo",children:(0,$e.jsx)(Qe,{to:"/",children:(0,$e.jsx)("img",{src:"images/logo.png",alt:""})})}),(0,$e.jsx)("div",{class:"main-menu",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/",children:"Home"})}),(0,$e.jsx)("li",{class:"about-menu",children:(0,$e.jsx)(Qe,{to:"/about",class:"mm-arr",children:"About us"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/Eventuser",children:"Events"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/Contact",children:"Contact us"})})]})})]}),(0,$e.jsx)("div",{class:"all-drop-down-menu"})]})})}),(0,$e.jsx)("div",{class:"search-top",children:(0,$e.jsx)("div",{class:"container",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"col-md-12",children:(0,$e.jsx)("div",{class:"search-form",children:(0,$e.jsx)("form",{children:(0,$e.jsx)("div",{class:"sf-list"})})})})})})})]})]})}function Ze(){return(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsxs)("div",{className:"box-inn-sp ",children:[(0,$e.jsxs)("div",{className:"inn-title ",style:{backgroundColor:"rgb(9, 125, 125)"},children:[(0,$e.jsx)("h4",{children:"Admin Login"}),(0,$e.jsx)("p",{children:"Here you can edit your website basic details URL, Phone, Email, Address, User and password and more"})]}),(0,$e.jsxs)("div",{className:"container border mt-5",children:[(0,$e.jsxs)("div",{className:"border ",children:[(0,$e.jsx)("label",{htmlFor:"Username",className:"mt-5",children:"User Name"}),(0,$e.jsx)("input",{id:"Username",style:{fontSize:"large"},type:"text",className:"validate",required:!0})]}),(0,$e.jsxs)("div",{className:"border",children:[(0,$e.jsx)("label",{htmlFor:"Pasword",className:"",children:"Password"}),(0,$e.jsx)("input",{id:"Pasword",type:"password",style:{fontSize:"large"},className:"validate",required:!0})]}),(0,$e.jsx)("div",{className:"row",children:(0,$e.jsx)("div",{className:"input-field col s12",children:(0,$e.jsx)("a",{onClick:function(){var e="ajay",t="".concat((new Date).getHours()).concat((new Date).getMinutes());console.log(t);var n="ghrtgjregn4g6354e65rfg4regf1er56g74tykjhrnthg65th87yrty4y6t8j6jtykhjnr",r="";if(document.getElementById("Username").value==e&&document.getElementById("Pasword").value==t){for(var i=0;i<30;i++)r+=n.charAt(Math.floor(Math.random()*n.length));sessionStorage.setItem("fl",r),alert("Welcome\n".concat(e)),window.location.replace("/".concat(r))}},children:(0,$e.jsx)("i",{style:{fontSize:"large"},className:"waves-effect waves-light btn-large waves-input-wrapper",children:"Login"})})})})]})]})]})}function et(){"".concat((new Date).getHours()).concat((new Date).getMinutes());return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",{class:"sb2-12",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{src:"images/placeholder.PNG",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)("h5",{children:["Libraria",(0,$e.jsx)("span",{children:"Vaish College Of Engineering"})]})}),(0,$e.jsx)("li",{})]})}),(0,$e.jsx)("div",{class:"sb2-13",children:(0,$e.jsxs)("ul",{"data-collapsible":"accordion",children:[(0,$e.jsx)("li",{children:(0,$e.jsxs)("a",{href:"/Eventadddata",children:[(0,$e.jsx)("i",{class:"fa fa-cogs","aria-hidden":"true"}),"Add Events"]})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)(Qe,{to:"/".concat(sessionStorage.getItem("fl")),children:[(0,$e.jsx)("i",{class:"fa fa-user","aria-hidden":"true"}),"Student Admission"]})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)(Qe,{to:"/Allstudentdetails",children:[(0,$e.jsx)("i",{class:"fas fa-user-edit","aria-hidden":"true"}),"Allstudentdetails"]})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)(Qe,{to:"/",children:[(0,$e.jsx)("i",{class:"fa fa-user","aria-hidden":"true"}),"LogOut"]})})]})})]})}var tt=["choose",1,2,3,4,5,6,7,8],nt=["choose class","BCA","BTech"];function rt(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},at=function(e,t){if(!e)throw ot(t)},ot=function(e){return new Error("Firebase Database ("+it.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},st=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ut={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;u||(f=64,o||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(st(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new ct;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ct=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(E(Error)),lt=function(e){var t=st(e);return ut.encodeByteArray(t,!0)},ht=function(e){return lt(e).replace(/\./g,"")},dt=function(e){try{return ut.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ft(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ft(e[n],t[n]));return e}var pt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},vt=function(){try{return pt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Librariaa-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&dt(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},mt=function(){var e;return null===(e=vt())||void 0===e?void 0:e.config},yt=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function gt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ht(JSON.stringify({alg:"none",type:"JWT"})),ht(JSON.stringify(a)),""].join(".")}function kt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function wt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function bt(){var e,t=null===(e=vt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function _t(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function xt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function It(){var e=kt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Et(){return!0===it.NODE_CLIENT||!0===it.NODE_ADMIN}function St(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Tt=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),Ct.prototype.create),a}return y(n)}(E(Error)),Ct=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Nt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Tt(n,a,t)}}]),e}();var Nt=/\{\$([^}]+)}/g;function jt(e){return JSON.parse(e)}function At(e){return JSON.stringify(e)}var Pt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=jt(dt(a[0])||""),n=jt(dt(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ot(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lt(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Mt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Ft(s)&&Ft(u)){if(!Mt(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Ft(e){return null!==e&&"object"===typeof e}function Ut(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Vt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Bt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var qt=function(){function e(){f(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return y(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],d=this.chain_[3],f=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=d^l&(h^d),u=1518500249):(s=l^h^d,u=1859775393):p<60?(s=l&h|d&(l|h),u=2400959708):(s=l^h^d,u=3395469782);var v=(c<<5|c>>>27)+s+f+u+n[p]&4294967295;f=d,d=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function zt(e,t){var n=new Wt(e,t);return n.subscribe.bind(n)}var Wt=function(){function e(t,n){var r=this;f(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ht),void 0===r.error&&(r.error=Ht),void 0===r.complete&&(r.complete=Ht);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ht(){}var Gt=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Kt(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Qt(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Kt(e,t)+"must be a valid function.")}function Yt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Kt(e,t)+"must be a valid context object.")}var Jt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function $t(e){return e&&e._delegate?e._delegate:e}function Xt(){Xt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new S(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var h={};function d(){}function f(){}function v(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==p(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:f,configurable:!0}),f.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Zt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(BC){return void n(BC)}s.done?t(u):Promise.resolve(u).then(r,i)}function en(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Zt(a,r,i,o,s,"next",e)}function s(e){Zt(a,r,i,o,s,"throw",e)}o(void 0)}))}}var tn=function(){function e(t,n,r){f(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),nn="[DEFAULT]",rn=function(){function e(t,n){f(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new yt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:nn})}catch(u){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(d(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),d(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(TE){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===nn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(TE){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn;return this.component?this.component.multipleInstances?e:nn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var an,on,sn=function(){function e(t){f(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new rn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),un=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(on||(on={}));var cn={debug:on.DEBUG,verbose:on.VERBOSE,info:on.INFO,warn:on.WARN,error:on.ERROR,silent:on.SILENT},ln=on.INFO,hn=(rt(an={},on.DEBUG,"log"),rt(an,on.VERBOSE,"log"),rt(an,on.INFO,"info"),rt(an,on.WARN,"warn"),rt(an,on.ERROR,"error"),an),dn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=hn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},fn=function(){function e(t){f(this,e),this.name=t,this._logLevel=ln,this._logHandler=dn,this._userLogHandler=null,un.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in on))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?cn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,on.DEBUG].concat(t)),this._logHandler.apply(this,[this,on.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,on.VERBOSE].concat(t)),this._logHandler.apply(this,[this,on.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,on.INFO].concat(t)),this._logHandler.apply(this,[this,on.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,on.WARN].concat(t)),this._logHandler.apply(this,[this,on.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,on.ERROR].concat(t)),this._logHandler.apply(this,[this,on.ERROR].concat(t))}}]),e}();function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mn,yn,gn=function(e,t){return t.some((function(t){return e instanceof t}))};var kn=new WeakMap,wn=new WeakMap,bn=new WeakMap,_n=new WeakMap,xn=new WeakMap;var In={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return wn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function En(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(yn||(yn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Cn(this),n),Tn(kn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tn(e.apply(Cn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Cn(this),t].concat(r));return bn.set(a,t.sort?t.sort():[t]),Tn(a)}}function Sn(e){return"function"===typeof e?En(e):(e instanceof IDBTransaction&&function(e){if(!wn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));wn.set(e,t)}}(e),gn(e,mn||(mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,In):e)}function Tn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Tn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&kn.set(t,e)})).catch((function(){})),xn.set(t,e),t}(e);if(_n.has(e))return _n.get(e);var t=Sn(e);return t!==e&&(_n.set(e,t),xn.set(t,e)),t}var Cn=function(e){return xn.get(e)};var Nn,jn,An=["get","getKey","getAll","getAllKeys","count"],Pn=["put","add","delete","clear"],Rn=new Map;function Dn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Rn.get(t))return Rn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Pn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||An.includes(n))){var a=function(){var e=en(Xt().mark((function e(t){var a,o,s,u,c,l,h=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Rn.set(t,a),a}}}In=function(e){return vn(vn({},e),{},{get:function(t,n,r){return Dn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Dn(t,n)||e.has(t,n)}})}(In);var On=function(){function e(t){f(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ln="@firebase/app",Mn="0.9.8",Fn=new fn("@firebase/app"),Un="[DEFAULT]",Vn=(rt(Nn={},Ln,"fire-core"),rt(Nn,"@firebase/app-compat","fire-core-compat"),rt(Nn,"@firebase/analytics","fire-analytics"),rt(Nn,"@firebase/analytics-compat","fire-analytics-compat"),rt(Nn,"@firebase/app-check","fire-app-check"),rt(Nn,"@firebase/app-check-compat","fire-app-check-compat"),rt(Nn,"@firebase/auth","fire-auth"),rt(Nn,"@firebase/auth-compat","fire-auth-compat"),rt(Nn,"@firebase/database","fire-rtdb"),rt(Nn,"@firebase/database-compat","fire-rtdb-compat"),rt(Nn,"@firebase/functions","fire-fn"),rt(Nn,"@firebase/functions-compat","fire-fn-compat"),rt(Nn,"@firebase/installations","fire-iid"),rt(Nn,"@firebase/installations-compat","fire-iid-compat"),rt(Nn,"@firebase/messaging","fire-fcm"),rt(Nn,"@firebase/messaging-compat","fire-fcm-compat"),rt(Nn,"@firebase/performance","fire-perf"),rt(Nn,"@firebase/performance-compat","fire-perf-compat"),rt(Nn,"@firebase/remote-config","fire-rc"),rt(Nn,"@firebase/remote-config-compat","fire-rc-compat"),rt(Nn,"@firebase/storage","fire-gcs"),rt(Nn,"@firebase/storage-compat","fire-gcs-compat"),rt(Nn,"@firebase/firestore","fire-fst"),rt(Nn,"@firebase/firestore-compat","fire-fst-compat"),rt(Nn,"fire-js","fire-js"),rt(Nn,"firebase","fire-js-all"),Nn),Bn=new Map,qn=new Map;function zn(e,t){try{e.container.addComponent(t)}catch(n){Fn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Wn(e,t){e.container.addOrOverwriteComponent(t)}function Hn(e){var t=e.name;if(qn.has(t))return Fn.debug("There were multiple attempts to register component ".concat(t,".")),!1;qn.set(t,e);var n,r=T(Bn.values());try{for(r.s();!(n=r.n()).done;){zn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Gn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Un;Gn(e,t).clearInstance(n)}function Qn(){qn.clear()}var Yn=(rt(jn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),rt(jn,"bad-app-name","Illegal App name: '{$appName}"),rt(jn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),rt(jn,"app-deleted","Firebase App named '{$appName}' already deleted"),rt(jn,"no-options","Need to provide options, when not being deployed to hosting via source."),rt(jn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),rt(jn,"invalid-log-argument","First argument to `onLog` must be null or a function."),rt(jn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),rt(jn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),rt(jn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),rt(jn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),jn),Jn=new Ct("app","Firebase",Yn),$n=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tn("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}]),e}(),Xn="9.20.0";function Zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Un,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Jn.create("bad-app-name",{appName:String(i)});if(n||(n=mt()),!n)throw Jn.create("no-options");var a=Bn.get(i);if(a){if(Mt(n,a.options)&&Mt(r,a.config))return a;throw Jn.create("duplicate-app",{appName:i})}var o,s=new sn(i),u=T(qn.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new $n(n,r,s);return Bn.set(i,l),l}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un,t=Bn.get(e);if(!t&&e===Un)return Zn();if(!t)throw Jn.create("no-app",{appName:e});return t}function tr(){return Array.from(Bn.values())}function nr(e){return rr.apply(this,arguments)}function rr(){return(rr=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Bn.has(n)){e.next=6;break}return Bn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(e,t,n){var r,i=null!==(r=Vn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Fn.warn(s.join(" "))}Hn(new tn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ar(e,t){if(null!==e&&"function"!==typeof e)throw Jn.create("invalid-log-argument");!function(e,t){var n,r=T(un);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=cn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:on[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function or(e){var t;t=e,un.forEach((function(e){e.setLogLevel(t)}))}var sr="firebase-heartbeat-database",ur=1,cr="firebase-heartbeat-store",lr=null;function hr(){return lr||(lr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Tn(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Tn(s.result),e.oldVersion,e.newVersion,Tn(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}(sr,ur,{upgrade:function(e,t){if(0===t)e.createObjectStore(cr)}}).catch((function(e){throw Jn.create("idb-open",{originalErrorMessage:e.message})}))),lr}function dr(e){return fr.apply(this,arguments)}function fr(){return fr=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hr();case 3:return n=e.sent,e.abrupt("return",n.transaction(cr).objectStore(cr).get(mr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Tt?Fn.warn(e.t0.message):(r=Jn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Fn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),fr.apply(this,arguments)}function pr(e,t){return vr.apply(this,arguments)}function vr(){return vr=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hr();case 3:return r=e.sent,i=r.transaction(cr,"readwrite"),a=i.objectStore(cr),e.next=8,a.put(n,mr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Tt?Fn.warn(e.t0.message):(o=Jn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Fn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),vr.apply(this,arguments)}function mr(e){return"".concat(e.name,"!").concat(e.options.appId)}var yr=1024,gr=function(){function e(t){var n=this;f(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new xr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=en(Xt().mark((function e(){var t,n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=kr(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=kr(),n=wr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ht(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function kr(){return(new Date).toISOString().substring(0,10)}function wr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ir(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ir(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var br,_r,xr=function(){function e(t){f(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(St()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(BC){t(BC)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,dr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",pr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",pr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(d(r.heartbeats),d(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ir(e){return ht(JSON.stringify({version:2,heartbeats:e})).length}br="",Hn(new tn("platform-logger",(function(e){return new On(e)}),"PRIVATE")),Hn(new tn("heartbeat",(function(e){return new gr(e)}),"PRIVATE")),ir(Ln,Mn,br),ir(Ln,Mn,"esm2017"),ir("fire-js","");var Er=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.firebase=n,zn(t,new tn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),nr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Un;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Un;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){zn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Wn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Sr=(rt(_r={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),rt(_r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_r),Tr=new Ct("app-compat","Firebase",Sr);var Cr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Zn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Rt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ir,setLogLevel:or,onLog:ar,apps:null,SDK_VERSION:Xn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Hn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Tr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ft(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Rt(n,e=e||Un))throw Tr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Er);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ft(n,e)},createSubscribe:zt,ErrorFactory:Ct,deepExtend:ft}),n}(),Nr=new fn("@firebase/app-compat"),jr="@firebase/app-compat",Ar="0.2.8";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Nr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Pr=self.firebase.SDK_VERSION;Pr&&Pr.indexOf("LITE")>=0&&Nr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Rr=Cr;!function(e){ir(jr,Ar,e)}();function Dr(){return Dr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Dr.apply(this,arguments)}Rr.registerVersion("firebase","9.20.0","app-compat");function Or(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Lr;Object.create;var Mr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Fr={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function Ur(){return rt({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Vr=function(){var e;return rt(e={},"admin-restricted-operation","This operation is restricted to administrators only."),rt(e,"argument-error",""),rt(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),rt(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),rt(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),rt(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),rt(e,"cordova-not-ready","Cordova framework is not ready."),rt(e,"cors-unsupported","This browser is not supported."),rt(e,"credential-already-in-use","This credential is already associated with a different user account."),rt(e,"custom-token-mismatch","The custom token corresponds to a different audience."),rt(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),rt(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),rt(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),rt(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),rt(e,"email-already-in-use","The email address is already in use by another account."),rt(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),rt(e,"expired-action-code","The action code has expired."),rt(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),rt(e,"internal-error","An internal AuthError has occurred."),rt(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),rt(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),rt(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),rt(e,"invalid-auth-event","An internal AuthError has occurred."),rt(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),rt(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),rt(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),rt(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),rt(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),rt(e,"invalid-email","The email address is badly formatted."),rt(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),rt(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),rt(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),rt(e,"invalid-credential","The supplied auth credential is malformed or has expired."),rt(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),rt(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),rt(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),rt(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),rt(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),rt(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),rt(e,"wrong-password","The password is invalid or the user does not have a password."),rt(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),rt(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),rt(e,"invalid-provider-id","The specified provider ID is invalid."),rt(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),rt(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),rt(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),rt(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),rt(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),rt(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),rt(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),rt(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),rt(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),rt(e,"missing-continue-uri","A continue URL must be provided in the request."),rt(e,"missing-iframe-start","An internal AuthError has occurred."),rt(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),rt(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),rt(e,"missing-password","A non-empty password must be provided"),rt(e,"missing-multi-factor-info","No second factor identifier is provided."),rt(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),rt(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),rt(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),rt(e,"app-deleted","This instance of FirebaseApp has been deleted."),rt(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),rt(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),rt(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),rt(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),rt(e,"no-auth-event","An internal AuthError has occurred."),rt(e,"no-such-provider","User was not linked to an account with the given provider."),rt(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),rt(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),rt(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),rt(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),rt(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),rt(e,"provider-already-linked","User can only be linked to one identity for the given provider."),rt(e,"quota-exceeded","The project's quota for this operation has been exceeded."),rt(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),rt(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),rt(e,"rejected-credential","The request contains malformed or mismatching credentials."),rt(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),rt(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),rt(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),rt(e,"timeout","The operation has timed out."),rt(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),rt(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),rt(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),rt(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),rt(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),rt(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),rt(e,"unverified-email","The operation requires a verified email."),rt(e,"user-cancelled","The user did not grant your application the permissions it requested."),rt(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),rt(e,"user-disabled","The user account has been disabled by an administrator."),rt(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),rt(e,"user-signed-out",""),rt(e,"weak-password","The password must be 6 characters long or more."),rt(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),rt(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),rt(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),rt(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),rt(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),rt(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),rt(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),rt(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),rt(e,"invalid-req-type","Invalid request parameters."),rt(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},Br=Ur,qr=new Ct("auth","Firebase",Ur()),zr=new fn("@firebase/auth");function Wr(e){if(zr.logLevel<=on.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zr.warn.apply(zr,["Auth (".concat(Xn,"): ").concat(e)].concat(n))}}function Hr(e){if(zr.logLevel<=on.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zr.error.apply(zr,["Auth (".concat(Xn,"): ").concat(e)].concat(n))}}function Gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Jr.apply(void 0,[e].concat(n))}function Kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jr.apply(void 0,[e].concat(n))}function Qr(e,t,n){var r=Object.assign(Object.assign({},Br()),rt({},t,n));return new Ct("auth","Firebase",r).create(t,{appName:e.name})}function Yr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Gr(e,"argument-error"),Qr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=d(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(d(o)))}return qr.create.apply(qr,[e].concat(n))}function $r(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Jr.apply(void 0,[t].concat(r))}}function Xr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Hr(t),new Error(t)}function Zr(e,t){e||Xr(t)}function ei(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ti(){return"http:"===ni()||"https:"===ni()}function ni(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ri=function(){function e(t,n){f(this,e),this.shortDelay=t,this.longDelay=n,Zr(n>t,"Short delay should be less than long delay!"),this.isMobile=wt()||xt()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ti()||_t()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ii(e,t){Zr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ai=function(){function e(){f(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),oi=(rt(Lr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),rt(Lr,"MISSING_CUSTOM_TOKEN","internal-error"),rt(Lr,"INVALID_IDENTIFIER","invalid-email"),rt(Lr,"MISSING_CONTINUE_URI","internal-error"),rt(Lr,"INVALID_PASSWORD","wrong-password"),rt(Lr,"MISSING_PASSWORD","missing-password"),rt(Lr,"EMAIL_EXISTS","email-already-in-use"),rt(Lr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),rt(Lr,"INVALID_IDP_RESPONSE","invalid-credential"),rt(Lr,"INVALID_PENDING_TOKEN","invalid-credential"),rt(Lr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),rt(Lr,"MISSING_REQ_TYPE","internal-error"),rt(Lr,"EMAIL_NOT_FOUND","user-not-found"),rt(Lr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),rt(Lr,"EXPIRED_OOB_CODE","expired-action-code"),rt(Lr,"INVALID_OOB_CODE","invalid-action-code"),rt(Lr,"MISSING_OOB_CODE","internal-error"),rt(Lr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),rt(Lr,"INVALID_ID_TOKEN","invalid-user-token"),rt(Lr,"TOKEN_EXPIRED","user-token-expired"),rt(Lr,"USER_NOT_FOUND","user-token-expired"),rt(Lr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),rt(Lr,"INVALID_CODE","invalid-verification-code"),rt(Lr,"INVALID_SESSION_INFO","invalid-verification-id"),rt(Lr,"INVALID_TEMPORARY_PROOF","invalid-credential"),rt(Lr,"MISSING_SESSION_INFO","missing-verification-id"),rt(Lr,"SESSION_EXPIRED","code-expired"),rt(Lr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),rt(Lr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),rt(Lr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),rt(Lr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),rt(Lr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),rt(Lr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),rt(Lr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),rt(Lr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),rt(Lr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),rt(Lr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),rt(Lr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),rt(Lr,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),rt(Lr,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),rt(Lr,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),rt(Lr,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),rt(Lr,"MISSING_CLIENT_TYPE","missing-client-type"),rt(Lr,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),rt(Lr,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),rt(Lr,"INVALID_REQ_TYPE","invalid-req-type"),Lr),si=new ri(3e4,6e4);function ui(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function ci(e,t,n,r){return li.apply(this,arguments)}function li(){return li=en(Xt().mark((function e(t,n,r,i){var a,o=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",hi(t,a,en(Xt().mark((function e(){var a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Ut(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ai.fetch()(vi(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function hi(e,t,n){return di.apply(this,arguments)}function di(){return di=en(Xt().mark((function e(t,n,r){var i,a,o,s,u,c,h,d,f,p;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},oi),n),e.prev=2,a=new mi(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw yi(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),d=h[0],f=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw yi(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw yi(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw yi(t,"user-disabled",s);case 29:if(p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw Qr(t,p,f);case 34:Gr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Tt)){e.next=41;break}throw e.t0;case 41:Gr(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),di.apply(this,arguments)}function fi(e,t,n,r){return pi.apply(this,arguments)}function pi(){return pi=en(Xt().mark((function e(t,n,r,i){var a,o,s=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,ci(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Gr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}function vi(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ii(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var mi=function(){function e(t){var n=this;f(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Kr(n.auth,"network-request-failed"))}),si.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function yi(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Kr(e,t,r);return i.customData._tokenResponse=n,i}function gi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){return bi.apply(this,arguments)}function bi(){return(bi=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _i(e,t){return xi.apply(this,arguments)}function xi(){return(xi=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ei(){return Ei=en(Xt().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=$t(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,$r((a=Ti(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ii(Si(a.auth_time)),issuedAtTime:Ii(Si(a.iat)),expirationTime:Ii(Si(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Si(e){return 1e3*Number(e)}function Ti(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Hr("JWT malformed, contained fewer than 3 sections"),null;try{var a=dt(r);return a?JSON.parse(a):(Hr("Failed to decode base64 JWT payload"),null)}catch(o){return Hr("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=en(Xt().mark((function e(t,n){var r=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Tt&&ji(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ni.apply(this,arguments)}function ji(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ai=function(){function e(t){f(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pi=function(){function e(t,n){f(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ri(e){return Di.apply(this,arguments)}function Di(){return Di=en(Xt().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,d;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ci(t,_i(r,{idToken:i}));case 6:$r(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Or(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=Li(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Pi(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Oi(){return(Oi=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$t(t),e.next=3,Ri(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Li(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(d(n),d(t))}function Mi(e,t){return Fi.apply(this,arguments)}function Fi(){return(Fi=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hi(t,{},en(Xt().mark((function e(){var r,i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=vi(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ai.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ui=function(){function e(){f(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){$r(e.idToken,"internal-error"),$r("undefined"!==typeof e.idToken,"internal-error"),$r("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Ti(e);return $r(t,"internal-error"),$r("undefined"!==typeof t.exp,"internal-error"),$r("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=en(Xt().mark((function e(t){var n,r=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],$r(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Xr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&($r("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&($r("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&($r("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Vi(e,t){$r("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Bi=function(){function e(t){f(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Or(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ai(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?d(a.providerData):[],this.metadata=new Pi(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ci(this,this.stsTokenManager.getToken(this.auth,t));case 2:if($r(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ei.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Oi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&($r(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){$r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=en(Xt().mark((function e(t){var n,r,i=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ri(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ci(this,gi(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,d=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;$r(k&&x,t,"internal-error");var I=Ui.fromJSON(this.name,x);$r("string"===typeof k,t,"internal-error"),Vi(h,t.name),Vi(d,t.name),$r("boolean"===typeof w,t,"internal-error"),$r("boolean"===typeof b,t,"internal-error"),Vi(f,t.name),Vi(p,t.name),Vi(v,t.name),Vi(m,t.name),Vi(y,t.name),Vi(g,t.name);var E=new e({uid:k,auth:t,email:d,emailVerified:w,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=en(Xt().mark((function t(n,r){var i,a,o,s=arguments;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ui).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ri(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),qi=new Map;function zi(e){Zr(e instanceof Function,"Expected a class definition");var t=qi.get(e);return t?(Zr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qi.set(e,t),t)}var Wi=function(){function e(){f(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Wi.type="NONE";var Hi=Wi;function Gi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ki=function(){function e(t,n,r){f(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Gi(this.userKey,a.apiKey,o),this.fullPersistenceKey=Gi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Bi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=en(Xt().mark((function t(n,r){var i,a,o,s,u,c,l,h,d,f,p,v=arguments;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(zi(Hi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||zi(Hi),s=Gi(i,n.config.apiKey,n.name),u=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(d=t.sent)){t.next=23;break}return f=Bi._fromJSON(n,d),h!==o&&(u=f),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Qi(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ea(t))return"Blackberry";if(ta(t))return"Webos";if(Ji(t))return"Safari";if((t.includes("chrome/")||$i(t))&&!t.includes("edge/"))return"Chrome";if(Zi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/firefox\//i.test(e)}function Ji(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/crios\//i.test(e)}function Xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iemobile/i.test(e)}function Zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/android/i.test(e)}function ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/blackberry/i.test(e)}function ta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/webos/i.test(e)}function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return na(e)||Zi(e)||ta(e)||ea(e)||/windows phone/i.test(e)||Xi(e)}function ia(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qi(kt());break;case"Worker":t="".concat(Qi(kt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Xn,"/").concat(r)}function aa(e){return oa.apply(this,arguments)}function oa(){return(oa=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ci(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(e,t){return ua.apply(this,arguments)}function ua(){return(ua=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"GET","/v2/recaptchaConfig",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e){return void 0!==e&&void 0!==e.getResponse}function la(e){return void 0!==e&&void 0!==e.enterprise}var ha=y((function e(t){if(f(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function da(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Kr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function fa(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var pa=function(){function e(t){f(this,e),this.type="recaptcha-enterprise",this.auth=ka(t)}return y(e,[{key:"verify",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;la(i)?i.enterprise.ready((function(){try{i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(e){r(e)}))}catch(BC){r(BC)}})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=en(Xt().mark((function e(n,r){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sa(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new ha(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&la(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));da("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function va(e,t,n){return ma.apply(this,arguments)}function ma(){return ma=en(Xt().mark((function e(t,n,r){var i,a,o,s,u=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new pa(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),ma.apply(this,arguments)}var ya=function(){function e(t){f(this,e),this.auth=t,this.queue=[]}return y(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=en(Xt().mark((function e(t){var n,r,i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=T(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ga=function(){function e(t,n,r,i){f(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wa(this),this.idTokenSubscription=new wa(this),this.beforeStateQueue=new ya(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(en(Xt().mark((function r(){var i,a;return Xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ki.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=en(Xt().mark((function e(t){var n,r,i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return $r(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ri(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?$t(t):null)&&$r(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=en(Xt().mark((function e(t){var n,r=this,i=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&$r(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(en(Xt().mark((function n(){return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(zi(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=en(Xt().mark((function e(){var t,n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new ha(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new pa(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ct("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return $r(n=t&&zi(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ki.create(this,[zi(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=en(Xt().mark((function e(t){var n=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return $r(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return $r(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ia(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rt({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=en(Xt().mark((function e(){var t,n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Wr("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ka(e){return $t(e)}var wa=function(){function e(t){var n=this;f(this,e),this.auth=t,this.observer=null,this.addObserver=zt((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return $r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ba(e,t,n){var r=ka(e);$r(r._canInitEmulator,r,"emulator-config-failed"),$r(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=_a(t),o=function(e){var t=_a(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:xa(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:xa(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function _a(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xa(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ia=function(){function e(t,n){f(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return Xr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Xr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Xr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Xr("not implemented")}}]),e}();function Ea(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:resetPassword",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t){return ja.apply(this,arguments)}function ja(){return(ja=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:update",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(t,"POST","/v1/accounts:signInWithPassword",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(e,t){return Da.apply(this,arguments)}function Da(){return(Da=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:sendOobCode",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t){return La.apply(this,arguments)}function La(){return(La=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t){return Fa.apply(this,arguments)}function Fa(){return(Fa=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ua(e,t){return Va.apply(this,arguments)}function Va(){return(Va=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ba(e,t){return qa.apply(this,arguments)}function qa(){return(qa=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(e,t){return Wa.apply(this,arguments)}function Wa(){return(Wa=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ha(e,t){return Ga.apply(this,arguments)}function Ga(){return(Ga=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ka=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=en(Xt().mark((function e(t){var n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,va(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Aa(t,i));case 11:return e.abrupt("return",Aa(t,r).catch(function(){var e=en(Xt().mark((function e(n){var i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,va(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Aa(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",za(t,{email:this._email,oobCode:this._password}));case 13:Gr(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ta(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ha(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Gr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ia);function Qa(e,t){return Ya.apply(this,arguments)}function Ya(){return(Ya=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(t,"POST","/v1/accounts:signInWithIdp",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ja=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Qa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ut(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Or(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ia);function $a(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:sendVerificationCode",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(){return(Za=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(t,"POST","/v1/accounts:signInWithPhoneNumber",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eo(){return(eo=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fi(t,"POST","/v1/accounts:signInWithPhoneNumber",ui(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw yi(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var to=rt({},"USER_NOT_FOUND","user-not-found");function no(){return(no=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",fi(t,"POST","/v1/accounts:signInWithPhoneNumber",ui(t,r),to));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ro=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Za.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return eo.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return no.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ia);var io=function(){function e(t){var n,r,i,a,o,s;f(this,e);var u=Vt(Bt(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);$r(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Vt(Bt(e)).link,n=t?Vt(Bt(t)).deep_link_id:null,r=Vt(Bt(e)).deep_link_id;return(r?Vt(Bt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(TE){return null}}}]),e}();var ao=function(){function e(){f(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return Ka._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=io.parseLink(t);return $r(n,"argument-error"),Ka._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ao.PROVIDER_ID="password",ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var oo=function(){function e(t){f(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),so=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return d(this.scopes)}}]),n}(oo),uo=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return $r(e.idToken||e.accessToken,"argument-error"),Ja._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return $r("providerId"in t&&"signInMethod"in t,"argument-error"),Ja._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(so),co=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return Ja._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(TE){return null}}}]),n}(so);co.FACEBOOK_SIGN_IN_METHOD="facebook.com",co.PROVIDER_ID="facebook.com";var lo=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return Ja._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(TE){return null}}}]),n}(so);lo.GOOGLE_SIGN_IN_METHOD="google.com",lo.PROVIDER_ID="google.com";var ho=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return Ja._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(TE){return null}}}]),n}(so);ho.GITHUB_SIGN_IN_METHOD="github.com",ho.PROVIDER_ID="github.com";var fo=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return Qa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ia),po=function(e){k(n,e);var t=x(n);function n(e){return f(this,n),$r(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=fo.fromJSON(e);return $r(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return fo._create(r,n)}catch(i){return null}}}]),n}(oo),vo=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return Ja._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(TE){return null}}}]),n}(so);function mo(e,t){return yo.apply(this,arguments)}function yo(){return(yo=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(t,"POST","/v1/accounts:signUp",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}vo.TWITTER_SIGN_IN_METHOD="twitter.com",vo.PROVIDER_ID="twitter.com";var go=function(){function e(t){f(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=en(Xt().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Bi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=ko(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=en(Xt().mark((function t(n,r,i){var a;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ko(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ko(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function wo(){return wo=en(Xt().mark((function e(t){var n,r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ka(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new go({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,mo(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,go._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}var bo=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,s;return f(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(_(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Tt);function _o(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw bo._fromErrorAndOperation(e,n,t,r);throw n}))}function xo(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Io(e,t){return Eo.apply(this,arguments)}function Eo(){return Eo=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$t(t),e.next=3,Co(!0,r,n);case 3:return e.t0=wi,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=xo(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function So(e,t){return To.apply(this,arguments)}function To(){return To=en(Xt().mark((function e(t,n){var r,i,a=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ci,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",go._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Co(e,t,n){return No.apply(this,arguments)}function No(){return(No=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ri(n);case 2:i=xo(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",$r(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=en(Xt().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ci(t,_o(i,a,n,t),r);case 6:return $r((o=e.sent).idToken,i,"internal-error"),$r(s=Ti(o.idToken),i,"internal-error"),u=s.sub,$r(t.uid===u,i,"user-mismatch"),e.abrupt("return",go._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Gr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ao.apply(this,arguments)}function Po(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=en(Xt().mark((function e(t,n){var r,i,a,o,s=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,_o(t,i,n);case 4:return a=e.sent,e.next=7,go._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}function Do(e,t){return Oo.apply(this,arguments)}function Oo(){return(Oo=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Po(ka(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return(Mo=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$t(t),e.next=3,Co(!1,r,n.providerId);case 3:return e.abrupt("return",So(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return(Uo=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jo($t(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){return Bo.apply(this,arguments)}function Bo(){return(Bo=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fi(t,"POST","/v1/accounts:signInWithCustomToken",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(){return(qo=en(Xt().mark((function e(t,n){var r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ka(t),e.next=3,Vo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,go._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zo=function(){function e(t,n){f(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Wo._fromServerResponse(e,t):"totpInfo"in t?Ho._fromServerResponse(e,t):Gr(e,"internal-error")}}]),e}(),Wo=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(zo),Ho=function(e){k(n,e);var t=x(n);function n(e){return f(this,n),t.call(this,"totp",e)}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(zo);function Go(e,t,n){var r;$r((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),$r("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($r(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&($r(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ko(){return Ko=en(Xt().mark((function e(t,n,r){var i,a,o,s;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ka(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,va(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&Go(a,s,r),e.next=9,Ma(a,s);case 9:e.next=14;break;case 11:return r&&Go(a,o,r),e.next=14,Ma(a,o).catch(function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,va(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&Go(a,n,r),e.next=8,Ma(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Qo(){return(Qo=en(Xt().mark((function e(t,n,r){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea($t(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(){return(Yo=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na($t(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(e,t){return $o.apply(this,arguments)}function $o(){return($o=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$t(t),e.next=3,Ea(r,{oobCode:n});case 3:i=e.sent,$r(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return $r(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:$r(i.mfaInfo,r,"internal-error");case 13:$r(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=zo._fromServerResponse(ka(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(){return(Xo=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo($t(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t,n){return es.apply(this,arguments)}function es(){return es=en(Xt().mark((function e(t,n,r){var i,a,o,s,u,c,l;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ka(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,va(a,o,"signUpPassword");case 5:u=e.sent,s=mo(a,u),e.next=10;break;case 9:s=mo(a,o).catch(function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,va(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",mo(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,go._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(){return ts=en(Xt().mark((function e(t,n,r){var i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){$r(t.handleCodeInApp,a,"argument-error"),t&&Go(a,e,t)},a=ka(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,va(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,r),e.next=10,Ua(a,u);case 10:e.next=15;break;case 12:return s(o,r),e.next=15,Ua(a,o).catch(function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,va(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,r),e.next=8,Ua(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(){return(ns=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$t(t),$r((a=ao.credentialWithLink(n,r||ei()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Do(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return(is=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:createAuthUri",ui(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function as(){return(as=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ti()?ei():"http://localhost",i={identifier:n,continueUri:r},e.next=4,rs($t(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(){return(os=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$t(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Go(r.auth,a,n),e.next=8,Oa(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(){return(ss=en(Xt().mark((function e(t,n,r){var i,a,o,s;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$t(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Go(i.auth,o,r),e.next=8,Ba(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(e,t){return cs.apply(this,arguments)}function cs(){return(cs=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ci(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(){return(ls=en(Xt().mark((function e(t,n){var r,i,a,o,s,u,c;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=$t(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ci(a,us(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(e,t,n){return ds.apply(this,arguments)}function ds(){return(ds=en(Xt().mark((function e(t,n,r){var i,a,o,s;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ci(t,Ta(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fs=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ps=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(fs),vs=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(fs),ms=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}(ps),ys=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"google.com",r)}return y(n)}(fs),gs=function(e){k(n,e);var t=x(n);function n(e,r,i){return f(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}(ps);function ks(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Ti(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new fs(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new vs(a,i);case"github.com":return new ms(a,i);case"google.com":return new ys(a,i);case"twitter.com":return new gs(a,i,e.screenName||null);case"custom":case"anonymous":return new fs(a,null);default:return new fs(a,r,i)}}(n)}var ws=function(){function e(t,n,r){f(this,e),this.type=t,this.credential=n,this.auth=r}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:rt({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),bs=function(){function e(t,n,r){f(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ka(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return zo._fromServerResponse(r,e)}));$r(i.mfaPendingCredential,r,"internal-error");var o=ws._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=en(Xt().mark((function e(t){var a,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,go._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return $r(n.user,r,"internal-error"),e.abrupt("return",go._forOperation(n.user,n.operationType,s));case 17:Gr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function _s(e,t){return ci(e,"POST","/v2/accounts/mfaEnrollment:start",ui(e,t))}function xs(e,t){return ci(e,"POST","/v2/accounts/mfaEnrollment:finalize",ui(e,t))}var Is=function(){function e(t){var n=this;f(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return zo._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ws,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=en(Xt().mark((function e(t,n){var r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ci(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=en(Xt().mark((function e(t){var n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Ci(this.user,ci(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",ui(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Es=new WeakMap;var Ss="__sak",Ts=function(){function e(t,n){f(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ss,"1"),this.storage.removeItem(Ss),Promise.resolve(!0)):Promise.resolve(!1)}catch(TE){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Cs=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=kt();return Ji(e)||na(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ra(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);It()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=en(Xt().mark((function e(t,r){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(w(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=en(Xt().mark((function e(t){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(w(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(w(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ts);Cs.type="LOCAL";var Ns=Cs,js=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ts);js.type="SESSION";var As=js;function Ps(e){return Promise.all(e.map(function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Rs=function(){function e(t){f(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=en(Xt().mark((function e(t){var n,r,i,a,o,s,u,c;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ps(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ds(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Rs.receivers=[];var Os=function(){function e(t){f(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=en(Xt().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ds("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ls(){return window}function Ms(e){Ls().location.href=e}function Fs(){return"undefined"!==typeof Ls().WorkerGlobalScope&&"function"===typeof Ls().importScripts}function Us(){return Vs.apply(this,arguments)}function Vs(){return(Vs=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Bs(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var qs="firebaseLocalStorageDb",zs=1,Ws="firebaseLocalStorage",Hs="fbase_key",Gs=function(){function e(t){f(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ks(e,t){return e.transaction([Ws],t?"readwrite":"readonly").objectStore(Ws)}function Qs(){var e=indexedDB.deleteDatabase(qs);return new Gs(e).toPromise()}function Ys(){var e=indexedDB.open(qs,zs);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ws,{keyPath:Hs})}catch(r){n(r)}})),e.addEventListener("success",en(Xt().mark((function n(){var r;return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ws)){n.next=12;break}return r.close(),n.next=5,Qs();case 5:return n.t0=t,n.next=8,Ys();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Js(e,t,n){return $s.apply(this,arguments)}function $s(){return $s=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ks(t,!0).put((rt(i={},Hs,n),rt(i,"value",r),i)),e.abrupt("return",new Gs(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Xs(e,t){return Zs.apply(this,arguments)}function Zs(){return Zs=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ks(t,!1).get(n),e.next=3,new Gs(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function eu(e,t){var n=Ks(e,!0).delete(t);return new Gs(n).toPromise()}var tu=function(){function e(){f(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ys();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=en(Xt().mark((function e(){var t=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Rs._getInstance(Fs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=en(Xt().mark((function e(n,r){var i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=en(Xt().mark((function e(){var t,n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Os(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Bs()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ys();case 5:return t=e.sent,e.next=8,Js(t,Ss,"1");case 8:return e.next=10,eu(t,Ss);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=en(Xt().mark((function e(t,n){var r=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Js(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Xs(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=en(Xt().mark((function e(t){var n=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return eu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ks(e,!1).getAll();return new Gs(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(d){i.e(d)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();tu.type="LOCAL";var nu=tu;function ru(e,t){return ci(e,"POST","/v2/accounts/mfaSignIn:start",ui(e,t))}function iu(e,t){return ci(e,"POST","/v2/accounts/mfaSignIn:finalize",ui(e,t))}var au=1e12,ou=function(){function e(t){f(this,e),this.auth=t,this.counter=au,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new su(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||au;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||au;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||au,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),su=function(){function e(t,n,r){var i=this;f(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;$r(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var uu=fa("rcb"),cu=new ri(3e4,6e4),lu=function(){function e(){var t;f(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ls().grecaptcha)||void 0===t?void 0:t.render)}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return $r(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ca(Ls().grecaptcha)?Promise.resolve(Ls().grecaptcha):new Promise((function(r,i){var a=Ls().setTimeout((function(){i(Kr(e,"network-request-failed"))}),cu.get());Ls()[uu]=function(){Ls().clearTimeout(a),delete Ls()[uu];var o=Ls().grecaptcha;if(o&&ca(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Kr(e,"internal-error"))},da("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Ut({onload:uu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Kr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ls().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var hu=function(){function e(){f(this,e)}return y(e,[{key:"load",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ou(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),du="recaptcha",fu={theme:"light",type:"image"},pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},fu),r=arguments.length>2?arguments[2]:void 0;f(this,e),this.parameters=n,this.type=du,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ka(r),this.isInvisible="invisible"===this.parameters.size,$r("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;$r(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hu:new lu,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){$r(!this.parameters.sitekey,this.auth,"argument-error"),$r(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$r("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ls()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){$r(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=en(Xt().mark((function e(){var t,n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r(ti()&&!Fs(),this.auth,"internal-error"),e.next=3,vu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,aa(this.auth);case 8:$r(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return $r(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function vu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var mu=function(){function e(t,n){f(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=ro._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function yu(){return(yu=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ka(t),e.next=3,bu(i,n,$t(r));case 3:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Do(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(e,t,n){return ku.apply(this,arguments)}function ku(){return(ku=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$t(t),e.next=3,Co(!1,i,"phone");case 3:return e.next=5,bu(i.auth,n,$t(r));case 5:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Lo(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(){return(wu=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$t(t),e.next=3,bu(i.auth,n,$t(r));case 3:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Fo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bu(e,t,n){return _u.apply(this,arguments)}function _u(){return _u=en(Xt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,$r("string"===typeof a,t,"argument-error"),$r(r.type===du,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return $r("enroll"===s.type,t,"internal-error"),e.next=13,_s(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return $r("signin"===s.type,t,"internal-error"),$r(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,ru(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,$a(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),_u.apply(this,arguments)}function xu(){return(xu=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,So($t(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Iu=function(){function e(t){f(this,e),this.providerId=e.PROVIDER_ID,this.auth=ka(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return bu(this.auth,e,$t(t))}}],[{key:"credential",value:function(e,t){return ro._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ro._fromTokenResponse(n,r):null}}]),e}();function Eu(e,t){return t?zi(t):($r(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Iu.PROVIDER_ID="phone",Iu.PHONE_SIGN_IN_METHOD="phone";var Su=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return Qa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Qa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Qa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ia);function Tu(e){return Po(e.auth,new Su(e),e.bypassAuthState)}function Cu(e){var t=e.auth,n=e.user;return $r(n,t,"internal-error"),jo(n,new Su(e),e.bypassAuthState)}function Nu(e){return ju.apply(this,arguments)}function ju(){return(ju=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,$r(r=t.user,n,"internal-error"),e.abrupt("return",So(r,new Su(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Au=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=en(Xt().mark((function t(n,r){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=en(Xt().mark((function e(t){var n,r,i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tu;case"linkViaPopup":case"linkViaRedirect":return Nu;case"reauthViaPopup":case"reauthViaRedirect":return Cu;default:Gr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Pu=new ri(2e3,1e4);function Ru(e,t,n){return Du.apply(this,arguments)}function Du(){return(Du=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ka(t),Yr(t,n,oo),a=Eu(i,r),o=new Fu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ou(){return(Ou=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yr((i=$t(t)).auth,n,oo),a=Eu(i.auth,r),o=new Fu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t,n){return Mu.apply(this,arguments)}function Mu(){return(Mu=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yr((i=$t(t)).auth,n,oo),a=Eu(i.auth,r),o=new Fu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fu=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=_(s),s}return y(n,[{key:"executeNotNull",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return $r(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=en(Xt().mark((function e(){var t,n=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zr(1===this.filter.length,"Popup operations only handle one event"),t=Ds(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Kr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Kr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Kr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Pu.get())}()}}]),n}(Au);Fu.currentPopupAction=null;var Uu="pendingRedirect",Vu=new Map,Bu=function(e){k(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=en(Xt().mark((function e(){var t,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Vu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,qu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Dr(w(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Vu.set(this.auth._key(),t);case 21:return this.bypassAuthState||Vu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=en(Xt().mark((function e(t){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Dr(w(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Dr(w(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Au);function qu(e,t){return zu.apply(this,arguments)}function zu(){return(zu=en(Xt().mark((function e(t,n){var r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qu(n),i=Ku(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t){return Hu.apply(this,arguments)}function Hu(){return(Hu=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t)._set(Qu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gu(e,t){Vu.set(e._key(),t)}function Ku(e){return zi(e._redirectPersistence)}function Qu(e){return Gi(Uu,e.config.apiKey,e.name)}function Yu(e,t,n){return function(e,t,n){return Ju.apply(this,arguments)}(e,t,n)}function Ju(){return(Ju=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ka(t),Yr(t,n,oo),e.next=4,i._initializationPromise;case 4:return a=Eu(i,r),e.next=7,Wu(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(e,t,n){return function(e,t,n){return Xu.apply(this,arguments)}(e,t,n)}function Xu(){return(Xu=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yr((i=$t(t)).auth,n,oo),e.next=4,i.auth._initializationPromise;case 4:return a=Eu(i.auth,r),e.next=7,Wu(a,i.auth);case 7:return e.next=9,ac(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(e,t,n){return function(e,t,n){return ec.apply(this,arguments)}(e,t,n)}function ec(){return(ec=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yr((i=$t(t)).auth,n,oo),e.next=4,i.auth._initializationPromise;case 4:return a=Eu(i.auth,r),e.next=7,Co(!1,i,n.providerId);case 7:return e.next=9,Wu(a,i.auth);case 9:return e.next=11,ac(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return(nc=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka(t)._initializationPromise;case 2:return e.abrupt("return",rc(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rc(e,t){return ic.apply(this,arguments)}function ic(){return ic=en(Xt().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=ka(t),a=Eu(i,n),o=new Bu(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function ac(e){return oc.apply(this,arguments)}function oc(){return(oc=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ds("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sc=function(){function e(t){f(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!cc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Kr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uc(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(uc(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function uc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function cc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function lc(e){return hc.apply(this,arguments)}function hc(){return hc=en(Xt().mark((function e(t){var n,r=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",ci(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),hc.apply(this,arguments)}var dc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fc=/^https?/;function pc(){return(pc=en(Xt().mark((function e(t){var n,r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,lc(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!vc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Gr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function vc(e){var t=ei(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!fc.test(r))return!1;if(dc.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var mc=new ri(3e4,6e4);function yc(){var e=Ls().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=d(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var gc=null;function kc(e){return gc=gc||function(e){return new Promise((function(t,n){var r,i,a;function o(){yc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){yc(),n(Kr(e,"network-request-failed"))},timeout:mc.get()})}if(null===(i=null===(r=Ls().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ls().gapi)||void 0===a?void 0:a.load)){var s=fa("iframefcb");return Ls()[s]=function(){gapi.load?o():n(Kr(e,"network-request-failed"))},da("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw gc=null,e}))}(e),gc}var wc=new ri(5e3,15e3),bc="__/auth/iframe",_c="emulator/auth/iframe",xc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ec(e){var t=e.config;$r(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ii(t,_c):"https://".concat(e.config.authDomain,"/").concat(bc),r={apiKey:t.apiKey,appName:e.name,v:Xn},i=Ic.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ut(r).slice(1))}function Sc(e){return Tc.apply(this,arguments)}function Tc(){return Tc=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(t);case 2:return n=e.sent,$r(r=Ls().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ec(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xc,dontclear:!0},(function(e){return new Promise(function(){var n=en(Xt().mark((function n(r,i){var a,o,s;return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Ls().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Kr(t,"network-request-failed"),o=Ls().setTimeout((function(){i(a)}),wc.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}var Cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nc=500,jc=600,Ac="_blank",Pc="http://localhost",Rc=function(){function e(t){f(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Dc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nc,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jc,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Cc),{width:r.toString(),height:i.toString(),top:a,left:o}),c=kt().toLowerCase();n&&(s=$i(c)?Ac:n),Yi(c)&&(t=t||Pc,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return na(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Rc(null);var d=window.open(t||"",s,h);$r(d,e,"popup-blocked");try{d.focus()}catch(f){}return new Rc(d)}var Oc="__/auth/handler",Lc="emulator/auth/handler",Mc=encodeURIComponent("fac");function Fc(e,t,n,r,i,a){return Uc.apply(this,arguments)}function Uc(){return(Uc=en(Xt().mark((function e(t,n,r,i,a,o){var s,u,c,h,d,f,p,v,m,y,g,k,w;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($r(t.config.authDomain,t,"auth-domain-config-required"),$r(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Xn,eventId:a},n instanceof oo)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Ot(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)h=l(c[u],2),d=h[0],f=h[1],s[d]=f;for(n instanceof so&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,w=k?"#".concat(Mc,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(Vc(t),"?").concat(Ut(v).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vc(e){var t=e.config;return t.emulator?ii(t,Lc):"https://".concat(t.authDomain,"/").concat(Oc)}var Bc="webStorageSupport",qc=function(){function e(){f(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=As,this._completeRedirectFn=rc,this._overrideRedirectResult=Gu}return y(e,[{key:"_openPopup",value:function(){var e=en(Xt().mark((function e(t,n,r,i){var a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Fc(t,n,r,ei(),i);case 3:return o=e.sent,e.abrupt("return",Dc(t,o,Ds()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=en(Xt().mark((function e(t,n,r,i){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Fc(t,n,r,ei(),i);case 4:return Ms(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Zr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sc(t);case 2:return n=e.sent,r=new sc(t),n.register("authEvent",(function(e){return $r(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Bc,{type:Bc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Bc];void 0!==i&&t(!!i),Gr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return pc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ra()||Ji()||na()}}]),e}(),zc=qc,Wc=function(){function e(t){f(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Xr("unexpected MultiFactorSessionType")}}}]),e}(),Hc=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return ci(e,"POST","/v2/accounts/mfaEnrollment:finalize",ui(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return ci(e,"POST","/v2/accounts/mfaSignIn:finalize",ui(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Wc),Gc=function(){function e(){f(this,e)}return y(e,null,[{key:"assertion",value:function(e){return Hc._fromCredential(e)}}]),e}();Gc.FACTOR_ID="phone";var Kc=function(){function e(){f(this,e)}return y(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Qc._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Qc._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},ci(i,"POST","/v2/accounts/mfaEnrollment:start",ui(i,a));case 4:return r=e.sent,e.abrupt("return",Yc._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Kc.FACTOR_ID="totp";var Qc=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return y(n,[{key:"_finalizeEnroll",value:function(){var e=en(Xt().mark((function e(t,n,r){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",xs(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",iu(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Wc),Yc=function(){function e(t,n,r,i,a,o,s){f(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return y(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Jc(e)||Jc(t))&&(r=!0),r&&(Jc(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Jc(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Jc(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var $c="@firebase/auth",Xc="0.23.0",Zc=function(){function e(t){f(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){$r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var el;!function(e){var t;null===(t=vt())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function tl(){return window}el="Browser",Hn(new tn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;$r(s&&!s.includes(":"),"invalid-api-key",{appName:r.name}),$r(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:el,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ia(el)},l=new ga(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Hn(new tn("auth-internal",(function(e){return function(e){return new Zc(e)}(ka(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ir($c,Xc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(el)),ir($c,Xc,"esm2017");var nl=2e3;function rl(e,t,n){return il.apply(this,arguments)}function il(){return il=en(Xt().mark((function e(t,n,r){var i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=tl(),o=a.BuildInfo,Zr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,ll(n.sessionId);case 4:return s=e.sent,u={},na()?u.ibi=o.packageName:Zi()?u.apn=o.packageName:Gr(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Fc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),il.apply(this,arguments)}function al(){return(al=en(Xt().mark((function e(t){var n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tl(),r=n.BuildInfo,i={},na()?i.iosBundleId=r.packageName:Zi()?i.androidPackageName=r.packageName:Gr(t,"operation-not-supported-in-this-environment"),e.next=5,lc(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ol(e){var t=tl().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function sl(e,t,n){return ul.apply(this,arguments)}function ul(){return ul=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tl(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Kr(t,"redirect-cancelled-by-user"))}),nl))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Zi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),ul.apply(this,arguments)}function cl(e){var t,n,r,i,a,o,s,u,c,l,h=tl();$r("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$r("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$r("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$r("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$r("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ll(e){return hl.apply(this,arguments)}function hl(){return(hl=en(Xt().mark((function e(t){var n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=dl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dl(e){if(Zr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var fl=20,pl=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Dr(w(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(sc);function vl(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:wl(),postBody:null,tenantId:e.tenantId,error:Kr(e,"no-auth-event")}}function ml(e,t){return bl()._set(_l(e),t)}function yl(e){return gl.apply(this,arguments)}function gl(){return(gl=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bl()._get(_l(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,bl()._remove(_l(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kl(e,t){var n,r,i=function(e){var t=xl(e),n=t.link?decodeURIComponent(t.link):void 0,r=xl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return xl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=xl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Kr(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function wl(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<fl;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function bl(){return zi(Ns)}function _l(e){return Gi("authEvent",e.config.apiKey,e.name)}function xl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=S(e.split("?"));t[0];return Vt(t.slice(1).join("?"))}var Il=function(){function e(){f(this,e),this._redirectPersistence=As,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rc,this._overrideRedirectResult=Gu}return y(e,[{key:"_initialize",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new pl(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Gr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=en(Xt().mark((function e(t,n,r,i){var a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cl(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Vu.clear(),e.next=10,this._originValidation(t);case 10:return o=vl(t,r,i),e.next=13,ml(t,o);case 13:return e.next=15,rl(t,o,n);case 15:return s=e.sent,e.next=18,ol(s);case 18:return u=e.sent,e.abrupt("return",sl(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return al.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=tl(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(en(Xt().mark((function n(){return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yl(e);case 2:t.onEvent(Sl());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=en(Xt().mark((function n(r){var i,a;return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,yl(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=kl(i,r.url)),t.onEvent(a||Sl());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");tl().handleOpenURL=function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),El=Il;function Sl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Kr("no-auth-event")}}var Tl="@firebase/auth-compat",Cl="0.4.0",Nl=1e3;function jl(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Al(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return!("file:"!==jl()&&"ionic:"!==jl()&&"capacitor:"!==jl()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return It()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/Edge\/\d+/.test(e)}(e)}function Rl(){try{var e=self.localStorage,t=Ds();if(e)return e.setItem(t,"1"),e.removeItem(t),!Pl()||St()}catch(n){return Dl()&&St()}return!1}function Dl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ol(){return("http:"===jl()||"https:"===jl()||_t()||Al())&&!(xt()||bt())&&Rl()&&!Dl()}function Ll(){return Al()&&"undefined"!==typeof document}function Ml(){return Fl.apply(this,arguments)}function Fl(){return(Fl=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ll()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Nl);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ul={LOCAL:"local",NONE:"none",SESSION:"session"},Vl=$r,Bl="persistence";function ql(e,t){Vl(Object.values(Ul).includes(t),e,"invalid-persistence-type"),xt()?Vl(t!==Ul.SESSION,e,"unsupported-persistence-type"):bt()?Vl(t===Ul.NONE,e,"unsupported-persistence-type"):Dl()?Vl(t===Ul.NONE||t===Ul.LOCAL&&St(),e,"unsupported-persistence-type"):Vl(t===Ul.NONE||Rl(),e,"unsupported-persistence-type")}function zl(e){return Wl.apply(this,arguments)}function Wl(){return(Wl=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Hl(),r=Gi(Bl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Gl=$r,Kl=function(){function e(){f(this,e),this.browserResolver=zi(zc),this.cordovaResolver=zi(El),this.underlyingResolver=null,this._redirectPersistence=As,this._completeRedirectFn=rc,this._overrideRedirectResult=Gu}return y(e,[{key:"_initialize",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=en(Xt().mark((function e(t,n,r,i){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=en(Xt().mark((function e(t,n,r,i){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ll()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Gl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ml();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ql(e){return e.unwrap()}function Yl(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new eh(e,function(e,t){var n,r=$t(e),i=t;return $r(t.customData.operationType,r,"argument-error"),$r(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bs._fromError(r,i)}(e,t));else if(r){var i=Jl(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Jl(e){var t=(e instanceof Tt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Tt)&&"temporaryProof"in t&&"phoneNumber"in t)return Iu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Mr.PASSWORD)return null;switch(r){case Mr.GOOGLE:n=lo;break;case Mr.FACEBOOK:n=co;break;case Mr.GITHUB:n=ho;break;case Mr.TWITTER:n=vo;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?fo._create(r,s):Ja._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new uo(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Tt?n.credentialFromError(e):n.credentialFromResult(e)}function $l(e,t){return t.catch((function(t){throw t instanceof Tt&&Yl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Jl(t)),additionalUserInfo:ks(e),user:th.getOrCreate(r)}}))}function Xl(e,t){return Zl.apply(this,arguments)}function Zl(){return(Zl=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return $l(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eh=function(){function e(t,n){f(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return $l(Ql(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),th=function(){function e(t){f(this,e),this._delegate=t,this.multiFactor=function(e){var t=$t(e);return Es.has(t)||Es.set(t,Is._fromUser(t)),Es.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$l(this.auth,Lo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xl(this.auth,gu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$l(this.auth,Lu(this._delegate,t,Kl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zl(ka(this.auth));case 2:return e.abrupt("return",Zu(this._delegate,t,Kl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$l(this.auth,Fo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Xl(this.auth,function(e,t,n){return wu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return $l(this.auth,function(e,t,n){return Ou.apply(this,arguments)}(this._delegate,e,Kl))}},{key:"reauthenticateWithRedirect",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zl(ka(this.auth));case 2:return e.abrupt("return",$u(this._delegate,t,Kl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return os.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Io(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return hs($t(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return hs($t(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return xu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ls.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ss.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();th.USER_MAP=new WeakMap;var nh=$r,rh=function(){function e(t,n){if(f(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;nh(r,"invalid-api-key",{appName:t.name}),nh(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Kl:void 0;this._delegate=n.initialize({options:{persistence:ah(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Vr),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?th.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ba(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Yo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Jo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Qo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$l(this._delegate,Zo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return as.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=io.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nh(Ol(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,tc(this._delegate,Kl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",$l(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ka(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ih(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ih(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ts.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ko.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ql(this._delegate,t),e.t0=t,e.next=e.t0===Ul.SESSION?4:e.t0===Ul.LOCAL?6:e.t0===Ul.NONE?11:13;break;case 4:return n=As,e.abrupt("break",14);case 6:return e.next=8,zi(nu)._isAvailable();case 8:return r=e.sent,n=r?nu:Ns,e.abrupt("break",14);case 11:return n=Hi,e.abrupt("break",14);case 13:return e.abrupt("return",Gr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return $l(this._delegate,function(e){return wo.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return $l(this._delegate,Do(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return $l(this._delegate,function(e,t){return qo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return $l(this._delegate,function(e,t,n){return Do($t(e),ao.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return $l(this._delegate,function(e,t,n){return ns.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Xl(this._delegate,function(e,t,n){return yu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nh(Ol(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",$l(this._delegate,Ru(this._delegate,t,Kl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nh(Ol(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,zl(this._delegate);case 3:return e.abrupt("return",Yu(this._delegate,t,Kl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Xo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function ih(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&th.getOrCreate(e))},error:t,complete:n}}function ah(e,t){var n=function(e,t){var n=Hl();if(!n)return[];var r=Gi(Bl,e,t);switch(n.getItem(r)){case Ul.NONE:return[Hi];case Ul.LOCAL:return[nu,As];case Ul.SESSION:return[As];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(nu)||n.push(nu),"undefined"!==typeof window)for(var r=0,i=[Ns,As];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Hi)||n.push(Hi),n}rh.Persistence=Ul;var oh=function(){function e(){f(this,e),this.providerId="phone",this._delegate=new Iu(Ql(Rr.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Iu.credential(e,t)}}]),e}();oh.PHONE_SIGN_IN_METHOD=Iu.PHONE_SIGN_IN_METHOD,oh.PROVIDER_ID=Iu.PROVIDER_ID;var sh,uh=$r,ch=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rr.app();f(this,e),uh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new pu(t,n,i.auth()),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),lh="auth-compat";(sh=Rr).INTERNAL.registerComponent(new tn(lh,(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new rh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fr.EMAIL_SIGNIN,PASSWORD_RESET:Fr.PASSWORD_RESET,RECOVER_EMAIL:Fr.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Fr.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Fr.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Fr.VERIFY_EMAIL}},EmailAuthProvider:ao,FacebookAuthProvider:co,GithubAuthProvider:ho,GoogleAuthProvider:lo,OAuthProvider:uo,SAMLAuthProvider:po,PhoneAuthProvider:oh,PhoneMultiFactorGenerator:Gc,RecaptchaVerifier:ch,TwitterAuthProvider:vo,Auth:rh,AuthCredential:Ia,Error:Tt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),sh.registerVersion(Tl,Cl);var hh,dh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},fh={},ph=ph||{},vh=dh||self;function mh(){}function yh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var kh="closure_uid_"+(1e9*Math.random()>>>0),wh=0;function bh(e,t,n){return e.call.apply(e.bind,arguments)}function _h(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function xh(e,t,n){return(xh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bh:_h).apply(null,arguments)}function Ih(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Eh(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Sh(){this.s=this.s,this.o=this.o}Sh.prototype.s=!1,Sh.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,kh)&&e[kh]||(e[kh]=++wh))},Sh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Th=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ch(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(yh(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function jh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}jh.prototype.h=function(){this.defaultPrevented=!0};var Ah=function(){if(!vh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{vh.addEventListener("test",mh,t),vh.removeEventListener("test",mh,t)}catch(n){}return e}();function Ph(e){return/^[\s\xa0]*$/.test(e)}var Rh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Dh(e,t){return e<t?-1:e>t?1:0}function Oh(){var e=vh.navigator;return e&&(e=e.userAgent)?e:""}function Lh(e){return-1!=Oh().indexOf(e)}function Mh(e){return Mh[" "](e),e}Mh[" "]=mh;var Fh,Uh=Lh("Opera"),Vh=Lh("Trident")||Lh("MSIE"),Bh=Lh("Edge"),qh=Bh||Vh,zh=Lh("Gecko")&&!(-1!=Oh().toLowerCase().indexOf("webkit")&&!Lh("Edge"))&&!(Lh("Trident")||Lh("MSIE"))&&!Lh("Edge"),Wh=-1!=Oh().toLowerCase().indexOf("webkit")&&!Lh("Edge");function Hh(){var e=vh.document;return e?e.documentMode:void 0}e:{var Gh="",Kh=function(){var e=Oh();return zh?/rv:([^\);]+)(\)|;)/.exec(e):Bh?/Edge\/([\d\.]+)/.exec(e):Vh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Wh?/WebKit\/(\S+)/.exec(e):Uh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Kh&&(Gh=Kh?Kh[1]:""),Vh){var Qh=Hh();if(null!=Qh&&Qh>parseFloat(Gh)){Fh=String(Qh);break e}}Fh=Gh}var Yh,Jh={};function $h(){return function(e){var t=Jh;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Rh(String(Fh)).split("."),n=Rh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Dh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Dh(0==a[2].length,0==o[2].length)||Dh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(vh.document&&Vh){var Xh=Hh();Yh=Xh||(parseInt(Fh,10)||void 0)}else Yh=void 0;var Zh=Yh;function ed(e,t){if(jh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(zh){e:{try{Mh(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:td[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ed.X.h.call(this)}}Eh(ed,jh);var td={2:"touch",3:"pen",4:"mouse"};ed.prototype.h=function(){ed.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var nd="closure_listenable_"+(1e6*Math.random()|0),rd=0;function id(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++rd,this.ba=this.ea=!1}function ad(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function od(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function sd(e){var t={};for(var n in e)t[n]=e[n];return t}var ud="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ud.length;a++)n=ud[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ld(e){this.src=e,this.g={},this.h=0}function hd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Th(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ad(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function dd(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}ld.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=dd(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new id(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var fd="closure_lm_"+(1e6*Math.random()|0),pd={};function vd(e,t,n,r,i){if(r&&r.once)return yd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)vd(e,t[a],n,r,i);return null}return n=Id(n),e&&e[nd]?e.N(t,n,gh(r)?!!r.capture:!!r,i):md(e,t,n,!1,r,i)}function md(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=gh(i)?!!i.capture:!!i,s=_d(e);if(s||(e[fd]=s=new ld(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=bd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ah||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(wd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)yd(e,t[a],n,r,i);return null}return n=Id(n),e&&e[nd]?e.O(t,n,gh(r)?!!r.capture:!!r,i):md(e,t,n,!0,r,i)}function gd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)gd(e,t[a],n,r,i);else r=gh(r)?!!r.capture:!!r,n=Id(n),e&&e[nd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=dd(a=e.g[t],n,r,i))&&(ad(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=_d(e))&&(t=e.g[t.toString()],e=-1,t&&(e=dd(t,n,r,i)),(n=-1<e?t[e]:null)&&kd(n))}function kd(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[nd])hd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(wd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_d(t))?(hd(n,e),0==n.h&&(n.src=null,t[fd]=null)):ad(e)}}}function wd(e){return e in pd?pd[e]:pd[e]="on"+e}function bd(e,t){if(e.ba)e=!0;else{t=new ed(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&kd(e),e=n.call(r,t)}return e}function _d(e){return(e=e[fd])instanceof ld?e:null}var xd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Id(e){return"function"===typeof e?e:(e[xd]||(e[xd]=function(t){return e.handleEvent(t)}),e[xd])}function Ed(){Sh.call(this),this.i=new ld(this),this.P=this,this.I=null}function Sd(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new jh(t,e);else if(t instanceof jh)t.target=t.target||e;else{var i=t;cd(t=new jh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Td(o,r,!0,t)&&i}if(i=Td(o=t.g=e,r,!0,t)&&i,i=Td(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Td(o=t.g=n[a],r,!1,t)&&i}function Td(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&hd(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Eh(Ed,Sh),Ed.prototype[nd]=!0,Ed.prototype.removeEventListener=function(e,t,n,r){gd(this,e,t,n,r)},Ed.prototype.M=function(){if(Ed.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ad(n[r]);delete t.g[e],t.h--}}this.I=null},Ed.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ed.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Cd=vh.JSON.stringify;function Nd(){var e=Md,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var jd,Ad=function(){function e(){f(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=Pd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Pd=new(function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Rd}),(function(e){return e.reset()})),Rd=function(){function e(){f(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Dd(e){vh.setTimeout((function(){throw e}),0)}function Od(e,t){jd||function(){var e=vh.Promise.resolve(void 0);jd=function(){e.then(Fd)}}(),Ld||(jd(),Ld=!0),Md.add(e,t)}var Ld=!1,Md=new Ad;function Fd(){for(var e;e=Nd();){try{e.h.call(e.g)}catch(n){Dd(n)}var t=Pd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ld=!1}function Ud(e,t){Ed.call(this),this.h=e||1,this.g=t||vh,this.j=xh(this.lb,this),this.l=Date.now()}function Vd(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Bd(e,t,n){if("function"===typeof e)n&&(e=xh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=xh(e.handleEvent,e)}return 2147483647<Number(t)?-1:vh.setTimeout(e,t||0)}function qd(e){e.g=Bd((function(){e.g=null,e.i&&(e.i=!1,qd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Eh(Ud,Ed),(hh=Ud.prototype).ca=!1,hh.R=null,hh.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Sd(this,"tick"),this.ca&&(Vd(this),this.start()))}},hh.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},hh.M=function(){Ud.X.M.call(this),Vd(this),delete this.g};var zd=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:qd(this)}},{key:"M",value:function(){Dr(w(n.prototype),"M",this).call(this),this.g&&(vh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Sh);function Wd(e){Sh.call(this),this.h=e,this.g={}}Eh(Wd,Sh);var Hd=[];function Gd(e,t,n,r){Array.isArray(n)||(n&&(Hd[0]=n.toString()),n=Hd);for(var i=0;i<n.length;i++){var a=vd(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Kd(e){od(e.g,(function(e,t){this.g.hasOwnProperty(t)&&kd(e)}),e),e.g={}}function Qd(){this.g=!0}function Yd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Cd(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Wd.prototype.M=function(){Wd.X.M.call(this),Kd(this)},Wd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qd.prototype.Aa=function(){this.g=!1},Qd.prototype.info=function(){};var Jd={},$d=null;function Xd(){return $d=$d||new Ed}function Zd(e){jh.call(this,Jd.Pa,e)}function ef(e){var t=Xd();Sd(t,new Zd(t))}function tf(e,t){jh.call(this,Jd.STAT_EVENT,e),this.stat=t}function nf(e){var t=Xd();Sd(t,new tf(t,e))}function rf(e,t){jh.call(this,Jd.Qa,e),this.size=t}function af(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return vh.setTimeout((function(){e()}),t)}Jd.Pa="serverreachability",Eh(Zd,jh),Jd.STAT_EVENT="statevent",Eh(tf,jh),Jd.Qa="timingevent",Eh(rf,jh);var of={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},sf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function uf(){}function cf(e){return e.h||(e.h=e.i())}function lf(){}uf.prototype.h=null;var hf,df={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ff(){jh.call(this,"d")}function pf(){jh.call(this,"c")}function vf(){}function mf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Wd(this),this.O=gf,e=qh?125:void 0,this.T=new Ud(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new yf}function yf(){this.i=null,this.g="",this.h=!1}Eh(ff,jh),Eh(pf,jh),Eh(vf,uf),vf.prototype.g=function(){return new XMLHttpRequest},vf.prototype.i=function(){return{}},hf=new vf;var gf=45e3,kf={},wf={};function bf(e,t,n){e.K=1,e.v=Vf(Of(t)),e.s=n,e.P=!0,_f(e,null)}function _f(e,t){e.F=Date.now(),Sf(e),e.A=Of(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Zf(n.i,"t",r),e.C=0,n=e.l.H,e.h=new yf,e.g=ev(e.l,n?t:null,!e.s),0<e.N&&(e.L=new zd(xh(e.La,e,e.g),e.N)),Gd(e.S,e.g,"readystatechange",e.ib),t=e.H?sd(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),ef(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function xf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function If(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ef(e,n))==wf){4==t&&(e.o=4,nf(14),i=!1),Yd(e.j,e.m,null,"[Incomplete Response]");break}if(r==kf){e.o=4,nf(15),Yd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Yd(e.j,e.m,r,null),Af(e,r)}xf(e)&&r!=wf&&r!=kf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,nf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gp(t),t.K=!0,nf(11))):(Yd(e.j,e.m,n,"[Invalid Chunked Response]"),jf(e),Nf(e))}function Ef(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?wf:(n=Number(t.substring(n,r)),isNaN(n)?kf:(r+=1)+n>t.length?wf:(t=t.substr(r,n),e.C=r+n,t))}function Sf(e){e.V=Date.now()+e.O,Tf(e,e.O)}function Tf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=af(xh(e.gb,e),t)}function Cf(e){e.B&&(vh.clearTimeout(e.B),e.B=null)}function Nf(e){0==e.l.G||e.I||Yp(e.l,e)}function jf(e){Cf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Vd(e.T),Kd(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Af(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||sp(n.h,e)))if(!e.J&&sp(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qp(n),Fp(n)}Hp(n),nf(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=af(xh(n.cb,n),6e3));if(1>=op(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else $p(n,11)}else if((e.J||n.g==e)&&Qp(n),!Ph(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(up(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.za=d,Uf(r.F,r.D,d))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var f=e;if((r=n).sa=Zp(r,r.H?r.ka:null,r.V),f.J){cp(r.h,f);var p=f,v=r.J;v&&p.setTimeout(v),p.B&&(Cf(p),Sf(p)),r.g=f}else Wp(r);0<n.i.length&&Vp(n)}else"stop"!=a[0]&&"close"!=a[0]||$p(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?$p(n,7):Mp(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}ef()}catch(a){}}function Pf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(yh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(yh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(yh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(hh=mf.prototype).setTimeout=function(e){this.O=e},hh.ib=function(e){e=e.target;var t=this.L;t&&3==Ap(e)?t.l():this.La(e)},hh.La=function(e){try{if(e==this.g)e:{var t=Ap(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||qh||this.g&&(this.h.h||this.g.fa()||Pp(this.g)))){this.I||4!=t||7==n||ef(),Cf(this);var r=this.g.aa();this.Y=r;t:if(xf(this)){var i=Pp(this.g);e="";var a=i.length,o=4==Ap(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){jf(this),Nf(this);var s="";break t}this.h.i=new vh.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ph(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,nf(12),jf(this),Nf(this);break e}Yd(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Af(this,r)}this.P?(If(this,t,s),qh&&this.i&&3==t&&(Gd(this.S,this.T,"tick",this.hb),this.T.start())):(Yd(this.j,this.m,s,null),Af(this,s)),4==t&&jf(this),this.i&&!this.I&&(4==t?Yp(this.l,this):(this.i=!1,Sf(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,nf(12)):(this.o=0,nf(13)),jf(this),Nf(this)}}}catch(t){}},hh.hb=function(){if(this.g){var e=Ap(this.g),t=this.g.fa();this.C<t.length&&(Cf(this),If(this,e,t),this.i&&4!=e&&Sf(this))}},hh.cancel=function(){this.I=!0,jf(this)},hh.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ef(),nf(17)),jf(this),this.o=2,Nf(this)):Tf(this,this.V-e)};var Rf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Df(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Df){this.h=void 0!==t?t:e.h,Lf(this,e.j),this.s=e.s,this.g=e.g,Mf(this,e.m),this.l=e.l,t=e.i;var n=new Yf;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ff(this,n),this.o=e.o}else e&&(n=String(e).match(Rf))?(this.h=!!t,Lf(this,n[1]||"",!0),this.s=Bf(n[2]||""),this.g=Bf(n[3]||"",!0),Mf(this,n[4]),this.l=Bf(n[5]||"",!0),Ff(this,n[6]||"",!0),this.o=Bf(n[7]||"")):(this.h=!!t,this.i=new Yf(null,this.h))}function Of(e){return new Df(e)}function Lf(e,t,n){e.j=n?Bf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Mf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ff(e,t,n){t instanceof Yf?(e.i=t,function(e,t){t&&!e.j&&(Jf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($f(this,t),Zf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=qf(t,Kf)),e.i=new Yf(t,e.h))}function Uf(e,t,n){e.i.set(t,n)}function Vf(e){return Uf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Bf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,zf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Df.prototype.toString=function(){var e=[],t=this.j;t&&e.push(qf(t,Wf,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(qf(t,Wf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(qf(n,"/"==n.charAt(0)?Gf:Hf,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",qf(n,Qf)),e.join("")};var Wf=/[#\/\?@]/g,Hf=/[#\?:]/g,Gf=/[#\?]/g,Kf=/[#\?@]/g,Qf=/#/g;function Yf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Jf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $f(e,t){Jf(e),t=ep(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Xf(e,t){return Jf(e),t=ep(e,t),e.g.has(t)}function Zf(e,t,n){$f(e,t),0<n.length&&(e.i=null,e.g.set(ep(e,t),Ch(n)),e.h+=n.length)}function ep(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(hh=Yf.prototype).add=function(e,t){Jf(this),this.i=null,e=ep(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},hh.forEach=function(e,t){Jf(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},hh.oa=function(){Jf(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},hh.W=function(e){Jf(this);var t=[];if("string"===typeof e)Xf(this,e)&&(t=t.concat(this.g.get(ep(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},hh.set=function(e,t){return Jf(this),this.i=null,Xf(this,e=ep(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},hh.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},hh.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var tp=y((function e(t,n){f(this,e),this.h=t,this.g=n}));function np(e){this.l=e||ip,vh.PerformanceNavigationTiming?e=0<(e=vh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(vh.g&&vh.g.Ga&&vh.g.Ga()&&vh.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rp,ip=10;function ap(e){return!!e.h||!!e.g&&e.g.size>=e.j}function op(e){return e.h?1:e.g?e.g.size:0}function sp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function up(e,t){e.g?e.g.add(t):e.h=t}function cp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lp(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ch(e.i)}function hp(){}function dp(){this.g=new hp}function fp(e,t,n){var r=n||"";try{Pf(e,(function(e,n){var i=e;gh(e)&&(i=Cd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function pp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function vp(e){this.l=e.ac||null,this.j=e.jb||!1}function mp(e,t){Ed.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=yp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}np.prototype.cancel=function(){if(this.i=lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},hp.prototype.stringify=function(e){return vh.JSON.stringify(e,void 0)},hp.prototype.parse=function(e){return vh.JSON.parse(e,void 0)},Eh(vp,uf),vp.prototype.g=function(){return new mp(this.l,this.j)},vp.prototype.i=(rp={},function(){return rp}),Eh(mp,Ed);var yp=0;function gp(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function kp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,wp(e)}function wp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(hh=mp.prototype).open=function(e,t){if(this.readyState!=yp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,wp(this)},hh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||vh).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},hh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kp(this)),this.readyState=yp},hh.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,wp(this)),this.g&&(this.readyState=3,wp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof vh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gp(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},hh.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?kp(this):wp(this),3==this.readyState&&gp(this)}},hh.Va=function(e){this.g&&(this.response=this.responseText=e,kp(this))},hh.Ua=function(e){this.g&&(this.response=e,kp(this))},hh.ga=function(){this.g&&kp(this)},hh.setRequestHeader=function(e,t){this.v.append(e,t)},hh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},hh.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(mp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var bp=vh.JSON.parse;function _p(e){Ed.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xp,this.K=this.L=!1}Eh(_p,Ed);var xp="",Ip=/^https?$/i,Ep=["POST","PUT"];function Sp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Tp(e),Np(e)}function Tp(e){e.D||(e.D=!0,Sd(e,"complete"),Sd(e,"error"))}function Cp(e){if(e.h&&"undefined"!=typeof ph&&(!e.C[1]||4!=Ap(e)||2!=e.aa()))if(e.v&&4==Ap(e))Bd(e.Ha,0,e);else if(Sd(e,"readystatechange"),4==Ap(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Rf)[1]||null;if(!a&&vh.self&&vh.self.location){var o=vh.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ip.test(a?a.toLowerCase():"")}t=i}if(t)Sd(e,"complete"),Sd(e,"success");else{e.m=6;try{var s=2<Ap(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.aa()+"]",Tp(e)}}finally{Np(e)}}}function Np(e,t){if(e.g){jp(e);var n=e.g,r=e.C[0]?mh:null;e.g=null,e.C=null,t||Sd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function jp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(vh.clearTimeout(e.A),e.A=null)}function Ap(e){return e.g?e.g.readyState:0}function Pp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case xp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(yv){return null}}function Rp(e){var t="";return od(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Dp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rp(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Uf(e,t,n))}function Op(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Lp(e){this.Ca=0,this.i=[],this.j=new Qd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Op("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Op("baseRetryDelayMs",5e3,e),this.bb=Op("retryDelaySeedMs",1e4,e),this.$a=Op("forwardChannelMaxRetries",2,e),this.ta=Op("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new np(e&&e.concurrentRequestLimit),this.Fa=new dp,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Mp(e){if(Up(e),3==e.G){var t=e.U++,n=Of(e.F);Uf(n,"SID",e.I),Uf(n,"RID",t),Uf(n,"TYPE","terminate"),qp(e,n),(t=new mf(e,e.j,t,void 0)).K=2,t.v=Vf(Of(n)),n=!1,vh.navigator&&vh.navigator.sendBeacon&&(n=vh.navigator.sendBeacon(t.v.toString(),"")),!n&&vh.Image&&((new Image).src=t.v,n=!0),n||(t.g=ev(t.l,null),t.g.da(t.v)),t.F=Date.now(),Sf(t)}Xp(e)}function Fp(e){e.g&&(Gp(e),e.g.cancel(),e.g=null)}function Up(e){Fp(e),e.u&&(vh.clearTimeout(e.u),e.u=null),Qp(e),e.h.cancel(),e.m&&("number"===typeof e.m&&vh.clearTimeout(e.m),e.m=null)}function Vp(e){ap(e.h)||e.m||(e.m=!0,Od(e.Ja,e),e.C=0)}function Bp(e,t){var n;n=t?t.m:e.U++;var r=Of(e.F);Uf(r,"SID",e.I),Uf(r,"RID",n),Uf(r,"AID",e.T),qp(e,r),e.o&&e.s&&Dp(r,e.o,e.s),n=new mf(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=zp(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),up(e.h,n),bf(n,r,t)}function qp(e,t){e.ia&&od(e.ia,(function(e,n){Uf(t,n,e)})),e.l&&Pf({},(function(e,n){Uf(t,n,e)}))}function zp(e,t,n){n=Math.min(e.i.length,n);var r=e.l?xh(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{fp(l,o,"req"+c+"_")}catch(Tv){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Wp(e){e.g||e.u||(e.Z=1,Od(e.Ia,e),e.A=0)}function Hp(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=af(xh(e.Ia,e),Jp(e,e.A)),e.A++,!0)}function Gp(e){null!=e.B&&(vh.clearTimeout(e.B),e.B=null)}function Kp(e){e.g=new mf(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Of(e.sa);Uf(t,"RID","rpc"),Uf(t,"SID",e.I),Uf(t,"CI",e.L?"0":"1"),Uf(t,"AID",e.T),Uf(t,"TYPE","xmlhttp"),qp(e,t),e.o&&e.s&&Dp(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Vf(Of(t)),n.s=null,n.P=!0,_f(n,e)}function Qp(e){null!=e.v&&(vh.clearTimeout(e.v),e.v=null)}function Yp(e,t){var n=null;if(e.g==t){Qp(e),Gp(e),e.g=null;var r=2}else{if(!sp(e.h,t))return;n=t.D,cp(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Sd(r=Xd(),new rf(r,n)),Vp(e)}else Wp(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(op(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=af(xh(e.Ja,e,t),Jp(e,e.C)),e.C++,!0))}(e,t)||2==r&&Hp(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:$p(e,5);break;case 4:$p(e,10);break;case 3:$p(e,6);break;default:$p(e,2)}}function Jp(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function $p(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=xh(e.kb,e);n||(n=new Df("//www.google.com/images/cleardot.gif"),vh.location&&"http"==vh.location.protocol||Lf(n,"https"),Vf(n)),function(e,t){var n=new Qd;if(vh.Image){var r=new Image;r.onload=Ih(pp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ih(pp,n,r,"TestLoadImage: error",!1,t),r.onabort=Ih(pp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ih(pp,n,r,"TestLoadImage: timeout",!1,t),vh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nf(2);e.G=0,e.l&&e.l.va(t),Xp(e),Up(e)}function Xp(e){if(e.G=0,e.la=[],e.l){var t=lp(e.h);0==t.length&&0==e.i.length||(Nh(e.la,t),Nh(e.la,e.i),e.h.i.length=0,Ch(e.i),e.i.length=0),e.l.ua()}}function Zp(e,t,n){var r=n instanceof Df?Of(n):new Df(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Mf(r,r.m);else{var i=vh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Df(null,void 0);r&&Lf(a,r),t&&(a.g=t),i&&Mf(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Uf(r,n,t),Uf(r,"VER",e.ma),qp(e,r),r}function ev(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new _p(new vp({jb:!0})):new _p(e.ra)).Ka(e.H),t}function tv(){}function nv(){if(Vh&&!(10<=Number(Zh)))throw Error("Environmental error: no available transport.")}function rv(e,t){Ed.call(this),this.g=new Lp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Ph(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ph(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ov(this)}function iv(e){ff.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function av(){pf.call(this),this.status=1}function ov(e){this.g=e}(hh=_p.prototype).Ka=function(e){this.L=e},hh.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hf.g(),this.C=this.u?cf(this.u):cf(hf),this.g.onreadystatechange=xh(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Sp(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=T(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=vh.FormData&&e instanceof vh.FormData,!(0<=Th(Ep,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=T(n);try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),d=h[0],f=h[1];this.g.setRequestHeader(d,f)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jp(this),0<this.B&&((this.K=function(e){return Vh&&$h()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xh(this.qa,this)):this.A=Bd(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Sp(this,s)}},hh.qa=function(){"undefined"!=typeof ph&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sd(this,"timeout"),this.abort(8))},hh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Sd(this,"complete"),Sd(this,"abort"),Np(this))},hh.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Np(this,!0)),_p.X.M.call(this)},hh.Ha=function(){this.s||(this.F||this.v||this.l?Cp(this):this.fb())},hh.fb=function(){Cp(this)},hh.aa=function(){try{return 2<Ap(this)?this.g.status:-1}catch(rp){return-1}},hh.fa=function(){try{return this.g?this.g.responseText:""}catch(rp){return""}},hh.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),bp(t)}},hh.Ea=function(){return this.m},hh.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(hh=Lp.prototype).ma=8,hh.G=1,hh.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new mf(this,this.j,e,void 0),n=this.s;if(this.S&&(n?cd(n=sd(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zp(this,t,r),Uf(i=Of(this.F),"RID",e),Uf(i,"CVER",22),this.D&&Uf(i,"X-HTTP-Session-Id",this.D),qp(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Rp(n)))+"&"+r:this.o&&Dp(i,this.o,n)),up(this.h,t),this.Ya&&Uf(i,"TYPE","init"),this.O?(Uf(i,"$req",r),Uf(i,"SID","null"),t.Z=!0,bf(t,i,null)):bf(t,i,r),this.G=2}}else 3==this.G&&(e?Bp(this,e):0==this.i.length||ap(this.h)||Bp(this))},hh.Ia=function(){if(this.u=null,Kp(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=af(xh(this.eb,this),e)}},hh.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,nf(10),Fp(this),Kp(this))},hh.cb=function(){null!=this.v&&(this.v=null,Fp(this),Hp(this),nf(19))},hh.kb=function(e){e?(this.j.info("Successfully pinged google.com"),nf(2)):(this.j.info("Failed to ping google.com"),nf(1))},(hh=tv.prototype).xa=function(){},hh.wa=function(){},hh.va=function(){},hh.ua=function(){},hh.Ra=function(){},nv.prototype.g=function(e,t){return new rv(e,t)},Eh(rv,Ed),rv.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;nf(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Zp(e,null,e.V),Vp(e)},rv.prototype.close=function(){Mp(this.g)},rv.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Cd(e),e=n);t.i.push(new tp(t.ab++,e)),3==t.G&&Vp(t)},rv.prototype.M=function(){this.g.l=null,delete this.j,Mp(this.g),delete this.g,rv.X.M.call(this)},Eh(iv,ff),Eh(av,pf),Eh(ov,tv),ov.prototype.xa=function(){Sd(this.g,"a")},ov.prototype.wa=function(e){Sd(this.g,new iv(e))},ov.prototype.va=function(e){Sd(this.g,new av)},ov.prototype.ua=function(){Sd(this.g,"b")},nv.prototype.createWebChannel=nv.prototype.g,rv.prototype.send=rv.prototype.u,rv.prototype.open=rv.prototype.m,rv.prototype.close=rv.prototype.close,of.NO_ERROR=0,of.TIMEOUT=8,of.HTTP_ERROR=6,sf.COMPLETE="complete",lf.EventType=df,df.OPEN="a",df.CLOSE="b",df.ERROR="c",df.MESSAGE="d",Ed.prototype.listen=Ed.prototype.N,_p.prototype.listenOnce=_p.prototype.O,_p.prototype.getLastError=_p.prototype.Oa,_p.prototype.getLastErrorCode=_p.prototype.Ea,_p.prototype.getStatus=_p.prototype.aa,_p.prototype.getResponseJson=_p.prototype.Sa,_p.prototype.getResponseText=_p.prototype.fa,_p.prototype.send=_p.prototype.da,_p.prototype.setWithCredentials=_p.prototype.Ka;var sv=fh.createWebChannelTransport=function(){return new nv},uv=fh.getStatEventTarget=function(){return Xd()},cv=fh.ErrorCode=of,lv=fh.EventType=sf,hv=fh.Event=Jd,dv=fh.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},fv=fh.FetchXmlHttpFactory=vp,pv=fh.WebChannel=lf,vv=fh.XhrIo=_p,mv="@firebase/firestore",yv=function(){function e(t){f(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();yv.UNAUTHENTICATED=new yv(null),yv.GOOGLE_CREDENTIALS=new yv("google-credentials-uid"),yv.FIRST_PARTY=new yv("first-party-uid"),yv.MOCK_USER=new yv("mock-user");var gv="9.20.0",kv=new fn("@firebase/firestore");function wv(){return kv.logLevel}function bv(e){if(kv.logLevel<=on.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Iv);kv.debug.apply(kv,["Firestore (".concat(gv,"): ").concat(e)].concat(d(i)))}}function _v(e){if(kv.logLevel<=on.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Iv);kv.error.apply(kv,["Firestore (".concat(gv,"): ").concat(e)].concat(d(i)))}}function xv(e){if(kv.logLevel<=on.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Iv);kv.warn.apply(kv,["Firestore (".concat(gv,"): ").concat(e)].concat(d(i)))}}function Iv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ev(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gv,") INTERNAL ASSERTION FAILED: ")+e;throw _v(t),new Error(t)}function Sv(e,t){e||Ev()}function Tv(e,t){return e}var Cv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nv=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(Tt),jv=y((function e(){var t=this;f(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Av=y((function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Pv=function(){function e(){f(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Rv=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Dv=function(){function e(t){f(this,e),this.t=t,this.currentUser=yv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new jv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new jv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){bv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(bv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new jv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(bv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Sv("string"==typeof n.accessToken),new Av(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Sv(null===e||"string"==typeof e),new yv(e)}}]),e}(),Ov=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=yv.FIRST_PARTY,this.g=new Map}return y(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Lv=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new Ov(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Mv=y((function e(t){f(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Fv=function(){function e(t){f(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&bv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,bv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){bv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):bv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Sv("string"==typeof t.token),e.T=t.token,new Mv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Uv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Vv=function(){function e(){f(this,e)}return y(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Uv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Bv(e,t){return e<t?-1:e>t?1:0}function qv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function zv(e){return e+"\0"}var Wv=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Nv(Cv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Nv(Cv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Nv(Cv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nv(Cv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Bv(this.nanoseconds,e.nanoseconds):Bv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Hv=function(){function e(t){f(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Wv(0,0))}},{key:"max",value:function(){return new e(new Wv(253402300799,999999999))}}]),e}(),Gv=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&Ev(),void 0===r?r=t.length-n:r>t.length-n&&Ev(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Kv=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,d(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gv),Qv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yv=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Qv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Nv(Cv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Nv(Cv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Nv(Cv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gv),Jv=function(){function e(t){f(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Kv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Kv.fromString(t))}},{key:"fromName",value:function(t){return new e(Kv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Kv.emptyPath())}},{key:"comparator",value:function(e,t){return Kv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Kv(t.slice()))}}]),e}(),$v=y((function e(t,n,r,i){f(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Xv(e){return e.fields.find((function(e){return 2===e.kind}))}function Zv(e){return e.fields.filter((function(e){return 2!==e.kind}))}$v.UNKNOWN_ID=-1;var em=y((function e(t,n){f(this,e),this.fieldPath=t,this.kind=n}));var tm=function(){function e(t,n){f(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,im.min())}}]),e}();function nm(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hv.fromTimestamp(1e9===r?new Wv(n+1,0):new Wv(n,r));return new im(i,Jv.empty(),t)}function rm(e){return new im(e.readTime,e.key,-1)}var im=function(){function e(t,n,r){f(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(Hv.min(),Jv.empty(),-1)}},{key:"max",value:function(){return new e(Hv.max(),Jv.empty(),-1)}}]),e}();function am(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Jv.comparator(e.documentKey,t.documentKey))?n:Bv(e.largestBatchId,t.largestBatchId)}var om="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sm=function(){function e(){f(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function um(e){return cm.apply(this,arguments)}function cm(){return cm=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Cv.FAILED_PRECONDITION&&t.message===om){e.next=2;break}throw t;case 2:bv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}var lm=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ev(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),hm=function(){function e(t,n){var r=this;f(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new jv,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new pm(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=km(e.target.error);r.R.reject(new pm(t,n))}}return y(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(bv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new mm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new pm(n,t)}}}]),e}(),dm=function(){function e(t,n,r){f(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(kt())&&_v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"$",value:function(){var e=en(Xt().mark((function e(t){var n=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return bv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new pm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Nv(Cv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Nv(Cv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new pm(t,n))},i.onupgradeneeded=function(e){bv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){bv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=en(Xt().mark((function e(t,n,r,i){var a,o,s,u,c=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=Xt().mark((function e(){var n,s,u,l;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=hm.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),lm.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.v;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,bv("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return bv("SimpleDb","Removing database:",e),ym(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!St())return!1;if(e.C())return!0;var t=kt(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Librariaa-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),fm=function(){function e(t){f(this,e),this.L=t,this.q=!1,this.U=null}return y(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return ym(this.L.delete())}}]),e}(),pm=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,Cv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(Nv);function vm(e){return"IndexedDbTransactionError"===e.name}var mm=function(){function e(t){f(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(bv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(bv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ym(n)}},{key:"add",value:function(e){return bv("SimpleDb","ADD",this.store.name,e,e),ym(this.store.add(e))}},{key:"get",value:function(e){var t=this;return ym(this.store.get(e)).next((function(n){return void 0===n&&(n=null),bv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return bv("SimpleDb","DELETE",this.store.name,e),ym(this.store.delete(e))}},{key:"count",value:function(){return bv("SimpleDb","COUNT",this.store.name),ym(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new lm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new lm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){bv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new lm((function(n,r){t.onerror=function(e){var t=km(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new lm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new fm(i),o=t(i.primaryKey,i.value,a);if(o instanceof lm){var s=o.catch((function(e){return a.done(),lm.reject(e)}));n.push(s)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return lm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function ym(e){return new lm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=km(e.target.error);n(t)}}))}var gm=!1;function km(e){var t=dm.S(kt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Nv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return gm||(gm=!0,setTimeout((function(){throw r}),0)),r}}return e}var wm=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return y(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;bv("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=bv,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!vm(e.t4)){e.next=17;break}bv("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,um(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),bm=function(){function e(t,n){f(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"nt",value:function(){var e=en(Xt().mark((function e(){var t,n=this,r=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return lm.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return bv("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return bv("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=rm(t);am(r,n)>0&&(n=r)})),new im(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),_m=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function xm(e){return null==e}function Im(e){return 0===e&&1/e==-1/0}function Em(e){return"number"==typeof e&&Number.isInteger(e)&&!Im(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Sm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Cm(t)),t=Tm(e.get(n),t);return Cm(t)}function Tm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Cm(e){return e+"\x01\x01"}function Nm(e){var t=e.length;if(Sv(t>=2),2===t)return Sv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Kv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ev(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ev()}a=o+2}return new Kv(r)}_m.ct=-1;var jm=["userId","batchId"];function Am(e,t){return[e,Sm(t)]}function Pm(e,t,n){return[e,Sm(t),n]}var Rm={},Dm=["prefixPath","collectionGroup","readTime","documentId"],Om=["prefixPath","collectionGroup","documentId"],Lm=["collectionGroup","readTime","prefixPath","documentId"],Mm=["canonicalId","targetId"],Fm=["targetId","path"],Um=["path","targetId"],Vm=["collectionId","parent"],Bm=["indexId","uid"],qm=["uid","sequenceNumber"],zm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wm=["indexId","uid","orderedDocumentKey"],Hm=["userId","collectionPath","documentId"],Gm=["userId","collectionPath","largestBatchId"],Km=["userId","collectionGroup","largestBatchId"],Qm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ym=[].concat(d(Qm),["documentOverlays"]),Jm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$m=Jm,Xm=[].concat($m,["indexConfiguration","indexState","indexEntries"]),Zm=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return y(n)}(sm);function ey(e,t){var n=Tv(e);return dm.O(n.at,t)}function ty(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ny(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ry(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var iy=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||oy.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,oy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,oy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ay(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ay(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ay(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ay(this.root,e,this.comparator,!0)}}]),e}(),ay=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),oy=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ev();if(this.right.isRed())throw Ev();var e=this.left.check();if(e!==this.right.check())throw Ev();return e+(this.isRed()?0:1)}}]),e}();oy.EMPTY=null,oy.RED=!0,oy.BLACK=!1,oy.EMPTY=new(function(){function e(){f(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw Ev()}},{key:"value",get:function(){throw Ev()}},{key:"color",get:function(){throw Ev()}},{key:"left",get:function(){throw Ev()}},{key:"right",get:function(){throw Ev()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new oy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var sy=function(){function e(t){f(this,e),this.comparator=t,this.data=new iy(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new uy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new uy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),uy=function(){function e(t){f(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function cy(e){return e.hasNext()?e.getNext():void 0}var ly=function(){function e(t){f(this,e),this.fields=t,t.sort(Yv.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new sy(Yv.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=T(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return qv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),hy=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(E(Error));var dy=function(e){function t(e){f(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Bv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new hy("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();dy.EMPTY_BYTE_STRING=new dy("");var fy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function py(e){if(Sv(!!e),"string"==typeof e){var t=0,n=fy.exec(e);if(Sv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vy(e.seconds),nanos:vy(e.nanos)}}function vy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function my(e){return"string"==typeof e?dy.fromBase64String(e):dy.fromUint8Array(e)}function yy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gy(e){var t=e.mapValue.fields.__previous_value__;return yy(t)?gy(t):t}function ky(e){var t=py(e.mapValue.fields.__local_write_time__.timestampValue);return new Wv(t.seconds,t.nanos)}var wy=y((function e(t,n,r,i,a,o,s,u){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),by=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),_y={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xy={nullValue:"NULL_VALUE"};function Iy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yy(e)?4:Fy(e)?9007199254740991:10:Ev()}function Ey(e,t){if(e===t)return!0;var n=Iy(e);if(n!==Iy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ky(e).isEqual(ky(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=py(e.timestampValue),r=py(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return my(e.bytesValue).isEqual(my(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vy(e.geoPointValue.latitude)===vy(t.geoPointValue.latitude)&&vy(e.geoPointValue.longitude)===vy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vy(e.integerValue)===vy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=vy(e.doubleValue),r=vy(t.doubleValue);return n===r?Im(n)===Im(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qv(e.arrayValue.values||[],t.arrayValue.values||[],Ey);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ty(n)!==ty(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ey(n[i],r[i])))return!1;return!0}(e,t);default:return Ev()}}function Sy(e,t){return void 0!==(e.values||[]).find((function(e){return Ey(e,t)}))}function Ty(e,t){if(e===t)return 0;var n=Iy(e),r=Iy(t);if(n!==r)return Bv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=vy(e.integerValue||e.doubleValue),r=vy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Cy(e.timestampValue,t.timestampValue);case 4:return Cy(ky(e),ky(t));case 5:return Bv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=my(e),r=my(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Bv(n[i],r[i]);if(0!==a)return a}return Bv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Bv(vy(e.latitude),vy(t.latitude));return 0!==n?n:Bv(vy(e.longitude),vy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ty(n[i],r[i]);if(a)return a}return Bv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===_y.mapValue&&t===_y.mapValue)return 0;if(e===_y.mapValue)return 1;if(t===_y.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Bv(r[o],a[o]);if(0!==s)return s;var u=Ty(n[r[o]],i[a[o]]);if(0!==u)return u}return Bv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ev()}}function Cy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bv(e,t);var n=py(e),r=py(t),i=Bv(n.seconds,r.seconds);return 0!==i?i:Bv(n.nanos,r.nanos)}function Ny(e){return jy(e)}function jy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=py(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?my(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Jv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=jy(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(jy(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ev();var t,n}function Ay(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Py(e){return!!e&&"integerValue"in e}function Ry(e){return!!e&&"arrayValue"in e}function Dy(e){return!!e&&"nullValue"in e}function Oy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ly(e){return!!e&&"mapValue"in e}function My(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ny(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=My(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=My(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Fy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Uy(e){return"nullValue"in e?xy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ay(by.empty(),Jv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ev()}function Vy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ay(by.empty(),Jv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?_y:Ev()}function By(e,t){var n=Ty(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function qy(e,t){var n=Ty(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var zy=function(){function e(t){f(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ly(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=My(t)}},{key:"setAll",value:function(e){var t=this,n=Yv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=My(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ly(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ey(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ly(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ny(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(My(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Wy(e){var t=[];return ny(e.fields,(function(e,n){var r=new Yv([e]);if(Ly(n)){var i=Wy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new ly(t)}var Hy=function(){function e(t,n,r,i,a,o,s){f(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Hv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=zy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=zy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Hv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Hv.min(),Hv.min(),Hv.min(),zy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Hv.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Hv.min(),Hv.min(),zy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Hv.min(),Hv.min(),zy.empty(),2)}}]),e}(),Gy=y((function e(t,n){f(this,e),this.position=t,this.inclusive=n}));function Ky(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Jv.comparator(Jv.fromName(o.referenceValue),n.key):Ty(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Qy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ey(e.position[n],t.position[n]))return!1;return!0}var Yy=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n}));function Jy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var $y=y((function e(){f(this,e)})),Xy=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ty(t,this.value)):null!==t&&Iy(this.value)===Iy(t)&&this.matchesComparison(Ty(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ev()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ug(e,t,r):"array-contains"===t?new dg(e,r):"in"===t?new fg(e,r):"not-in"===t?new pg(e,r):"array-contains-any"===t?new vg(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new cg(e,n):new lg(e,n)}}]),n}($y),Zy=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return y(n,[{key:"matches",value:function(e){return eg(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}($y);function eg(e){return"and"===e.op}function tg(e){return"or"===e.op}function ng(e){return rg(e)&&eg(e)}function rg(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Zy)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function ig(e){if(e instanceof Xy)return e.field.canonicalString()+e.op.toString()+Ny(e.value);if(ng(e))return e.filters.map((function(e){return ig(e)})).join(",");var t=e.filters.map((function(e){return ig(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function ag(e,t){return e instanceof Xy?function(e,t){return t instanceof Xy&&e.op===t.op&&e.field.isEqual(t.field)&&Ey(e.value,t.value)}(e,t):e instanceof Zy?function(e,t){return t instanceof Zy&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&ag(n,t.filters[r])}),!0)}(e,t):void Ev()}function og(e,t){var n=e.filters.concat(t);return Zy.create(n,e.op)}function sg(e){return e instanceof Xy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ny(e.value))}(e):e instanceof Zy?function(e){return e.op.toString()+" {"+e.getFilters().map(sg).join(" ,")+"}"}(e):"Filter"}var ug=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=Jv.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=Jv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Xy),cg=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=hg("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Xy),lg=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=hg("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Xy);function hg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Jv.fromName(e.referenceValue)}))}var dg=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ry(t)&&Sy(t.arrayValue,this.value)}}]),n}(Xy),fg=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Sy(this.value.arrayValue,t)}}]),n}(Xy),pg=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(Sy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Sy(this.value.arrayValue,t)}}]),n}(Xy),vg=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ry(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Sy(t.value.arrayValue,e)}))}}]),n}(Xy),mg=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ft=null}));function yg(e){return new mg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function gg(e){var t=Tv(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return ig(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),xm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ny(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ny(e)})).join(",")),t.ft=n}return t.ft}function kg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Jy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!ag(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Qy(e.startAt,t.startAt)&&Qy(e.endAt,t.endAt)}function wg(e){return Jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function bg(e,t){return e.filters.filter((function(e){return e instanceof Xy&&e.field.isEqual(t)}))}function _g(e,t,n){var r,i=xy,a=!0,o=T(bg(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=xy,c=!0;switch(s.op){case"<":case"<=":u=Uy(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=xy}By({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];By({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function xg(e,t,n){var r,i=_y,a=!0,o=T(bg(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=_y,c=!0;switch(s.op){case">=":case">":u=Vy(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=_y}qy({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];qy({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Ig=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.dt=null,this.wt=null,this.startAt,this.endAt}));function Eg(e,t,n,r,i,a,o,s){return new Ig(e,t,n,r,i,a,o,s)}function Sg(e){return new Ig(e)}function Tg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Cg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ng(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function jg(e){return null!==e.collectionGroup}function Ag(e){var t=Tv(e);if(null===t.dt){t.dt=[];var n=Ng(t),r=Cg(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Yy(n)),t.dt.push(new Yy(Yv.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Yy(Yv.keyField(),u))}}}return t.dt}function Pg(e){var t=Tv(e);if(!t.wt)if("F"===t.limitType)t.wt=yg(t.path,t.collectionGroup,Ag(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(Ag(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Yy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Gy(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Gy(t.startAt.position,t.startAt.inclusive):null;t.wt=yg(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.wt}function Rg(e,t){t.getFirstInequalityField(),Ng(e);var n=e.filters.concat([t]);return new Ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Dg(e,t,n){return new Ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Og(e,t){return kg(Pg(e),Pg(t))&&e.limitType===t.limitType}function Lg(e){return"".concat(gg(Pg(e)),"|lt:").concat(e.limitType)}function Mg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return sg(e)})).join(", "),"]")),xm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ny(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ny(e)})).join(",")),"Target(".concat(t,")")}(Pg(e)),"; limitType=").concat(e.limitType,")")}function Fg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(Ag(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ky(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ag(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ky(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ag(e),t))}(e,t)}function Ug(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Vg(e){return function(t,n){var r,i=!1,a=T(Ag(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Bg(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Bg(e,t,n){var r=e.field.isKeyField()?Jv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ty(r,i):Ev()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ev()}}var qg=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ny(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ry(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),zg=new iy(Jv.comparator);function Wg(){return zg}var Hg=new iy(Jv.comparator);function Gg(){for(var e=Hg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Kg(e){var t=Hg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Qg(){return Jg()}function Yg(){return Jg()}function Jg(){return new qg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var $g=new iy(Jv.comparator),Xg=new sy(Jv.comparator);function Zg(){for(var e=Xg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var ek=new sy(Bv);function tk(){return ek}function nk(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Im(t)?"-0":t}}function rk(e){return{integerValue:""+e}}function ik(e,t){return Em(t)?rk(t):nk(e,t)}var ak=y((function e(){f(this,e),this._=void 0}));function ok(e,t,n){return e instanceof ck?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof lk?hk(e,t):e instanceof dk?fk(e,t):function(e,t){var n=uk(e,t),r=vk(n)+vk(e._t);return Py(n)&&Py(e._t)?rk(r):nk(e.serializer,r)}(e,t)}function sk(e,t,n){return e instanceof lk?hk(e,t):e instanceof dk?fk(e,t):n}function uk(e,t){return e instanceof pk?Py(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var ck=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(ak),lk=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return y(n)}(ak);function hk(e,t){var n,r=mk(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ey(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var dk=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return y(n)}(ak);function fk(e,t){var n,r=mk(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ey(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var pk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return y(n)}(ak);function vk(e){return vy(e.integerValue||e.doubleValue)}function mk(e){return Ry(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var yk=y((function e(t,n){f(this,e),this.field=t,this.transform=n}));var gk=y((function e(t,n){f(this,e),this.version=t,this.transformResults=n})),kk=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function wk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var bk=y((function e(){f(this,e)}));function _k(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dk(e.key,kk.none()):new Tk(e.key,e.data,kk.none());var n,r=e.data,i=zy.empty(),a=new sy(Yv.comparator),o=T(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Ck(e.key,i,new ly(a.toArray()),kk.none())}function xk(e,t,n){e instanceof Tk?function(e,t,n){var r=e.value.clone(),i=jk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ck?function(e,t,n){if(wk(e.precondition,t)){var r=jk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Nk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ik(e,t,n,r){return e instanceof Tk?function(e,t,n,r){if(!wk(e.precondition,t))return n;var i=e.value.clone(),a=Ak(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ck?function(e,t,n,r){if(!wk(e.precondition,t))return n;var i=Ak(e.fieldTransforms,r,t),a=t.data;return a.setAll(Nk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return wk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ek(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=uk(a.transform,o||null);null!=s&&(null===r&&(r=zy.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Sk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof lk&&t instanceof lk||e instanceof dk&&t instanceof dk?qv(e.elements,t.elements,Ey):e instanceof pk&&t instanceof pk?Ey(e._t,t._t):e instanceof ck&&t instanceof ck}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Tk=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(bk),Ck=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(bk);function Nk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function jk(e,t,n){var r=new Map;Sv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,sk(o,s,n[i]))}return r}function Ak(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,ok(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Pk,Rk,Dk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(bk),Ok=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(bk),Lk=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&xk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ik(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=T(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Ik(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Yg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=_k(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Hv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Zg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&qv(this.mutations,e.mutations,(function(e,t){return Sk(e,t)}))&&qv(this.baseMutations,e.baseMutations,(function(e,t){return Sk(e,t)}))}}]),e}(),Mk=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Sv(t.mutations.length===r.length);for(var i=$g,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Fk=function(){function e(t,n){f(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Uk=y((function e(t){f(this,e),this.count=t}));function Vk(e){switch(e){default:return Ev();case Cv.CANCELLED:case Cv.UNKNOWN:case Cv.DEADLINE_EXCEEDED:case Cv.RESOURCE_EXHAUSTED:case Cv.INTERNAL:case Cv.UNAVAILABLE:case Cv.UNAUTHENTICATED:return!1;case Cv.INVALID_ARGUMENT:case Cv.NOT_FOUND:case Cv.ALREADY_EXISTS:case Cv.PERMISSION_DENIED:case Cv.FAILED_PRECONDITION:case Cv.ABORTED:case Cv.OUT_OF_RANGE:case Cv.UNIMPLEMENTED:case Cv.DATA_LOSS:return!0}}function Bk(e){if(void 0===e)return _v("GRPC error has no .code"),Cv.UNKNOWN;switch(e){case Pk.OK:return Cv.OK;case Pk.CANCELLED:return Cv.CANCELLED;case Pk.UNKNOWN:return Cv.UNKNOWN;case Pk.DEADLINE_EXCEEDED:return Cv.DEADLINE_EXCEEDED;case Pk.RESOURCE_EXHAUSTED:return Cv.RESOURCE_EXHAUSTED;case Pk.INTERNAL:return Cv.INTERNAL;case Pk.UNAVAILABLE:return Cv.UNAVAILABLE;case Pk.UNAUTHENTICATED:return Cv.UNAUTHENTICATED;case Pk.INVALID_ARGUMENT:return Cv.INVALID_ARGUMENT;case Pk.NOT_FOUND:return Cv.NOT_FOUND;case Pk.ALREADY_EXISTS:return Cv.ALREADY_EXISTS;case Pk.PERMISSION_DENIED:return Cv.PERMISSION_DENIED;case Pk.FAILED_PRECONDITION:return Cv.FAILED_PRECONDITION;case Pk.ABORTED:return Cv.ABORTED;case Pk.OUT_OF_RANGE:return Cv.OUT_OF_RANGE;case Pk.UNIMPLEMENTED:return Cv.UNIMPLEMENTED;case Pk.DATA_LOSS:return Cv.DATA_LOSS;default:return Ev()}}(Rk=Pk||(Pk={}))[Rk.OK=0]="OK",Rk[Rk.CANCELLED=1]="CANCELLED",Rk[Rk.UNKNOWN=2]="UNKNOWN",Rk[Rk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rk[Rk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rk[Rk.NOT_FOUND=5]="NOT_FOUND",Rk[Rk.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rk[Rk.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rk[Rk.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rk[Rk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rk[Rk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rk[Rk.ABORTED=10]="ABORTED",Rk[Rk.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rk[Rk.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rk[Rk.INTERNAL=13]="INTERNAL",Rk[Rk.UNAVAILABLE=14]="UNAVAILABLE",Rk[Rk.DATA_LOSS=15]="DATA_LOSS";var qk=function(){function e(){f(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return y(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return zk}},{key:"getOrCreateInstance",value:function(){return null===zk&&(zk=new e),zk}}]),e}(),zk=null,Wk=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Hk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Hv.min(),i,tk(),Wg(),Zg())}}]),e}(),Hk=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Zg(),Zg(),Zg())}}]),e}(),Gk=y((function e(t,n,r,i){f(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),Kk=y((function e(t,n){f(this,e),this.targetId=t,this.Et=n})),Qk=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dy.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Yk=function(){function e(){f(this,e),this.At=0,this.Rt=Xk(),this.vt=dy.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return y(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=Zg(),t=Zg(),n=Zg();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ev()}})),new Hk(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=Xk()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),Jk=function(){function e(t){f(this,e),this.Ft=t,this.Bt=new Map,this.Lt=Wg(),this.qt=$k(),this.Ut=new sy(Bv)}return y(e,[{key:"Kt",value:function(e){var t,n=T(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Ev()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(wg(a))if(0===r){var o=new Jv(a.path);this.Qt(n,o,Hy.newNoDocument(o,Hv.min()))}else Sv(1===r);else{var s=this.Zt(n);s!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=qk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:s,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&wg(a.target)){var o=new Jv(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Hy.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=Zg();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Wk(e,n,this.Ut,this.Lt,r);return this.Lt=Wg(),this.qt=$k(),this.Ut=new sy(Bv),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new Yk,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new sy(Bv),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||bv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Yk),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function $k(){return new iy(Jv.comparator)}function Xk(){return new iy(Jv.comparator)}var Zk={asc:"ASCENDING",desc:"DESCENDING"},ew={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tw={and:"AND",or:"OR"},nw=y((function e(t,n){f(this,e),this.databaseId=t,this.useProto3Json=n}));function rw(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function iw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function aw(e,t){return rw(e,t.toTimestamp())}function ow(e){return Sv(!!e),Hv.fromTimestamp(function(e){var t=py(e);return new Wv(t.seconds,t.nanos)}(e))}function sw(e,t){return function(e){return new Kv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function uw(e){var t=Kv.fromString(e);return Sv(Aw(t)),t}function cw(e,t){return sw(e.databaseId,t.path)}function lw(e,t){var n=uw(t);if(n.get(1)!==e.databaseId.projectId)throw new Nv(Cv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nv(Cv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jv(pw(n))}function hw(e,t){return sw(e.databaseId,t)}function dw(e){var t=uw(e);return 4===t.length?Kv.emptyPath():pw(t)}function fw(e){return new Kv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pw(e){return Sv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vw(e,t,n){return{name:cw(e,t),fields:n.value.mapValue.fields}}function mw(e,t,n){var r=lw(e,t.name),i=ow(t.updateTime),a=t.createTime?ow(t.createTime):Hv.min(),o=new zy({mapValue:{fields:t.fields}}),s=Hy.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function yw(e,t){return"found"in t?function(e,t){Sv(!!t.found),t.found.name,t.found.updateTime;var n=lw(e,t.found.name),r=ow(t.found.updateTime),i=t.found.createTime?ow(t.found.createTime):Hv.min(),a=new zy({mapValue:{fields:t.found.fields}});return Hy.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Sv(!!t.missing),Sv(!!t.readTime);var n=lw(e,t.missing),r=ow(t.readTime);return Hy.newNoDocument(n,r)}(e,t):Ev()}function gw(e,t){var n;if(t instanceof Tk)n={update:vw(e,t.key,t.value)};else if(t instanceof Dk)n={delete:cw(e,t.key)};else if(t instanceof Ck)n={update:vw(e,t.key,t.data),updateMask:jw(t.fieldMask)};else{if(!(t instanceof Ok))return Ev();n={verify:cw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof ck)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof lk)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dk)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pk)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Ev()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:aw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ev()}(e,t.precondition)),n}function kw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?kk.updateTime(ow(e.updateTime)):void 0!==e.exists?kk.exists(e.exists):kk.none()}(t.currentDocument):kk.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Sv("REQUEST_TIME"===t.setToServerValue),n=new ck;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new lk(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new dk(i)}else"increment"in t?n=new pk(e,t.increment):Ev();var a=Yv.fromServerFormat(t.fieldPath);return new yk(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=lw(e,t.update.name),a=new zy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ly(t.map((function(e){return Yv.fromServerFormat(e)})))}(t.updateMask);return new Ck(i,a,o,n,r)}return new Tk(i,a,n,r)}if(t.delete){var s=lw(e,t.delete);return new Dk(s,n)}if(t.verify){var u=lw(e,t.verify);return new Ok(u,n)}return Ev()}function ww(e,t){return{documents:[hw(e,t.path)]}}function bw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Nw(Zy.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Tw(e.field),direction:Iw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.useProto3Json||xm(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function _w(e){var t=dw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Sv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=xw(e);return t instanceof Zy&&ng(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Yy(Cw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return xm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Gy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Gy(n,t)}(n.endAt)),Eg(t,i,s,o,u,"F",c,l)}function xw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cw(e.unaryFilter.field);return Xy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cw(e.unaryFilter.field);return Xy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cw(e.unaryFilter.field);return Xy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cw(e.unaryFilter.field);return Xy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ev()}}(e):void 0!==e.fieldFilter?function(e){return Xy.create(Cw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ev()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Zy.create(e.compositeFilter.filters.map((function(e){return xw(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ev()}}(e.compositeFilter.op))}(e):Ev()}function Iw(e){return Zk[e]}function Ew(e){return ew[e]}function Sw(e){return tw[e]}function Tw(e){return{fieldPath:e.canonicalString()}}function Cw(e){return Yv.fromServerFormat(e.fieldPath)}function Nw(e){return e instanceof Xy?function(e){if("=="===e.op){if(Oy(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NAN"}};if(Dy(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Oy(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NOT_NAN"}};if(Dy(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tw(e.field),op:Ew(e.op),value:e.value}}}(e):e instanceof Zy?function(e){var t=e.getFilters().map((function(e){return Nw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Sw(e.op),filters:t}}}(e):Ev()}function jw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Aw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Pw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dy.EMPTY_BYTE_STRING;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Rw=y((function e(t){f(this,e),this.se=t}));function Dw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ow(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:cw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:rw(e,t.version.toTimestamp()),createTime:rw(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Lw(t.version)};else{if(!t.isUnknownDocument())return Ev();r.unknownDocument={path:n.path.toArray(),version:Lw(t.version)}}return r}function Ow(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Lw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Mw(e){var t=new Wv(e.seconds,e.nanoseconds);return Hv.fromTimestamp(t)}function Fw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return kw(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return kw(e.se,t)})),s=Wv.fromMillis(t.localWriteTimeMs);return new Lk(t.batchId,s,n,o)}function Uw(e){var t,n,r=Mw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Mw(e.lastLimboFreeSnapshotVersion):Hv.min();return void 0!==e.query.documents?(Sv(1===(n=e.query).documents.length),t=Pg(Sg(dw(n.documents[0])))):t=function(e){return Pg(_w(e))}(e.query),new Pw(t,e.targetId,0,e.lastListenSequenceNumber,r,i,dy.fromBase64String(e.resumeToken))}function Vw(e,t){var n,r=Lw(t.snapshotVersion),i=Lw(t.lastLimboFreeSnapshotVersion);n=wg(t.target)?ww(e.se,t.target):bw(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:gg(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Bw(e){var t=_w({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Dg(t,t.limit,"L"):t}function qw(e,t){return new Fk(t.largestBatchId,kw(e.se,t.overlayMutation))}function zw(e,t){var n=t.path.lastSegment();return[e,Sm(t.path.popLast()),n]}function Ww(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Lw(r.readTime),documentKey:Sm(r.documentKey.path),largestBatchId:r.largestBatchId}}var Hw=function(){function e(){f(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return Gw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Mw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Gw(e).put({bundleId:(n=t).id,createTime:Lw(ow(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Kw(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Bw(t.bundledQuery),readTime:Mw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Kw(e).put(function(e){return{name:e.name,readTime:Lw(ow(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Gw(e){return ey(e,"bundles")}function Kw(e){return ey(e,"namedQueries")}var Qw=function(){function e(t,n){f(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return Yw(e).get(zw(this.userId,t)).next((function(e){return e?qw(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qg();return lm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Fk(t,a);i.push(r.re(e,o))})),lm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Sm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Yw(e).J("collectionPathOverlayIndex",i))})),lm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Qg(),a=Sm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Yw(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=qw(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Qg(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yw(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=qw(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return Yw(e).put(function(e,t,n){var r=l(zw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:gw(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Yw(e){return ey(e,"documentOverlays")}var Jw=function(){function e(){f(this,e)}return y(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(vy(e.integerValue));else if("doubleValue"in e){var n=vy(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Im(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(my(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?Fy(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Ev()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),Jv.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function $w(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Xw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=$w(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Jw.pe=new Jw;var Zw=function(){function e(){f(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=Xw(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=Xw(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),eb=function(){function e(t){f(this,e),this.Me=t}return y(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),tb=function(){function e(t){f(this,e),this.Me=t}return y(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),nb=function(){function e(){f(this,e),this.Me=new Zw,this.Fe=new eb(this.Me),this.Be=new tb(this.Me)}return y(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),rb=function(){function e(t,n,r,i){f(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function ib(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=ab(e.arrayValue,t.arrayValue))?n:0!==(n=ab(e.directionalValue,t.directionalValue))?n:Jv.comparator(e.documentKey,t.documentKey)}function ab(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ob=function(){function e(t){f(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ge=i:this.Ke.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"Qe",value:function(e){Sv(e.collectionGroup===this.collectionId);var t=Xv(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Zv(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=T(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function sb(e){var t,n;if(Sv(e instanceof Xy||e instanceof Zy),e instanceof Xy){if(e instanceof fg){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Xy.create(e.field,"==",t)})))||[];return Zy.create(r,"or")}return e}var i=e.filters.map((function(e){return sb(e)}));return Zy.create(i,e.op)}function ub(e){if(0===e.getFilters().length)return[];var t=db(sb(e));return Sv(hb(t)),cb(t)||lb(t)?[t]:t.getFilters()}function cb(e){return e instanceof Xy}function lb(e){return e instanceof Zy&&ng(e)}function hb(e){return cb(e)||lb(e)||function(e){if(e instanceof Zy&&tg(e)){var t,n=T(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!cb(r)&&!lb(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function db(e){if(Sv(e instanceof Xy||e instanceof Zy),e instanceof Xy)return e;if(1===e.filters.length)return db(e.filters[0]);var t=e.filters.map((function(e){return db(e)})),n=Zy.create(t,e.op);return hb(n=vb(n))?n:(Sv(n instanceof Zy),Sv(eg(n)),Sv(n.filters.length>1),n.filters.reduce((function(e,t){return fb(e,t)})))}function fb(e,t){var n;return Sv(e instanceof Xy||e instanceof Zy),Sv(t instanceof Xy||t instanceof Zy),n=e instanceof Xy?t instanceof Xy?function(e,t){return Zy.create([e,t],"and")}(e,t):pb(e,t):t instanceof Xy?pb(t,e):function(e,t){if(Sv(e.filters.length>0&&t.filters.length>0),eg(e)&&eg(t))return og(e,t.getFilters());var n=tg(e)?e:t,r=tg(e)?t:e,i=n.filters.map((function(e){return fb(e,r)}));return Zy.create(i,"or")}(e,t),vb(n)}function pb(e,t){if(eg(t))return og(t,e.getFilters());var n=t.filters.map((function(t){return fb(e,t)}));return Zy.create(n,"or")}function vb(e){if(Sv(e instanceof Xy||e instanceof Zy),e instanceof Xy)return e;var t=e.getFilters();if(1===t.length)return vb(t[0]);if(rg(e))return e;var n=t.map((function(e){return vb(e)})),r=[];return n.forEach((function(t){t instanceof Xy?r.push(t):t instanceof Zy&&(t.op===e.op?r.push.apply(r,d(t.filters)):r.push(t))})),1===r.length?r[0]:Zy.create(r,e.op)}var mb=function(){function e(){f(this,e),this.He=new yb}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),lm.resolve()}},{key:"getCollectionParents",value:function(e,t){return lm.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return lm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return lm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return lm.resolve(null)}},{key:"getIndexType",value:function(e,t){return lm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return lm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return lm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return lm.resolve(im.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return lm.resolve(im.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return lm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return lm.resolve()}}]),e}(),yb=function(){function e(){f(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new sy(Kv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new sy(Kv.comparator)).toArray()}}]),e}(),gb=new Uint8Array(0),kb=function(){function e(t,n){f(this,e),this.user=t,this.databaseId=n,this.Je=new yb,this.Ye=new qg((function(e){return gg(e)}),(function(e,t){return kg(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:Sm(i)};return wb(e).put(a)}return lm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[zv(t),""],!1,!0);return wb(e).j(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Nm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=_b(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=xb(e);return a.next((function(e){o.put(Ww(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=_b(e),r=xb(e),i=bb(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=bb(e),i=!0,a=new Map;return lm.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Zg(),o=[];return lm.forEach(a,(function(i,a){var s;bv("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(gg(t)));var u=function(e,t){var n=Xv(t);if(void 0===n)return null;var r,i=T(bg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=T(Zv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=T(bg(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(Zv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?_g(e,o.fieldPath,e.startAt):xg(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Gy(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=T(Zv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?xg(e,o.fieldPath,e.endAt):_g(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Gy(r,i)}(a,i),d=n.tn(i,a,l),f=n.tn(i,a,h),p=n.en(i,a,c),v=n.nn(i.indexId,u,d,l.inclusive,f,h.inclusive,p);return lm.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Jv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return lm.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:ub(Zy.create(e.filters,"and")).map((function(t){return yg(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(){var u=t?s.sn(t[f/c]):gb,h=s.rn(e,u,n[f%c],r),p=s.on(e,u,i[f%c],a),v=o.map((function(t){return s.rn(e,u,t,!0)}));l.push.apply(l,d(s.createRange(h,p,v)))},f=0;f<u;++f)h();return l}},{key:"rn",value:function(e,t,n,r){var i=new rb(e,Jv.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new rb(e,Jv.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new ob(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return lm.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new sy(Yv.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=T(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var u,c=T(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new nb,i=T(Zv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Le(a.kind);Jw.pe.oe(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new nb;return Jw.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new nb;return Jw.pe.oe(Ay(this.databaseId,t),n.Le(function(e){var t=Zv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new nb);var i,a=0,o=T(Zv(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=T(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.an(t,u.fieldPath)&&Ry(c))r=this.hn(r,u,c);else{var d=h.Le(u.kind);Jw.pe.oe(c,d)}}}catch(f){l.e(f)}finally{l.f()}}}catch(f){o.e(f)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=d(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=T(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new nb;h.seed(l.$e()),Jw.pe.oe(u,h.Le(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Xy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=_b(e),i=xb(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return lm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new tm(t.sequenceNumber,new im(Mw(t.readTime),new Jv(Nm(t.documentKey)),t.largestBatchId)):tm.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new em(Yv.fromServerFormat(n),r)}));return new $v(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Bv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=_b(e),a=xb(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return lm.forEach(t,(function(t){return a.put(Ww(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return lm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?lm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),lm.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?lm.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return bb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return bb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=bb(e),i=new sy(ib);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new rb(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new sy(ib),r=this.un(t,e);if(null==r)return n;var i=Xv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ry(a)){var o,s=T(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new rb(t.indexId,e.key,this.sn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new rb(t.indexId,e.key,gb,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;bv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=cy(a),u=cy(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=cy(o)):l?(i(s),s=cy(a)):(s=cy(a),u=cy(o))}}(r,i,ib,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),lm.waitFor(o)}},{key:"fn",value:function(e){var t=1;return xb(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return ib(e,t)})).filter((function(e,t,n){return!t||0!==ib(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=ib(o,e),u=ib(o,t);if(0===s)r[0]=e.qe();else if(s>0&&u<0)r.push(o),r.push(o.qe());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,gb,[]],d=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,gb,[]];c.push(IDBKeyRange.bound(h,d))}return c}},{key:"yn",value:function(e,t){return ib(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ib)}},{key:"getMinOffset",value:function(e,t){var n=this;return lm.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||Ev()}))})).next(Ib)}}]),e}();function wb(e){return ey(e,"collectionParents")}function bb(e){return ey(e,"indexEntries")}function _b(e){return ey(e,"indexConfiguration")}function xb(e){return ey(e,"indexState")}function Ib(e){Sv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;am(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new im(t.readTime,t.documentKey,n)}var Eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sb=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Tb(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Sv(1===s)})));var c,l=[],h=T(n.mutations);try{for(h.s();!(c=h.n()).done;){var d=c.value,f=Pm(t,d.key.path,n.batchId);a.push(i.delete(f)),l.push(d.key)}}catch(p){h.e(p)}finally{h.f()}return lm.waitFor(a).next((function(){return l}))}function Cb(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ev();t=e.noDocument}return JSON.stringify(t).length}Sb.DEFAULT_COLLECTION_PERCENTILE=10,Sb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sb.DEFAULT=new Sb(41943040,Sb.DEFAULT_COLLECTION_PERCENTILE,Sb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sb.DISABLED=new Sb(-1,0,0);var Nb=function(){function e(t,n,r,i){f(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.pn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ab(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Pb(e),o=Ab(e);return o.add({}).next((function(s){Sv("number"==typeof s);var u,c=new Lk(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return gw(e.se,t)})),i=n.mutations.map((function(t){return gw(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],d=new sy((function(e,t){return Bv(e.canonicalString(),t.canonicalString())})),f=T(r);try{for(f.s();!(u=f.n()).done;){var p=u.value,v=Pm(i.userId,p.key.path,s);d=d.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Rm))}}catch(m){f.e(m)}finally{f.f()}return d.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[s]=c.keys()})),lm.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ab(e).get(t).next((function(e){return e?(Sv(e.userId===n.userId),Fw(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?lm.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ab(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Sv(t.batchId>=r),a=Fw(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ab(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ab(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Fw(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Am(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Pb(e).Z({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],h=s[2],d=Nm(c);if(u===n.userId&&t.path.isEqual(d))return Ab(e).get(h).next((function(e){if(!e)throw Ev();Sv(e.userId===n.userId),a.push(Fw(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sy(Bv),i=[];return t.forEach((function(t){var a=Am(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Pb(e).Z({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],h=Nm(u);s===n.userId&&t.path.isEqual(h)?r=r.add(c):a.done()}));i.push(s)})),lm.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Am(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new sy(Bv);return Pb(e).Z({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],h=o[2],d=Nm(c);u===n.userId&&r.isPrefixOf(d)?d.length===i&&(s=s.add(h)):a.done()})).next((function(){return n.Tn(e,s)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ab(e).get(t).next((function(e){if(null===e)throw Ev();Sv(e.userId===n.userId),r.push(Fw(n.serializer,e))})))})),lm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Tb(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),lm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return lm.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Pb(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Nm(e[1]);i.push(a)}else r.done()})).next((function(){Sv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return jb(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return Rb(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return Sv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function jb(e,t,n){var r=Am(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Pb(e).Z({range:a,Y:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Ab(e){return ey(e,"mutations")}function Pb(e){return ey(e,"documentMutations")}function Rb(e){return ey(e,"mutationQueues")}var Db=function(){function e(t){f(this,e),this.Rn=t}return y(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),Ob=function(){function e(t,n){f(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new Db(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return Hv.fromTimestamp(new Wv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Lb(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return Sv(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Lb(e).Z((function(o,s){var u=Uw(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return lm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Lb(e).Z((function(e,n){var r=Uw(n);t(r)}))}},{key:"Pn",value:function(e){return Mb(e).get("targetGlobalKey").next((function(e){return Sv(null!==e),e}))}},{key:"Vn",value:function(e,t){return Mb(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return Lb(e).put(Vw(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=gg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Lb(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Uw(n);kg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Fb(e);return t.forEach((function(t){var o=Sm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),lm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Fb(e);return lm.forEach(t,(function(t){var a=Sm(t.path);return lm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Fb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fb(e),i=Zg();return r.Z({range:n,Y:!0},(function(e,t,n){var r=Nm(e[1]),a=new Jv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Sm(t.path),r=IDBKeyRange.bound([n],[zv(n)],!1,!0),i=0;return Fb(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return Lb(e).get(t).next((function(e){return e?Uw(e):null}))}}]),e}();function Lb(e){return ey(e,"targets")}function Mb(e){return ey(e,"targetGlobal")}function Fb(e){return ey(e,"targetDocuments")}function Ub(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=Bv(r,o);return 0===u?Bv(i,s):u}var Vb=function(){function e(t){f(this,e),this.Cn=t,this.buffer=new sy(Ub),this.xn=0}return y(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ub(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Bb=function(){function e(t,n,r){f(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;bv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!vm(e.t0)){e.next=12;break}bv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,um(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),qb=function(){function e(t,n){f(this,e),this.Mn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return lm.resolve(_m.ct);var r=new Vb(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(bv("LruGarbageCollector","Garbage collection skipped; disabled"),lm.resolve(Eb)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(bv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Eb):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(bv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),wv()<=on.DEBUG&&bv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),lm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),zb=function(){function e(t,n){f(this,e),this.db=t,this.garbageCollector=function(e,t){return new qb(e,t)}(this,n)}return y(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Wb(e,n)}},{key:"removeReference",value:function(e,t,n){return Wb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Wb(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return Rb(e).X((function(r){return jb(e,r,t).next((function(e){return e&&(n=!0),lm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,s){if(s<=t){var u=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Hv.min()),Fb(e).delete([0,Sm(o.path)])}))}));i.push(u)}})).next((function(){return lm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Wb(e,t)}},{key:"Un",value:function(e,t){var n,r=Fb(e),i=_m.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==_m.ct&&t(new Jv(Nm(n)),i),i=u,n=s):i=_m.ct})).next((function(){i!==_m.ct&&t(new Jv(Nm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Wb(e,t){return Fb(e).put(function(e,t){return{targetId:0,path:Sm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Hb=function(){function e(){f(this,e),this.changes=new qg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Hy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?lm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Gb=function(){function e(t){f(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Jb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Jb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ow(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Hy.newInvalidDocument(t);return Jb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($b(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:Hy.newInvalidDocument(t)};return Jb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($b(t))},(function(e,i){r={document:n.Qn(t,i),size:Cb(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Wg();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=Wg(),i=new iy(Jv.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,Cb(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return lm.resolve();var r=new sy(Zb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound($b(r.first()),$b(r.last())),a=r.getIterator(),o=a.getNext();return Jb(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Jv.fromSegments([].concat(d(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Zb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G($b(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Ow(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jb(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=Wg(),o=T(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.Qn(Jv.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(Fg(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Wg(),o=Xb(t,n),s=Xb(t,im.max());return Jb(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.Qn(Jv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Qb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Yb(e).get("remoteDocumentGlobalKey").next((function(e){return Sv(!!e),e}))}},{key:"Gn",value:function(e,t){return Yb(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=mw(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Jv.fromSegments(t.noDocument.path),i=Mw(t.noDocument.readTime);n=Hy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ev();var a=Jv.fromSegments(t.unknownDocument.path),o=Mw(t.unknownDocument.version);n=Hy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Wv(e[0],e[1]);return Hv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Hv.min()))return n}return Hy.newInvalidDocument(e)}}]),e}();function Kb(e){return new Gb(e)}var Qb=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Jn=e,i.trackRemovals=r,i.Yn=new qg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new sy((function(e,t){return Bv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=Dw(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=Cb(u);r+=c-s.size,n.push(t.Jn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=Dw(t.Jn.serializer,o.convertToNoDocument(Hv.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),lm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Hb);function Yb(e){return ey(e,"remoteDocumentGlobal")}function Jb(e){return ey(e,"remoteDocumentsV14")}function $b(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xb(e,t){var n=t.documentKey.path.toArray();return[e,Ow(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Bv(n[a],r[a]))return i;return(i=Bv(n.length,r.length))||((i=Bv(n[n.length-2],r[r.length-2]))||Bv(n[n.length-1],r[r.length-1]))}var e_=y((function e(t,n){f(this,e),this.overlayedDocument=t,this.mutatedFields=n})),t_=function(){function e(t,n,r,i){f(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Ik(r.mutation,e,ly.empty(),Wv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Zg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zg(),i=Qg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Gg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Qg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Zg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Wg(),a=Jg(),o=Jg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ck)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Ik(o.mutation,t,o.mutation.getFieldMask(),Wv.now())):a.set(t.key,ly.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new e_(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Jg(),i=new iy((function(e,t){return e-t})),a=Zg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=T(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ly.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Zg()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Yg();c.forEach((function(e){if(!a.has(e)){var n=_k(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return lm.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):lm.resolve(Qg()),s=-1,u=a;return o.next((function(t){return lm.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?lm.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Zg())})).next((function(e){return{batchId:s,changes:Kg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Jv(t)).next((function(e){var t=Gg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Gg();return this.indexManager.getCollectionParents(e,i).next((function(o){return lm.forEach(o,(function(o){var s=function(e,t){return new Ig(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hy.newInvalidDocument(r)))}));var n=Gg();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Ik(a.mutation,i,ly.empty(),Wv.now()),Fg(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),n_=function(){function e(t){f(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return lm.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:ow(n.createTime)}),lm.resolve()}},{key:"getNamedQuery",value:function(e,t){return lm.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:Bw(e.bundledQuery),readTime:ow(e.readTime)}}(t)),lm.resolve()}}]),e}(),r_=function(){function e(){f(this,e),this.overlays=new iy(Jv.comparator),this.ts=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return lm.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qg();return lm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),lm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),lm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Qg(),i=t.length+1,a=new Jv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return lm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new iy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Qg(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Qg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return lm.resolve(u)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Fk(t,n));var a=this.ts.get(t);void 0===a&&(a=Zg(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),i_=function(){function e(){f(this,e),this.es=new sy(a_.ns),this.ss=new sy(a_.rs)}return y(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new a_(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new a_(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new Jv(new Kv([])),r=new a_(n,e),i=new a_(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new Jv(new Kv([])),n=new a_(t,e),r=new a_(t,e+1),i=Zg();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new a_(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),a_=function(){function e(t,n){f(this,e),this.key=t,this.ds=n}return y(e,null,[{key:"ns",value:function(e,t){return Jv.comparator(e.key,t.key)||Bv(e.ds,t.ds)}},{key:"rs",value:function(e,t){return Bv(e.ds,t.ds)||Jv.comparator(e.key,t.key)}}]),e}(),o_=function(){function e(t,n){f(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new sy(a_.ns)}return y(e,[{key:"checkEmpty",value:function(e){return lm.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Lk(i,t,n,r);this.mutationQueue.push(a);var o,s=T(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this._s=this._s.add(new a_(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return lm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return lm.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return lm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return lm.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return lm.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new a_(t,0),i=new a_(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),lm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sy(Bv);return t.forEach((function(e){var t=new a_(e,0),i=new a_(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),lm.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Jv.isDocumentKey(i)||(i=i.child(""));var a=new a_(new Jv(i),0),o=new sy(Bv);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),lm.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Sv(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return lm.forEach(t.mutations,(function(i){var a=new a_(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new a_(t,0),r=this._s.firstAfterOrEqual(n);return lm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,lm.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),s_=function(){function e(t){f(this,e),this.Ts=t,this.docs=new iy(Jv.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return lm.resolve(n?n.document.mutableCopy():Hy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Wg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Hy.newInvalidDocument(e))})),lm.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Wg(),a=t.path,o=new Jv(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||am(rm(l),n)<=0||(r.has(l.key)||Fg(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return lm.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ev()}},{key:"Es",value:function(e,t){return lm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new u_(this)}},{key:"getSize",value:function(e){return lm.resolve(this.size)}}]),e}(),u_=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).Jn=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),lm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(Hb),c_=function(){function e(t){f(this,e),this.persistence=t,this.As=new qg((function(e){return gg(e)}),kg),this.lastRemoteSnapshotVersion=Hv.min(),this.highestTargetId=0,this.Rs=0,this.vs=new i_,this.targetCount=0,this.bs=Db.vn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),lm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return lm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return lm.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),lm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),lm.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Db(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,lm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),lm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,lm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),lm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return lm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return lm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),lm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),lm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),lm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return lm.resolve(n)}},{key:"containsKey",value:function(e,t){return lm.resolve(this.vs.containsKey(t))}}]),e}(),l_=function(){function e(t,n){var r=this;f(this,e),this.Ps={},this.overlays={},this.Vs=new _m(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new c_(this),this.indexManager=new mb,this.remoteDocumentCache=new s_((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new Rw(n),this.xs=new n_(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new r_,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new o_(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;bv("MemoryPersistence","Starting transaction:",e);var i=new h_(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return lm.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),h_=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(sm),d_=function(){function e(t){f(this,e),this.persistence=t,this.$s=new i_,this.Ms=null}return y(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Ev()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),lm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),lm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),lm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lm.forEach(this.Bs,(function(r){var i=Jv.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,Hv.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return lm.or([function(){return lm.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),f_=function(){function e(t){f(this,e),this.serializer=t}return y(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new hm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jm,{unique:!0}),e.createObjectStore("documentMutations")}(e),p_(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=lm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),p_(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return lm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Hm});t.createIndex("collectionPathOverlayIndex",Gm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Km,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Dm});t.createIndex("documentKeyIndex",Om),t.createIndex("collectionGroupIndex",Lm)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Bm}).createIndex("sequenceNumberIndex",qm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:zm}).createIndex("documentKeyIndex",Wm,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Cb(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return lm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return lm.forEach(r,(function(r){Sv(r.userId===n.userId);var i=Fw(t.serializer,r);return Tb(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Kv(n),o=function(e){return[0,Sm(e)]}(a);r.push(t.get(o).next((function(n){return n?lm.resolve():function(n){return t.put({targetId:0,path:Sm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return lm.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Vm});var n=t.store("collectionParents"),r=new yb,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Sm(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Kv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Nm(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Uw(r),a=Vw(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Jv(Kv.fromString(i.document.name).popFirst(5)):i.noDocument?Jv.fromSegments(i.noDocument.path):i.unknownDocument?Jv.fromSegments(i.unknownDocument.path):Ev()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return lm.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=Kb(this.serializer),a=new l_(d_.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Zg();Fw(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),lm.forEach(r,(function(e,r){var o=new yv(r),s=Qw.ie(n.serializer,o),u=a.getIndexManager(o),c=Nb.ie(o,n.serializer,u,a.referenceDelegate);return new t_(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new Zm(t,_m.ct),e).next()}))}))}}]),e}();function p_(e){e.createObjectStore("targetDocuments",{keyPath:Fm}).createIndex("documentTargetsIndex",Um,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mm,{unique:!0}),e.createObjectStore("targetGlobal")}var v_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",m_=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(f(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=a,this.window=o,this.document=s,this.Hs=c,this.Js=l,this.Ys=h,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new Nv(Cv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zb(this,i),this.si=n+"main",this.serializer=new Rw(u),this.ii=new dm(this.si,this.Ys,new f_(this.serializer)),this.Ds=new Ob(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kb(this.serializer),this.xs=new Hw,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&_v("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Nv(Cv.FAILED_PRECONDITION,v_);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new _m(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=en(Xt().mark((function n(r){return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=en(Xt().mark((function t(n){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return g_(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(vm(t))return bv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return bv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return y_(e).get("owner").next((function(e){return lm.resolve(t._i(e))}))}},{key:"mi",value:function(e){return g_(e).delete(this.clientId)}},{key:"gi",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i,a=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ey(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return lm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?lm.resolve(!0):y_(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new Nv(Cv.FAILED_PRECONDITION,v_);return!1}}return!(!t.networkEnabled||!t.inForeground)||g_(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&bv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=en(Xt().mark((function e(){var t=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Zm(e,_m.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return g_(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return Nb.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new kb(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Qw.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;bv("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.Ys)?Xm:14===i?$m:13===i?Jm:12===i?Ym:11===i?Qm:void Ev();return this.ii.runTransaction(e,o,s,(function(i){return a=new Zm(i,r.Vs?r.Vs.next():_m.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw _v("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new Nv(Cv.FAILED_PRECONDITION,om);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return y_(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Nv(Cv.FAILED_PRECONDITION,v_)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return y_(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=y_(e);return n.get("owner").next((function(e){return t._i(e)?(bv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):lm.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(_v("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!bt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return bv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return _v("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(Eh){_v("Failed to set zombie client id.",Eh)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(Eh){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return dm.D()}}]),e}();function y_(e){return ey(e,"owner")}function g_(e){return ey(e,"clientMetadata")}function k_(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var w_=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return y(e,null,[{key:"Di",value:function(t,n){var r,i=Zg(),a=Zg(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),b_=function(){function e(){f(this,e),this.Ci=!1}return y(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(Tg(t))return lm.resolve(null);var r=Pg(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Dg(t,null,"F"),r=Pg(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Zg.apply(void 0,d(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,Dg(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return Tg(t)||r.isEqual(Hv.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(wv()<=on.DEBUG&&bv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mg(t)),i.Fi(e,o,t,nm(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new sy(Vg(e));return t.forEach((function(t,r){Fg(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return wv()<=on.DEBUG&&bv("QueryEngine","Using full collection scan to execute query:",Mg(t)),this.xi.getDocumentsMatchingQuery(e,t,im.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),__=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new iy(Bv),this.qi=new qg((function(e){return gg(e)}),kg),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return y(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t_(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function x_(e,t,n,r){return new __(e,t,n,r)}function I_(e,t){return E_.apply(this,arguments)}function E_(){return E_=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Zg(),u=T(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=T(c.mutations);try{for(h.s();!(l=h.n()).done;){var d=l.value;s=s.add(d.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var f,p=T(n);try{for(p.s();!(f=p.n()).done;){var v=f.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function S_(e,t){var n=Tv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=lm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Sv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Zg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function T_(e){var t=Tv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function C_(e,t){var n=Tv(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(dy.EMPTY_BYTE_STRING,Hv.min()).withLastLimboFreeSnapshotVersion(Hv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var s=Wg(),u=Zg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(N_(e,a,t.documentUpdates).next((function(e){s=e.zi,u=e.ji}))),!r.isEqual(Hv.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return lm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Li=i,e}))}function N_(e,t,n){var r=Zg(),i=Zg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Wg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Hv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):bv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function j_(e,t){var n=Tv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function A_(e,t){var n=Tv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,lm.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new Pw(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function P_(e,t,n){return R_.apply(this,arguments)}function R_(){return R_=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Tv(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),vm(e.t1)){e.next=12;break}throw e.t1;case 12:bv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),R_.apply(this,arguments)}function D_(e,t,n){var r=Tv(e),i=Hv.min(),a=Zg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Tv(e),i=r.qi.get(n);return void 0!==i?lm.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,Pg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:Hv.min(),n?a:Zg())})).next((function(e){return M_(r,Ug(t),e),{documents:e,Wi:a}}))}))}function O_(e,t){var n=Tv(e),r=Tv(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function L_(e,t){var n=Tv(e),r=n.Ui.get(t)||Hv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,nm(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return M_(n,t,e),e}))}function M_(e,t,n){var r=e.Ui.get(t)||Hv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function F_(e,t,n,r){return U_.apply(this,arguments)}function U_(){return U_=en(Xt().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,d,f,p;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Tv(t),o=Zg(),s=Wg(),u=T(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.Hi(l.metadata.name),l.document&&(o=o.add(h)),(d=n.Ji(l)).setReadTime(n.Yi(l.metadata.readTime)),s=s.insert(h,d)}catch(v){u.e(v)}finally{u.f()}return f=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,A_(a,function(e){return Pg(Sg(Kv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return N_(e,f,s).next((function(t){return f.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function V_(e,t){return B_.apply(this,arguments)}function B_(){return B_=en(Xt().mark((function e(t,n){var r,i,a,o=arguments;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Zg(),e.next=3,A_(t,Pg(Bw(n.bundledQuery)));case 3:return i=e.sent,a=Tv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ow(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(dy.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),B_.apply(this,arguments)}function q_(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function z_(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function W_(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var H_=function(){function e(t,n,r,i){f(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Nv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(_v("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),G_=function(){function e(t,n,r){f(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Nv(i.error.code,i.error.message))),a?new e(t,i.state,r):(_v("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),K_=function(){function e(t,n){f(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tk(),o=0;i&&o<r.activeTargetIds.length;++o)i=Em(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(_v("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Q_=function(){function e(t,n){f(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(_v("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Y_=function(){function e(){f(this,e),this.activeTargetIds=tk()}return y(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),J_=function(){function e(t,n,r,i,a){f(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new iy(Bv),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=q_(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new Y_),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return y(e,[{key:"start",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,d=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(q_(this.persistenceKey,i)))&&(o=K_.Zi(i,a))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(s=this.storage.getItem(this.wr))&&(u=this.gr(s))&&this.yr(u),c=T(this.ur);try{for(c.s();!(l=c.n()).done;)h=l.value,this.ir(h)}catch(f){c.e(f)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(W_(this.persistenceKey,e));if(n){var r=G_.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(W_(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return bv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){bv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){bv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(bv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void _v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(en(Xt().mark((function e(){var r,i,a,o,s,u,c;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}u=function(e){var t=_m.ct;if(null!=e)try{var n=JSON.parse(e);Sv("number"==typeof n),t=n}catch(e){_v("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==_m.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new H_(this.currentUser,e,t,n),i=z_(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=z_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=W_(this.persistenceKey,e),i=new G_(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return K_.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return H_.Zi(new yv(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return G_.Zi(r,t)}},{key:"gr",value:function(e){return Q_.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:bv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Fr(o,s).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=tk();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),$_=function(){function e(){f(this,e),this.Br=new Y_,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new Y_,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),X_=function(){function e(){f(this,e)}return y(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Z_=function(){function e(){var t=this;f(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return y(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){bv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){bv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ex=null;function tx(){return null===ex?ex=268435456+Math.round(2147483648*Math.random()):ex++,"0x"+ex.toString(16)}var nx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},rx=function(){function e(t){f(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return y(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),ix="WebChannelConnection",ax=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"lo",value:function(e,t,n,r){var i=tx();return new Promise((function(a,o){var s=new vv;s.setWithCredentials(!0),s.listenOnce(lv.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case cv.NO_ERROR:var t=s.getResponseJson();bv(ix,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case cv.TIMEOUT:bv(ix,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Nv(Cv.DEADLINE_EXCEEDED,"Request time out"));break;case cv.HTTP_ERROR:var n=s.getStatus();if(bv(ix,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Cv).indexOf(t)>=0?t:Cv.UNKNOWN}(u.status);o(new Nv(c,u.message))}else o(new Nv(Cv.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Nv(Cv.UNAVAILABLE,"Connection failed."));break;default:Ev()}}finally{bv(ix,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);bv(ix,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=tx(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sv(),o=uv(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new fv({})),this.ho(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var u=i.join("");bv(ix,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);var c=a.createWebChannel(u,s),l=!1,h=!1,d=new rx({Wr:function(t){h?bv(ix,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(bv(ix,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),bv(ix,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(c,pv.EventType.OPEN,(function(){h||bv(ix,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),f(c,pv.EventType.CLOSE,(function(){h||(h=!0,bv(ix,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.so())})),f(c,pv.EventType.ERROR,(function(t){h||(h=!0,xv(ix,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.so(new Nv(Cv.UNAVAILABLE,"The operation could not be completed")))})),f(c,pv.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Sv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){bv(ix,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Pk[e];if(void 0!==t)return Bk(t)}(s),l=o.message;void 0===u&&(u=Cv.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),h=!0,d.so(new Nv(u,l)),c.close()}else bv(ix,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.io(i)}})),f(o,hv.STAT_EVENT,(function(t){t.stat===dv.PROXY?bv(ix,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===dv.NOPROXY&&bv(ix,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.no()}),0),d}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=tx(),o=this.ao(e,t);bv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.ho(s,r,i),this.lo(e,o,s,n).then((function(t){return bv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw xv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=nx[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function ox(){return"undefined"!=typeof window?window:null}function sx(){return"undefined"!=typeof document?document:null}function ux(e){return new nw(e,!0)}var cx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&bv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),lx=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new cx(t,n)}return y(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===Cv.RESOURCE_EXHAUSTED?(_v(n.toString()),_v("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===Cv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new Nv(Cv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return bv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(bv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),hx=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return y(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ev()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Sv(void 0===t||"string"==typeof t),dy.fromBase64String(t||"")):(Sv(void 0===t||t instanceof Uint8Array),dy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Cv.UNKNOWN:Bk(e.code);return new Nv(t,e.message||"")}(o);n=new Qk(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=lw(e,u.document.name),l=ow(u.document.updateTime),h=u.document.createTime?ow(u.document.createTime):Hv.min(),d=new zy({mapValue:{fields:u.document.fields}}),f=Hy.newFoundDocument(c,l,h,d),p=u.targetIds||[],v=u.removedTargetIds||[];n=new Gk(p,v,f.key,f)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=lw(e,m.document),g=m.readTime?ow(m.readTime):Hv.min(),k=Hy.newNoDocument(y,g),w=m.removedTargetIds||[];n=new Gk([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=lw(e,b.document),x=b.removedTargetIds||[];n=new Gk([],x,_,null)}else{if(!("filter"in t))return Ev();t.filter;var I=t.filter;I.targetId;var E=I.count||0,S=new Uk(E),T=I.targetId;n=new Kk(T,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Hv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Hv.min():t.readTime?ow(t.readTime):Hv.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=fw(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=wg(r)?{documents:ww(e,r)}:{query:bw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=iw(e,t.resumeToken):t.snapshotVersion.compareTo(Hv.min())>0&&(n.readTime=rw(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ev()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=fw(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(lx),dx=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.Ho=!1,u}return y(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,Dr(w(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Sv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Sv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ow(e.updateTime):ow(t);return n.isEqual(Hv.min())&&(n=ow(t)),new gk(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ow(e.commitTime);return this.listener.Zo(n,t)}return Sv(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=fw(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return gw(t.serializer,e)}))};this.Fo(n)}}]),n}(lx),fx=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return y(n,[{key:"nu",value:function(){if(this.eu)throw new Nv(Cv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.connection.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Nv(Cv.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.connection.fo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Nv(Cv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return y((function e(){f(this,e)}))}());var px=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return y(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(_v(t),this.ru=!1):bv("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),vx=y((function e(t,n,r,i,a){var o=this;f(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Sx(o),!e.t0){e.next=5;break}return bv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Tv(t)).du.add(4),e.next=4,gx(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,mx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new px(r,i)}));function mx(e){return yx.apply(this,arguments)}function yx(){return yx=en(Xt().mark((function e(t){var n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sx(t)){e.next=18;break}n=T(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),yx.apply(this,arguments)}function gx(e){return kx.apply(this,arguments)}function kx(){return kx=en(Xt().mark((function e(t){var n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),kx.apply(this,arguments)}function wx(e,t){var n=Tv(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),Ex(n)?Ix(n):tI(n).No()&&_x(n,t))}function bx(e,t){var n=Tv(e),r=tI(n);n.fu.delete(t),r.No()&&xx(n,t),0===n.fu.size&&(r.No()?r.$o():Sx(n)&&n.mu.set("Unknown"))}function _x(e,t){e.gu.Ot(t.targetId),tI(e).jo(t)}function xx(e,t){e.gu.Ot(t),tI(e).Wo(t)}function Ix(e){e.gu=new Jk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),tI(e).start(),e.mu.ou()}function Ex(e){return Sx(e)&&!tI(e).xo()&&e.fu.size>0}function Sx(e){return 0===Tv(e).du.size}function Tx(e){e.gu=void 0}function Cx(e){return Nx.apply(this,arguments)}function Nx(){return Nx=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){_x(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function jx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tx(t),Ex(t)?(t.mu.au(n),Ix(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Px(e,t,n){return Rx.apply(this,arguments)}function Rx(){return Rx=en(Xt().mark((function e(t,n,r){var i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof Qk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),bv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Dx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gk?t.gu.Kt(n):n instanceof Kk?t.gu.Jt(n):t.gu.zt(n),r.isEqual(Hv.min())){e.next=29;break}return e.prev=14,e.next=17,T_(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(dy.EMPTY_BYTE_STRING,n.snapshotVersion)),xx(e,t);var r=new Pw(n.target,t,1,n.sequenceNumber);_x(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),bv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Dx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Rx.apply(this,arguments)}function Dx(e,t,n){return Ox.apply(this,arguments)}function Ox(){return Ox=en(Xt().mark((function e(t,n,r){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vm(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,gx(t);case 5:t.mu.set("Offline"),r||(r=function(){return T_(t.localStore)}),t.asyncQueue.enqueueRetryable(en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,mx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Lx(e,t){return t().catch((function(n){return Dx(e,n,t)}))}function Mx(e){return Fx.apply(this,arguments)}function Fx(){return Fx=en(Xt().mark((function e(t){var n,r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Tv(t),r=nI(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!Ux(n)){e.next=19;break}return e.prev=3,e.next=6,j_(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Vx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Dx(n,e.t0);case 17:e.next=2;break;case 19:Bx(n)&&qx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Fx.apply(this,arguments)}function Ux(e){return Sx(e)&&e.lu.length<10}function Vx(e,t){e.lu.push(t);var n=nI(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function Bx(e){return Sx(e)&&!nI(e).xo()&&e.lu.length>0}function qx(e){nI(e).start()}function zx(e){return Wx.apply(this,arguments)}function Wx(){return Wx=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nI(t).tu();case 1:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Hx(e){return Gx.apply(this,arguments)}function Gx(){return Gx=en(Xt().mark((function e(t){var n,r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nI(t),r=T(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}function Kx(e,t,n){return Qx.apply(this,arguments)}function Qx(){return Qx=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=Mk.from(i,n,r),e.next=3,Lx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Mx(t);case 5:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}function Yx(e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=en(Xt().mark((function e(t,n){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nI(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Vk(i=n.code)||i===Cv.ABORTED){e.next=7;break}return r=t.lu.shift(),nI(t).Oo(),e.next=5,Lx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Mx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Bx(t)&&qx(t);case 5:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}function $x(e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Tv(t)).asyncQueue.verifyOperationInProgress(),bv("RemoteStore","RemoteStore received new credentials"),i=Sx(r),r.du.add(3),e.next=6,gx(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,mx(r);case 12:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Zx(e,t){return eI.apply(this,arguments)}function eI(){return eI=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tv(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,mx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,gx(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}function tI(e){return e.yu||(e.yu=function(e,t,n){var r=Tv(e);return r.nu(),new hx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:Cx.bind(null,e),Zr:jx.bind(null,e),zo:Px.bind(null,e)}),e.wu.push(function(){var t=en(Xt().mark((function t(n){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),Ex(e)?Ix(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:Tx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function nI(e){return e.pu||(e.pu=function(e,t,n){var r=Tv(e);return r.nu(),new dx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:zx.bind(null,e),Zr:Yx.bind(null,e),Xo:Hx.bind(null,e),Zo:Kx.bind(null,e)}),e.wu.push(function(){var t=en(Xt().mark((function t(n){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,Mx(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(bv("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var rI=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new jv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nv(Cv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function iI(e,t){if(_v("AsyncQueue","".concat(t,": ").concat(e)),vm(e))return new Nv(Cv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var aI=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||Jv.comparator(e.key,n.key)}:function(e,t){return Jv.comparator(e.key,t.key)},this.keyedMap=Gg(),this.sortedSet=new iy(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),oI=function(){function e(){f(this,e),this.Iu=new iy(Jv.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Ev():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sI=function(){function e(t,n,r,i,a,o,s,u,c){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Og(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,aI.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),uI=y((function e(){f(this,e),this.Eu=void 0,this.listeners=[]})),cI=y((function e(){f(this,e),this.queries=new qg((function(e){return Lg(e)}),Og),this.onlineState="Unknown",this.Au=new Set}));function lI(e,t){return hI.apply(this,arguments)}function hI(){return hI=en(Xt().mark((function e(t,n){var r,i,a,o,s;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new uI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=iI(e.t0,"Initialization of query '".concat(Mg(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&mI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),hI.apply(this,arguments)}function dI(e,t){return fI.apply(this,arguments)}function fI(){return fI=en(Xt().mark((function e(t,n){var r,i,a,o,s;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function pI(e,t){var n,r=Tv(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=T(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Eu=o}}}catch(h){a.e(h)}finally{a.f()}i&&mI(r)}function vI(e,t,n){var r=Tv(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function mI(e){e.Au.forEach((function(e){e.next()}))}var yI=function(){function e(t,n,r){f(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=sI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),gI=function(){function e(t,n){f(this,e),this.Nu=t,this.byteLength=n}return y(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),kI=function(){function e(t){f(this,e),this.serializer=t}return y(e,[{key:"Hi",value:function(e){return lw(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?mw(this.serializer,e.document,!1):Hy.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return ow(e)}}]),e}(),wI=function(){function e(t,n,r){f(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bI(t)}return y(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=Kv.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new kI(this.serializer),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Hi(a.metadata.name),u=T(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Zg()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F_(this.localStore,new kI(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,V_(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function bI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var _I=y((function e(t){f(this,e),this.key=t})),xI=y((function e(t){f(this,e),this.key=t})),II=function(){function e(t,n){f(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Zg(),this.mutatedKeys=Zg(),this.Ku=Vg(t),this.Gu=new aI(this.Ku)}return y(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new oI,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Fg(n.query,t)?t:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Wu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Ku(h,u)>0||c&&n.Ku(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=f?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:s,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ev()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],s=0===this.Uu.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new sI(this.query,e.Gu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new oI,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=Zg(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new xI(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new _I(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=Zg();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return sI.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),EI=y((function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r})),SI=y((function e(t){f(this,e),this.key=t,this.ec=!1})),TI=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new qg((function(e){return Lg(e)}),Og),this.ic=new Map,this.rc=new Set,this.oc=new iy(Jv.comparator),this.uc=new Map,this.cc=new i_,this.ac={},this.hc=new Map,this.lc=Db.bn(),this.onlineState="Unknown",this.fc=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function CI(e,t){return NI.apply(this,arguments)}function NI(){return NI=en(Xt().mark((function e(t,n){var r,i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bE(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,A_(r.localStore,Pg(n));case 8:return s=e.sent,r.isPrimaryClient&&wx(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,jI(r,n,i,"current"===u,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),NI.apply(this,arguments)}function jI(e,t,n,r,i){return AI.apply(this,arguments)}function AI(){return AI=en(Xt().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=en(Xt().mark((function e(t,n,r,i){var a,o,s;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,D_(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",($I(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,D_(t.localStore,n,!0);case 3:return o=e.sent,s=new II(n,o.Wi),u=s.zu(o.documents),c=Hk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),$I(t,r,l.Yu),h=new EI(n,r,s),e.abrupt("return",(t.sc.set(n,h),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),AI.apply(this,arguments)}function PI(e,t){return RI.apply(this,arguments)}function RI(){return RI=en(Xt().mark((function e(t,n){var r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tv(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Og(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,P_(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),bx(r.remoteStore,i.targetId),YI(r,i.targetId)})).catch(um);case 9:e.next=14;break;case 11:return YI(r,i.targetId),e.next=14,P_(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),RI.apply(this,arguments)}function DI(e,t,n){return OI.apply(this,arguments)}function OI(){return OI=en(Xt().mark((function e(t,n,r){var i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_E(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Tv(e),a=Wv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Zg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Wg(),u=Zg();return i.Ki.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=T(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Ek(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Ck(c.key,l,Wy(l.value.mapValue),kk.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Kg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new iy(Bv)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,eE(i,a.changes);case 9:return e.next=11,Mx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=iI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),OI.apply(this,arguments)}function LI(e,t){return MI.apply(this,arguments)}function MI(){return MI=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),e.prev=1,e.next=4,C_(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Sv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Sv(n.ec):e.removedDocuments.size>0&&(Sv(n.ec),n.ec=!1))})),e.next=8,eE(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,um(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),MI.apply(this,arguments)}function FI(e,t,n){var r=Tv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Tv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mI(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function UI(e,t,n){return VI.apply(this,arguments)}function VI(){return VI=en(Xt().mark((function e(t,n,r){var i,a,o,s,u,c;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Tv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new iy(Jv.comparator)).insert(o,Hy.newNoDocument(o,Hv.min())),u=Zg().add(o),c=new Wk(Hv.min(),new Map,new sy(Bv),s,u),e.next=9,LI(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),ZI(i),e.next=16;break;case 14:return e.next=16,P_(i.localStore,n,!1).then((function(){return YI(i,n,r)})).catch(um);case 16:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function BI(e,t){return qI.apply(this,arguments)}function qI(){return qI=en(Xt().mark((function e(t,n){var r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),i=n.batch.batchId,e.prev=1,e.next=4,S_(r.localStore,n);case 4:return a=e.sent,QI(r,i,null),KI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,eE(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,um(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qI.apply(this,arguments)}function zI(e,t,n){return WI.apply(this,arguments)}function WI(){return WI=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tv(t),e.prev=1,e.next=4,function(e,t){var n=Tv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Sv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,QI(i,n,r),KI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,eE(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,um(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),WI.apply(this,arguments)}function HI(e,t){return GI.apply(this,arguments)}function GI(){return GI=en(Xt().mark((function e(t,n){var r,i,a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sx((r=Tv(t)).remoteStore)||bv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Tv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=iI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),GI.apply(this,arguments)}function KI(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function QI(e,t,n){var r=Tv(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function YI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||JI(e,t)}))}function JI(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(bx(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),ZI(e))}function $I(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof _I?(e.cc.addReference(a.key,t),XI(e,a)):a instanceof xI?(bv("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||JI(e,a.key)):Ev()}}catch(o){i.e(o)}finally{i.f()}}function XI(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(bv("SyncEngine","New document in limbo: "+n),e.rc.add(r),ZI(e))}function ZI(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Jv(Kv.fromString(t)),r=e.lc.next();e.uc.set(r,new SI(n)),e.oc=e.oc.insert(n,r),wx(e.remoteStore,new Pw(Pg(Sg(n.path)),r,2,_m.ct))}}function eE(e,t,n){return tE.apply(this,arguments)}function tE(){return tE=en(Xt().mark((function e(t,n,r){var i,a,o,s;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Tv(t),a=[],o=[],s=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){s.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=w_.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.nc.zo(a),e.next=9,function(){var e=en(Xt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return lm.forEach(n,(function(t){return lm.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return lm.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),vm(e.t0)){e.next=10;break}throw e.t0;case 10:bv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Li.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e,t){return rE.apply(this,arguments)}function rE(){return rE=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Tv(t)).currentUser.isEqual(n)){e.next=11;break}return bv("SyncEngine","User change. New user:",n.toKey()),e.next=5,I_(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new Nv(Cv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,eE(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t){var n=Tv(e),r=n.uc.get(t);if(r&&r.ec)return Zg().add(r.key);var i=Zg(),a=n.ic.get(t);if(!a)return i;var o,s=T(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.sc.get(u);i=i.unionWith(c.view.Qu)}}catch(l){s.e(l)}finally{s.f()}return i}function aE(e,t){return oE.apply(this,arguments)}function oE(){return oE=en(Xt().mark((function e(t,n){var r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),e.next=3,D_(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&$I(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function sE(e,t){return uE.apply(this,arguments)}function uE(){return uE=en(Xt().mark((function e(t,n){var r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),e.abrupt("return",L_(r.localStore,n).then((function(e){return eE(r,e)})));case 2:case"end":return e.stop()}}),e)}))),uE.apply(this,arguments)}function cE(e,t,n,r){return lE.apply(this,arguments)}function lE(){return lE=en(Xt().mark((function e(t,n,r,i){var a,o;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Tv(t),e.next=3,function(e,t){var n=Tv(e),r=Tv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):lm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Mx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(QI(a,n,i||null),KI(a,n),function(e,t){Tv(Tv(e).mutationQueue).En(t)}(a.localStore,n)):Ev();case 11:return e.next=13,eE(a,o);case 13:e.next=16;break;case 15:bv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}function hE(e,t){return dE.apply(this,arguments)}function dE(){return dE=en(Xt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bE(r=Tv(t)),_E(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,fE(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,Zx(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(s=o.n()).done;)u=s.value,wx(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return YI(r,t),P_(r.localStore,t,!0)})),bx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,fE(r,c);case 21:return function(e){var t=Tv(e);t.uc.forEach((function(e,n){bx(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new iy(Jv.comparator)}(r),r.fc=!1,e.next=25,Zx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),dE.apply(this,arguments)}function fE(e,t,n){return pE.apply(this,arguments)}function pE(){return pE=en(Xt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,f,p,v,m,y;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Tv(t),a=[],o=[],s=T(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ic.get(c))||0===h.length){e.next=34;break}return e.next=11,A_(i.localStore,Pg(h[0]));case 11:l=e.sent,d=T(h),e.prev=13,d.s();case 15:if((f=d.n()).done){e.next=24;break}return p=f.value,v=i.sc.get(p),e.next=20,aE(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,O_(i.localStore,c);case 36:return y=e.sent,e.next=39,A_(i.localStore,y);case 39:return l=e.sent,e.next=42,jI(i,vE(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),pE.apply(this,arguments)}function vE(e){return Eg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mE(e){var t=Tv(e);return Tv(Tv(t.localStore).persistence).bi()}function yE(e,t,n,r){return gE.apply(this,arguments)}function gE(){return gE=en(Xt().mark((function e(t,n,r,i){var a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Tv(t)).fc){e.next=3;break}return e.abrupt("return",void bv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,L_(a.localStore,Ug(o[0]));case 10:return s=e.sent,u=Wk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,dy.EMPTY_BYTE_STRING),e.next=14,eE(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,P_(a.localStore,n,!0);case 17:return YI(a,n,i),e.abrupt("break",20);case 19:Ev();case 20:case"end":return e.stop()}}),e)}))),gE.apply(this,arguments)}function kE(e,t,n){return wE.apply(this,arguments)}function wE(){return wE=en(Xt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=bE(t)).fc){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ic.has(s)){e.next=10;break}return bv("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,O_(i.localStore,s);case 12:return u=e.sent,e.next=15,A_(i.localStore,u);case 15:return c=e.sent,e.next=18,jI(i,vE(u),c.targetId,!1,c.resumeToken);case 18:wx(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,d=Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,P_(i.localStore,t,!1).then((function(){bx(i.remoteStore,t),YI(i,t)})).catch(um);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),wE.apply(this,arguments)}function bE(e){var t=Tv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=LI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=UI.bind(null,t),t.nc.zo=pI.bind(null,t.eventManager),t.nc.wc=vI.bind(null,t.eventManager),t}function _E(e){var t=Tv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zI.bind(null,t),t}function xE(e,t,n){var r=Tv(e);(function(){var e=en(Xt().mark((function e(t,n,r){var i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Tv(e),r=ow(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(bI(i)),a=new wI(i,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.$u(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,eE(t,u.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Tv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(xv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var IE=function(){function e(){f(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=ux(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return x_(this.persistence,new b_,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new l_(d_.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new $_}},{key:"terminate",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),EE=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).mc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=en(Xt().mark((function e(t){var r=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(w(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,_E(this.mc.syncEngine);case 6:return e.next=8,Mx(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return x_(this.persistence,new b_,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Bb(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new bm(t,this.persistence);return new wm(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Sb.withCacheSize(this.cacheSizeBytes):Sb.DEFAULT;return new m_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ox(),sx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new $_}}]),n}(IE),SE=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r,!1)).mc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=en(Xt().mark((function e(t){var r,i=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(w(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof J_,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:cE.bind(null,r),Mr:yE.bind(null,r),Fr:kE.bind(null,r),bi:mE.bind(null,r),Or:sE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hE(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=ox();if(!J_.D(t))throw new Nv(Cv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new J_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(EE),TE=function(){function e(){f(this,e)}return y(e,[{key:"initialize",value:function(){var e=en(Xt().mark((function e(t,n){var r=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return FI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nE.bind(null,this.syncEngine),e.next=12,Zx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cI}},{key:"createDatastore",value:function(e){var t,n=ux(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ax(t));return function(e,t,n,r){return new fx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return FI(o.syncEngine,e,0)},a=Z_.D()?new Z_:new X_,new vx(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new TI(e,t,n,r,i,a);return o&&(s.fc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tv(t),bv("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,gx(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function CE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return en(Xt().mark((function r(){var i;return Xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var NE=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):_v("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),jE=function(){function e(t,n){var r=this;f(this,e),this.Ic=t,this.serializer=n,this.metadata=new jv,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=en(Xt().mark((function e(){var t,n,r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new gI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=en(Xt().mark((function e(){var t,n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=en(Xt().mark((function e(){var t,n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),AE=function(){function e(t){f(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=en(Xt().mark((function e(t){var n,r=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Nv(Cv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=en(Xt().mark((function e(t,n){var r,i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),i=fw(r.serializer)+"/documents",a={documents:n.map((function(e){return cw(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=yw(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Sv(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Dk(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=en(Xt().mark((function e(){var t,n=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Jv.fromPath(t);n.mutations.push(new Ok(r,n.precondition(r)))})),e.next=7,function(){var e=en(Xt().mark((function e(t,n){var r,i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t),i=fw(r.serializer)+"/documents",a={writes:n.map((function(e){return gw(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ev();t=Hv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Nv(Cv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Hv.min())?kk.exists(!1):kk.updateTime(t):kk.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hv.min()))throw new Nv(Cv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kk.updateTime(t)}return kk.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),PE=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new cx(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(en(Xt().mark((function t(){var n,r;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new AE(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!xm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Vk(t)}return!1}}]),e}(),RE=function(){function e(t,n,r,i){var a=this;f(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yv.UNAUTHENTICATED,this.clientId=Vv.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return bv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=en(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Nv(Cv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new jv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(en(Xt().mark((function n(){var r;return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=iI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function DE(e,t){return OE.apply(this,arguments)}function OE(){return OE=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),bv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,I_(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),OE.apply(this,arguments)}function LE(e,t){return ME.apply(this,arguments)}function ME(){return ME=en(Xt().mark((function e(t,n){var r,i;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,UE(t);case 3:return r=e.sent,bv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return $x(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return $x(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e){return"FirebaseError"===e.name?e.code===Cv.FAILED_PRECONDITION||e.code===Cv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function UE(e){return VE.apply(this,arguments)}function VE(){return VE=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return bv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,DE(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),FE(n=e.t0)){e.next=13;break}throw n;case 13:return xv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,DE(t,new IE);case 16:e.next=21;break;case 18:return bv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,DE(t,new IE);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),VE.apply(this,arguments)}function BE(e){return qE.apply(this,arguments)}function qE(){return qE=en(Xt().mark((function e(t){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return bv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,LE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return bv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,LE(t,new TE);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function zE(e){return UE(e).then((function(e){return e.persistence}))}function WE(e){return UE(e).then((function(e){return e.localStore}))}function HE(e){return BE(e).then((function(e){return e.remoteStore}))}function GE(e){return BE(e).then((function(e){return e.syncEngine}))}function KE(e){return BE(e).then((function(e){return e.datastore}))}function QE(e){return YE.apply(this,arguments)}function YE(){return YE=en(Xt().mark((function e(t){var n,r;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=CI.bind(null,n.syncEngine),r.onUnlisten=PI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),YE.apply(this,arguments)}function JE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new jv;return e.asyncQueue.enqueueAndForget(en(Xt().mark((function i(){return Xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new NE({next:function(a){t.enqueueAndForget((function(){return dI(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Nv(Cv.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Nv(Cv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new yI(Sg(n.path),a,{includeMetadataChanges:!0,xu:!0});return lI(e,o)},i.next=3,QE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new jv;return e.asyncQueue.enqueueAndForget(en(Xt().mark((function i(){return Xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new NE({next:function(n){t.enqueueAndForget((function(){return dI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Nv(Cv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new yI(n,a,{includeMetadataChanges:!0,xu:!0});return lI(e,o)},i.next=3,QE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var XE=new Map;function ZE(e,t,n){if(!n)throw new Nv(Cv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function eS(e,t,n,r){if(!0===t&&!0===r)throw new Nv(Cv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function tS(e){if(!Jv.isDocumentKey(e))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function nS(e){if(Jv.isDocumentKey(e))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function rS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ev()}function iS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nv(Cv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rS(e);throw new Nv(Cv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function aS(e,t){if(t<=0)throw new Nv(Cv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var oS=function(){function e(t){var n;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Nv(Cv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Nv(Cv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,eS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),sS=function(){function e(t,n,r,i){f(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oS({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new Nv(Cv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Nv(Cv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Pv;switch(e.type){case"firstParty":return new Lv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Nv(Cv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=XE.get(e);t&&(bv("ComponentProvider","Removing Datastore"),XE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function uS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=iS(e,sS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&xv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=yv.MOCK_USER;else{o=gt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Nv(Cv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new yv(u)}e._authCredentials=new Rv(new Av(o,s))}}var cS=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new hS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),lS=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),hS=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,Sg(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new cS(this.firestore,null,new Jv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(lS);function dS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$t(e),ZE("collection","path",t),e instanceof sS){var a=Kv.fromString.apply(Kv,[t].concat(r));return nS(a),new hS(e,null,a)}if(!(e instanceof cS||e instanceof hS))throw new Nv(Cv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Kv.fromString.apply(Kv,[t].concat(r)));return nS(o),new hS(e.firestore,null,o)}function fS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$t(e),1===arguments.length&&(t=Vv.A()),ZE("doc","path",t),e instanceof sS){var a=Kv.fromString.apply(Kv,[t].concat(r));return tS(a),new cS(e,null,new Jv(a))}if(!(e instanceof cS||e instanceof hS))throw new Nv(Cv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Kv.fromString.apply(Kv,[t].concat(r)));return tS(o),new cS(e.firestore,e instanceof hS?e.converter:null,new Jv(o))}function pS(e,t){return e=$t(e),t=$t(t),(e instanceof cS||e instanceof hS)&&(t instanceof cS||t instanceof hS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function vS(e,t){return e=$t(e),t=$t(t),e instanceof lS&&t instanceof lS&&e.firestore===t.firestore&&Og(e._query,t._query)&&e.converter===t.converter}var mS=function(){function e(){var t=this;f(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new cx(this,"async_queue_retry"),this.qc=function(){var e=sx();e&&bv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=sx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return y(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=sx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new jv;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=en(Xt().mark((function e(){var t=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),vm(e.t0)){e.next=12;break}throw e.t0;case 12:bv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw _v("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=rI.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Ev()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=en(Xt().mark((function e(){var t;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=T(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function yS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var gS=function(){function e(){f(this,e),this._progressObserver={},this._taskCompletionResolver=new jv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),kS=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new mS,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||bS(this),this._firestoreClient.terminate()}}]),n}(sS);function wS(e){return e._firestoreClient||bS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bS(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new wy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new RE(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function _S(e,t,n){var r=new jv;return e.asyncQueue.enqueue(en(Xt().mark((function i(){var a;return Xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,DE(e,n);case 3:return i.next=5,LE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),FE(a=i.t0)){i.next=13;break}throw a;case 13:xv("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function xS(e){return function(e){return e.asyncQueue.enqueue(en(Xt().mark((function t(){var n,r;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zE(e);case 2:return n=t.sent,t.next=5,HE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Tv(e);return t.du.delete(0),mx(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(wS(e=iS(e,kS)))}function IS(e){return function(e){return e.asyncQueue.enqueue(en(Xt().mark((function t(){var n,r;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zE(e);case 2:return n=t.sent,t.next=5,HE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Tv(t)).du.add(0),e.next=4,gx(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(wS(e=iS(e,kS)))}function ES(e,t){var n=wS(e=iS(e,kS)),r=new gS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new jE(e,t)}(function(e,t){if(e instanceof Uint8Array)return CE(e,t);if(e instanceof ArrayBuffer)return CE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ux(t));e.asyncQueue.enqueueAndForget(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xE,t.next=3,GE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function SS(e,t){return function(e,t){return e.asyncQueue.enqueue(en(Xt().mark((function n(){return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Tv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,WE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(wS(e=iS(e,kS)),t).then((function(t){return t?new lS(e,null,t.query):null}))}function TS(e){if(e._initialized||e._terminated)throw new Nv(Cv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var CS=function(){function e(t){f(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(dy.fromBase64String(t))}catch(t){throw new Nv(Cv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(dy.fromUint8Array(t))}}]),e}(),NS=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yv(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var jS=y((function e(t){f(this,e),this._methodName=t})),AS=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new Nv(Cv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Nv(Cv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Bv(this._lat,e._lat)||Bv(this._long,e._long)}}]),e}(),PS=/^__.*__$/,RS=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ck(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tk(e,this.data,t,this.fieldTransforms)}}]),e}(),DS=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new Ck(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function OS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ev()}}var LS=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return nT(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(OS(this.Yc)&&PS.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),MS=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ux(t)}return y(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new LS({Yc:e,methodName:t,oa:n,path:Yv.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function FS(e){var t=e._freezeSettings(),n=ux(e._databaseId);return new MS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function US(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);XS("Data must be an object, but it was:",o,r);var s,u,c=JS(r,o);if(a.merge)s=new ly(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],d=T(a.mergeFields);try{for(d.s();!(l=d.n()).done;){var f=ZS(t,l.value,n);if(!o.contains(f))throw new Nv(Cv.INVALID_ARGUMENT,"Field '".concat(f,"' is specified in your field mask but missing from your input data."));rT(h,f)||h.push(f)}}catch(p){d.e(p)}finally{d.f()}s=new ly(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new RS(new zy(c),s,u)}var VS=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jS);function BS(e,t,n){return new LS({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var qS=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new yk(e.path,new ck)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jS),zS=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).ca=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=BS(this,e,!0),n=this.ca.map((function(e){return YS(e,t)})),r=new lk(n);return new yk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jS),WS=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).ca=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=BS(this,e,!0),n=this.ca.map((function(e){return YS(e,t)})),r=new dk(n);return new yk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jS),HS=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).aa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new pk(e.serializer,ik(e.serializer,this.aa));return new yk(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jS);function GS(e,t,n,r){var i=e.ua(1,t,n);XS("Data must be an object, but it was:",i,r);var a=[],o=zy.empty();ny(r,(function(e,r){var s=tT(t,e,n);r=$t(r);var u=i.na(s);if(r instanceof VS)a.push(s);else{var c=YS(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new ly(a);return new DS(o,s,i.fieldTransforms)}function KS(e,t,n,r,i,a){var o=e.ua(1,t,n),s=[ZS(t,r,n)],u=[i];if(a.length%2!=0)throw new Nv(Cv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(ZS(t,a[c])),u.push(a[c+1]);for(var l=[],h=zy.empty(),d=s.length-1;d>=0;--d)if(!rT(l,s[d])){var f=s[d],p=u[d];p=$t(p);var v=o.na(f);if(p instanceof VS)l.push(f);else{var m=YS(p,v);null!=m&&(l.push(f),h.set(f,m))}}var y=new ly(l);return new DS(h,y,o.fieldTransforms)}function QS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return YS(n,e.ua(r?4:3,t))}function YS(e,t){if($S(e=$t(e)))return XS("Unsupported field value:",t,e),JS(e,t);if(e instanceof jS)return function(e,t){if(!OS(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=YS(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=$t(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ik(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Wv.fromDate(e);return{timestampValue:rw(t.serializer,n)}}if(e instanceof Wv){var r=new Wv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rw(t.serializer,r)}}if(e instanceof AS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof CS)return{bytesValue:iw(t.serializer,e._byteString)};if(e instanceof cS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(rS(e)))}(e,t)}function JS(e,t){var n={};return ry(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ny(e,(function(e,r){var i=YS(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $S(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Wv||e instanceof AS||e instanceof CS||e instanceof cS||e instanceof jS)}function XS(e,t,n){if(!$S(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=rS(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function ZS(e,t,n){if((t=$t(t))instanceof NS)return t._internalPath;if("string"==typeof t)return tT(e,t);throw nT("Field path arguments must be of type string or ",e,!1,void 0,n)}var eT=new RegExp("[~\\*/\\[\\]]");function tT(e,t,n){if(t.search(eT)>=0)throw nT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(NS,d(t.split(".")))._internalPath}catch(r){throw nT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function nT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Nv(Cv.INVALID_ARGUMENT,s+e+u)}function rT(e,t){return e.some((function(e){return e.isEqual(t)}))}var iT=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new cS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new aT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(oT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),aT=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return Dr(w(n.prototype),"data",this).call(this)}}]),n}(iT);function oT(e,t){return"string"==typeof t?tT(e,t):t instanceof NS?t._internalPath:t._delegate._internalPath}function sT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Nv(Cv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uT=y((function e(){f(this,e)})),cT=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(uT);function lT(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof uT&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof dT})).length,n=e.filter((function(e){return e instanceof hT})).length;if(t>1||t>0&&n>0)throw new Nv(Cv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=T(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var hT=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return IT(e._query,t),new lS(e.firestore,e.converter,Rg(e._query,t))}},{key:"_parse",value:function(e){var t=FS(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){xT(o,a);var u,c=[],l=T(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(_T(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=_T(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||xT(o,a),s=QS(n,"where",o,"in"===a||"not-in"===a);return Xy.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(cT);var dT=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Zy.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=T(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;IT(r,a),r=Rg(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new lS(e.firestore,e.converter,Rg(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(uT);var fT=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yy(t,n);return function(e,t){if(null===Cg(e)){var n=Ng(e);null!==n&&ET(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new lS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ig(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(cT);var pT=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new lS(e.firestore,e.converter,Dg(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(cT);var vT=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=bT(e,this.type,this._docOrFields,this._inclusive);return new lS(e.firestore,e.converter,function(e,t){return new Ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(cT);function mT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vT._create("startAt",t,!0)}function yT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vT._create("startAfter",t,!1)}var gT=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=bT(e,this.type,this._docOrFields,this._inclusive);return new lS(e.firestore,e.converter,function(e,t){return new Ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(cT);function kT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gT._create("endBefore",t,!1)}function wT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gT._create("endAt",t,!0)}function bT(e,t,n,r){if(n[0]=$t(n[0]),n[0]instanceof iT)return function(e,t,n,r,i){if(!r)throw new Nv(Cv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=T(Ag(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Ay(t,r.key));else{var c=r.data.field(u.field);if(yy(c))throw new Nv(Cv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new Gy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=FS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Nv(Cv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!jg(e)&&-1!==c.indexOf("/"))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Kv.fromString(c));if(!Jv.isDocumentKey(l))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Jv(l);s.push(Ay(t,h))}else{var d=QS(n,r,c);s.push(d)}}return new Gy(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function _T(e,t,n){if("string"==typeof(n=$t(n))){if(""===n)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jg(t)&&-1!==n.indexOf("/"))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Kv.fromString(n));if(!Jv.isDocumentKey(r))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ay(e,new Jv(r))}if(n instanceof cS)return Ay(e,n._key);throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(rS(n),"."))}function xT(e,t){if(!Array.isArray(e)||0===e.length)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function IT(e,t){if(t.isInequality()){var n=Ng(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Cg(e);null!==i&&ET(e,r,i)}var a=function(e,t){var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var i,a=T(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Nv(Cv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Nv(Cv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function ET(e,t,n){if(!n.isEqual(t))throw new Nv(Cv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var ST=function(){function e(){f(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Iy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(my(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ev()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ny(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new AS(vy(e.latitude),vy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=gy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ky(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=py(e);return new Wv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Kv.fromString(e);Sv(Aw(n));var r=new by(n.get(1),n.get(3)),i=new Jv(n.popFirst(5));return r.isEqual(t)||_v("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function TT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var CT=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new CS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new cS(this.firestore,null,t)}}]),n}(ST);var NT=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),jT=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return y(n,[{key:"exists",value:function(){return Dr(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new AT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(oT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(iT),AT=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Dr(w(n.prototype),"data",this).call(this,e)}}]),n}(jT),PT=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new NT(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new AT(n._firestore,n._userDataWriter,r.key,r,new NT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Nv(Cv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new AT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new NT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new AT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new NT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:RT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function RT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ev()}}function DT(e,t){return e instanceof jT&&t instanceof jT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof PT&&t instanceof PT&&e._firestore===t._firestore&&vS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var OT=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new CS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new cS(this.firestore,null,t)}}]),n}(ST);function LT(e){e=iS(e,cS);var t=iS(e.firestore,kS),n=wS(t),r=new OT(t);return function(e,t){var n=new jv;return e.asyncQueue.enqueueAndForget(en(Xt().mark((function r(){return Xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=en(Xt().mark((function e(t,n,r){var i,a;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Tv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Nv(Cv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=iI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,WE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new jT(t,r,e._key,n,new NT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function MT(e){e=iS(e,lS);var t=iS(e.firestore,kS),n=wS(t),r=new OT(t);return function(e,t){var n=new jv;return e.asyncQueue.enqueueAndForget(en(Xt().mark((function r(){return Xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=en(Xt().mark((function e(t,n,r){var i,a,o,s,u;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D_(t,n,!0);case 3:i=e.sent,a=new II(n,i.Wi),o=a.zu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=iI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,WE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new PT(t,r,e,n)}))}function FT(e,t,n){e=iS(e,cS);var r=iS(e.firestore,kS),i=TT(e.converter,t,n);return qT(r,[US(FS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kk.none())])}function UT(e,t,n){e=iS(e,cS);for(var r=iS(e.firestore,kS),i=FS(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return qT(r,[("string"==typeof(t=$t(t))||t instanceof NS?KS(i,"updateDoc",e._key,t,n,o):GS(i,"updateDoc",e._key,t)).toMutation(e._key,kk.exists(!0))])}function VT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=$t(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||yS(n[u])||(s=n[u],u++);var c,l,h,d={includeMetadataChanges:s.includeMetadataChanges};if(yS(n[u])){var f=n[u];n[u]=null===(i=f.next)||void 0===i?void 0:i.bind(f),n[u+1]=null===(a=f.error)||void 0===a?void 0:a.bind(f),n[u+2]=null===(o=f.complete)||void 0===o?void 0:o.bind(f)}if(e instanceof cS)l=iS(e.firestore,kS),h=Sg(e._key.path),c={next:function(t){n[u]&&n[u](zT(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=iS(e,lS);l=iS(p.firestore,kS),h=p._query;var v=new OT(l);c={next:function(e){n[u]&&n[u](new PT(l,v,p,e))},error:n[u+1],complete:n[u+2]},sT(e._query)}return function(e,t,n,r){var i=new NE(r),a=new yI(t,i,n);return e.asyncQueue.enqueueAndForget(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lI,t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dI,t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(wS(l),h,d,c)}function BT(e,t){return function(e,t){var n=new NE(t);return e.asyncQueue.enqueueAndForget(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Tv(e).Au.add(t),t.next()},t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(en(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Tv(e).Au.delete(t)},t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(wS(e=iS(e,kS)),yS(t)?t:{next:t})}function qT(e,t){return function(e,t){var n=new jv;return e.asyncQueue.enqueueAndForget(en(Xt().mark((function r(){return Xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=DI,r.next=3,GE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(wS(e),t)}function zT(e,t,n){var r=n.docs.get(t._key),i=new OT(e);return new jT(e,i,t._key,r,new NT(n.hasPendingWrites,n.fromCache),t.converter)}var WT={maxAttempts:5},HT=function(){function e(t,n){f(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=FS(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=GT(e,this._firestore),i=TT(r.converter,t,n),a=US(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,kk.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=GT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=$t(t))||t instanceof NS?KS(this._dataReader,"WriteBatch.update",i._key,t,n,o):GS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,kk.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=GT(e,this._firestore);return this._mutations=this._mutations.concat(new Dk(t._key,kk.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Nv(Cv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function GT(e,t){if((e=$t(e)).firestore!==t)throw new Nv(Cv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var KT=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=GT(e,this._firestore),i=new OT(this._firestore);return Dr(w(n.prototype),"get",this).call(this,e).then((function(e){return new jT(t._firestore,i,r._key,e._document,new NT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){f(this,e),this._firestore=t,this._transaction=n,this._dataReader=FS(t)}return y(e,[{key:"get",value:function(e){var t=this,n=GT(e,this._firestore),r=new CT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ev();var i=e[0];if(i.isFoundDocument())return new iT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new iT(t._firestore,r,n._key,null,n.converter);throw Ev()}))}},{key:"set",value:function(e,t,n){var r=GT(e,this._firestore),i=TT(r.converter,t,n),a=US(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=GT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=$t(t))||t instanceof NS?KS(this._dataReader,"Transaction.update",i._key,t,n,o):GS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=GT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function QT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zS("arrayUnion",t)}function YT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new WS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gv=e}(Xn),Hn(new tn("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new kS(new Dv(e.getProvider("auth-internal")),new Fv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Nv(Cv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new by(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ir(mv,"3.10.1",e),ir(mv,"3.10.1","esm2017")}();var JT="@firebase/firestore-compat",$T="0.3.7";function XT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Nv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ZT(){if("undefined"===typeof Uint8Array)throw new Nv("unimplemented","Uint8Arrays are not available in this environment.")}function eC(){if("undefined"==typeof atob)throw new Nv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var tC=function(){function e(t){f(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return eC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ZT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return eC(),new e(CS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ZT(),new e(CS.fromUint8Array(t))}}]),e}();function nC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var rC=function(){function e(){f(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){TS(e=iS(e,kS));var n=wS(e);if(n._uninitializedComponentsProvider)throw new Nv(Cv.FAILED_PRECONDITION,"SDK cache is already specified.");xv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new TE;return _S(n,i,new EE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){TS(e=iS(e,kS));var t=wS(e);if(t._uninitializedComponentsProvider)throw new Nv(Cv.FAILED_PRECONDITION,"SDK cache is already specified.");xv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new TE;return _S(t,r,new SE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Nv(Cv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new jv;return e._queue.enqueueAndForgetEvenWhileRestricted(en(Xt().mark((function n(){return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=en(Xt().mark((function e(t){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dm.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,dm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(k_(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),iC=function(){function e(t,n,r){var i=this;f(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof by||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||xv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return xS(this._delegate)}},{key:"disableNetwork",value:function(){return IS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&eS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new jv;return e.asyncQueue.enqueueAndForget(en(Xt().mark((function n(){return Xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=HI,n.next=3,GE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(wS(e=iS(e,kS)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return BT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Nv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new gC(this,dS(this._delegate,e))}catch(t){throw lC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new cC(this,fS(this._delegate,e))}catch(t){throw lC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new vC(this,function(e,t){if(e=iS(e,sS),ZE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Nv(Cv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new lS(e,null,function(e){return new Ig(Kv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw lC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=iS(e,kS);var r=Object.assign(Object.assign({},WT),n);return function(e){if(e.maxAttempts<1)throw new Nv(Cv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new jv;return e.asyncQueue.enqueueAndForget(en(Xt().mark((function i(){var a;return Xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,KE(e);case 2:a=i.sent,new PE(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(wS(e),(function(n){return t(new KT(e,n))}),r)}(this._delegate,(function(n){return e(new oC(t,n))}))}},{key:"batch",value:function(){var e=this;return wS(this._delegate),new sC(new HT(this._delegate,(function(t){return qT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return ES(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return SS(this._delegate,e).then((function(e){return e?new vC(t,e):null}))}}]),e}(),aC=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new tC(new CS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return cC.forKey(t,this.firestore,null)}}]),n}(ST);var oC=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new aC(t)}return y(e,[{key:"get",value:function(e){var t=this,n=kC(e);return this._delegate.get(n).then((function(e){return new fC(t._firestore,new jT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=kC(e);return n?(XT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=kC(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=kC(e);return this._delegate.delete(t),this}}]),e}(),sC=function(){function e(t){f(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=kC(e);return n?(XT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=kC(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=kC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),uC=function(){function e(t,n,r){f(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new AT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new aC(t),n),i.set(n,a)),a}}]),e}();uC.INSTANCES=new WeakMap;var cC=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new aC(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new gC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new gC(this.firestore,dS(this._delegate,e))}catch(t){throw lC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=$t(e))instanceof cS&&pS(this._delegate,e)}},{key:"set",value:function(e,t){t=XT("DocumentReference.set",t);try{return t?FT(this._delegate,e,t):FT(this._delegate,e)}catch(n){throw lC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?UT(this._delegate,e):UT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw lC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return qT(iS(e.firestore,kS),[new Dk(e._key,kk.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=hC(n),a=dC(n,(function(t){return new fC(e.firestore,new jT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return VT(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?LT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iS(e,cS);var t=iS(e.firestore,kS);return JE(wS(t),e._key,{source:"server"}).then((function(n){return zT(t,e,n)}))}(this._delegate):function(e){e=iS(e,cS);var t=iS(e.firestore,kS);return JE(wS(t),e._key).then((function(n){return zT(t,e,n)}))}(this._delegate),t.then((function(e){return new fC(n.firestore,new jT(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Nv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new cS(n._delegate,r,new Jv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new cS(n._delegate,r,t))}}]),e}();function lC(e,t,n){return e.message=e.message.replace(t,n),e}function hC(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!nC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function dC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=nC(e[0])?e[0]:nC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var fC=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new cC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return DT(this._delegate,e._delegate)}}]),e}(),pC=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ev()}(void 0!==t),t}}]),n}(fC),vC=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new aC(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,lT(this._delegate,function(e,t,n){var r=t,i=oT("where",e);return hT._create(i,r,n)}(t,n,r)))}catch(i){throw lC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,lT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=oT("orderBy",e);return fT._create(n,t)}(t,n)))}catch(r){throw lC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,lT(this._delegate,function(e){return aS("limit",e),pT._create("limit",e,"F")}(t)))}catch(n){throw lC(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,lT(this._delegate,function(e){return aS("limitToLast",e),pT._create("limitToLast",e,"L")}(t)))}catch(n){throw lC(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,lT(this._delegate,mT.apply(void 0,arguments)))}catch(t){throw lC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,lT(this._delegate,yT.apply(void 0,arguments)))}catch(t){throw lC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,lT(this._delegate,kT.apply(void 0,arguments)))}catch(t){throw lC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,lT(this._delegate,wT.apply(void 0,arguments)))}catch(t){throw lC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return vS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?MT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iS(e,lS);var t=iS(e.firestore,kS),n=wS(t),r=new OT(t);return $E(n,e._query,{source:"server"}).then((function(n){return new PT(t,r,e,n)}))}(this._delegate):function(e){e=iS(e,lS);var t=iS(e.firestore,kS),n=wS(t),r=new OT(t);return sT(e._query),$E(n,e._query).then((function(n){return new PT(t,r,e,n)}))}(this._delegate),t.then((function(e){return new yC(n.firestore,new PT(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=hC(n),a=dC(n,(function(t){return new yC(e.firestore,new PT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return VT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),mC=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new pC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),yC=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new vC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new pC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new mC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new pC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return DT(this._delegate,e._delegate)}}]),e}(),gC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new cC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new cC(this.firestore,void 0===e?fS(this._delegate):fS(this._delegate,e))}catch(t){throw lC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=iS(e.firestore,kS),r=fS(e),i=TT(e.converter,t);return qT(n,[US(FS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kk.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new cC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return pS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(uC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(vC);function kC(e){return iS(e,cS)}var wC=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(NS,n)}return y(e,[{key:"isEqual",value:function(e){return(e=$t(e))instanceof NS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Yv.keyField().canonicalString())}}]),e}(),bC=function(){function e(t){f(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new qS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new VS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=QT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=YT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new HS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),_C={Firestore:iC,GeoPoint:AS,Timestamp:Wv,Blob:tC,Transaction:oC,WriteBatch:sC,DocumentReference:cC,DocumentSnapshot:fC,Query:vC,QueryDocumentSnapshot:pC,QuerySnapshot:yC,CollectionReference:gC,FieldPath:wC,FieldValue:bC,setLogLevel:function(e){!function(e){kv.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new tn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},_C)))}(e,(function(e,t){return new iC(e,t,new rC)})),e.registerVersion(JT,$T)}(Rr);var xC="@firebase/database",IC="0.14.4",EC="";function SC(e){EC=e}var TC=function(){function e(t){f(this,e),this.domStorage_=t,this.prefix_="firebase:"}return y(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),At(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:jt(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),CC=function(){function e(){f(this,e),this.cache_={},this.isInMemoryStorage=!0}return y(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Rt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),NC=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new TC(t)}}catch(n){}return new CC},jC=NC("localStorage"),AC=NC("sessionStorage"),PC=new fn("@firebase/database"),RC=function(){var e=1;return function(){return e++}}(),DC=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,at(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new qt;n.update(t);var r=n.digest();return ut.encodeByteArray(r)},OC=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?At(r):r,t+=" "}return t},LC=null,MC=!0,FC=function(e,t){at(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(PC.logLevel=on.VERBOSE,LC=PC.log.bind(PC),t&&AC.set("logging_enabled",!0)):"function"===typeof e?LC=e:(LC=null,AC.remove("logging_enabled"))},UC=function(){if(!0===MC&&(MC=!1,null===LC&&!0===AC.get("logging_enabled")&&FC(!0)),LC){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=OC.apply(null,t);LC(r)}},VC=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];UC.apply(void 0,[e].concat(n))}},BC=function(){var e="FIREBASE INTERNAL ERROR: "+OC.apply(void 0,arguments);PC.error(e)},qC=function(){var e="FIREBASE FATAL ERROR: ".concat(OC.apply(void 0,arguments));throw PC.error(e),new Error(e)},zC=function(){var e="FIREBASE WARNING: "+OC.apply(void 0,arguments);PC.warn(e)},WC=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},HC="[MIN_NAME]",GC="[MAX_NAME]",KC=function(e,t){if(e===t)return 0;if(e===HC||t===GC)return-1;if(t===HC||e===GC)return 1;var n=tN(e),r=tN(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},QC=function(e,t){return e===t?0:e<t?-1:1},YC=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+At(t))},JC=function e(t){if("object"!==typeof t||null===t)return At(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=At(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},$C=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function XC(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ZC=function(e){at(!WC(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var eN=new RegExp("^-?(0*)\\d{1,10}$"),tN=function(e){if(eN.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},nN=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw zC("Exception was thrown by user callback.",e),t}),Math.floor(0))}},rN=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},iN=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},aN=function(){function e(t,n){var r=this;f(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){zC('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),oN=function(){function e(t,n,r){var i=this;f(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(UC("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zC(e)}}]),e}(),sN=function(){function e(t){f(this,e),this.accessToken=t}return y(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();sN.OWNER="owner";var uN="5",cN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lN="ac",hN="websocket",dN="long_polling",fN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];f(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jC.get("host:"+t)||this._host}return y(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jC.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function pN(e,t,n){var r;if(at("string"===typeof t,"typeof type must == string"),at("object"===typeof n,"typeof params must == object"),t===hN)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==dN)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return XC(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var vN=function(){function e(){f(this,e),this.counters_={}}return y(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Rt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ft(void 0,this.counters_)}}]),e}(),mN={},yN={};function gN(e){var t=e.toString();return mN[t]||(mN[t]=new vN),mN[t]}var kN=function(){function e(t){f(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return y(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&nN((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),wN="start",bN=function(){function e(t,n,r,i,a,o,s){var u=this;f(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=VC(t),this.stats_=gN(n),this.urlFn=function(e){return u.appCheckToken&&(e[lN]=u.appCheckToken),pN(n,dN,e)}}return y(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new kN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Et()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new _N((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===wN)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[wN]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=uN,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[lN]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&cN.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=At(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=lt(t),r=$C(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Et()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=At(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Et()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),_N=function(){function e(t,n,r,i){if(f(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Et())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=RC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){UC("frame writing exception"),s.stack&&UC(s.stack),UC(s)}}}return y(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Et()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){UC("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||UC("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),xN=null;"undefined"!==typeof MozWebSocket?xN=MozWebSocket:"undefined"!==typeof WebSocket&&(xN=WebSocket);var IN=function(){function e(t,n,r,i,a,o,s){f(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=VC(this.connId),this.stats_=gN(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return y(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jC.set("previous_websocket_failure",!0);try{var r;if(Et()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(uN,"/").concat(EC,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Librariaa-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new xN(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){jC.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=jt(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(at(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=At(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=$C(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=uN,!Et()&&"undefined"!==typeof location&&location.hostname&&cN.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[lN]=r),i&&(a.p=i),pN(e,hN,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==xN&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return jC.isInMemoryStorage||!0===jC.get("previous_websocket_failure")}}]),e}();IN.responsesRequiredToBeHealthy=2,IN.healthyTimeout=3e4;var EN=function(){function e(t){f(this,e),this.initTransports_(t)}return y(e,[{key:"initTransports_",value:function(t){var n=IN&&IN.isAvailable(),r=n&&!IN.previouslyFailed();if(t.webSocketOnly&&(n||zC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[IN];else{var i,a=this.transports_=[],o=T(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[bN,IN]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();EN.globalTransportInitialized_=!1;var SN=function(){function e(t,n,r,i,a,o,s,u,c,l){f(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=VC("c:"+this.id+":"),this.transportManager_=new EN(n),this.log_("Connection created"),this.start_()}return y(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=iN((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=YC("t",e),n=YC("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=YC("t",e),n=YC("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=YC("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?BC("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):BC("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),uN!==n&&zC("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),iN((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):iN((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jC.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),TN=function(){function e(){f(this,e)}return y(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),CN=function(){function e(t){f(this,e),this.allowedEvents_=t,this.listeners_={},at(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return y(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=d(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){at(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),NN=function(e){k(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||wt()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(n,[{key:"getInitialEvent",value:function(e){return at("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(CN),jN=32,AN=768,PN=function(){function e(t,n){if(f(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return y(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function RN(){return new PN("")}function DN(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ON(e){return e.pieces_.length-e.pieceNum_}function LN(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new PN(e.pieces_,t)}function MN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function FN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function UN(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new PN(t,0)}function VN(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof PN)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new PN(n,0)}function BN(e){return e.pieceNum_>=e.pieces_.length}function qN(e,t){var n=DN(e),r=DN(t);if(null===n)return t;if(n===r)return qN(LN(e),LN(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function zN(e,t){for(var n=FN(e,0),r=FN(t,0),i=0;i<n.length&&i<r.length;i++){var a=KC(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function WN(e,t){if(ON(e)!==ON(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function HN(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ON(e)>ON(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var GN=y((function e(t,n){f(this,e),this.errorPrefix_=n,this.parts_=FN(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Jt(this.parts_[r]);KN(this)}));function KN(e){if(e.byteLength_>AN)throw new Error(e.errorPrefix_+"has a key path longer than "+AN+" bytes ("+e.byteLength_+").");if(e.parts_.length>jN)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jN+") or object contains a cycle "+QN(e))}function QN(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var YN=function(e){k(n,e);var t=x(n);function n(){var e,r,i;return f(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return y(n,[{key:"getInitialEvent",value:function(e){return at("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(CN),JN=1e3,$N=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s,u,c){var l;if(f(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=VC("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=JN,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Et())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return YN.getInstance().on("visible",l.onVisible_,_(l)),-1===e.host.indexOf("fblocal")&&NN.getInstance().on("online",l.onOnline_,_(l)),l}return y(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(At(i)),at(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new yt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),at(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),at(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Pt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Pt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),at(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+At(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):BC("Unrecognized action received from server: "+At(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;at(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=JN,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=JN,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=JN),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=en(Xt().mark((function e(){var t,r,i,a,o,s,u,c,h,d,f,p,v,m,y=this;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){at(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:f=e.sent,p=l(f,2),v=p[0],m=p[1],s?UC("getToken() completed but was canceled"):(UC("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,u=new SN(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){zC(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&zC(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){UC("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){UC("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ot(this.interruptReasons_)&&(this.reconnectDelay_=JN,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return JC(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new PN(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){UC("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){UC("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=T(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=T(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Et()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+EC.replace(/\./g,"-")]=1,wt()?e["framework.cordova"]=1:xt()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=NN.getInstance().currentlyOnline();return Ot(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Rt(e,"w")){var n=Dt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();zC("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(TN);$N.nextPersistentConnectionId_=0,$N.nextConnectionId_=0;var XN,ZN=function(){function e(t,n){f(this,e),this.name=t,this.node=n}return y(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ej=function(){function e(){f(this,e)}return y(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new ZN(HC,e),r=new ZN(HC,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return ZN.MIN}}]),e}(),tj=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){return KC(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw ot("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return ZN.MIN}},{key:"maxPost",value:function(){return new ZN(GC,XN)}},{key:"makePost",value:function(e,t){return at("string"===typeof e,"KeyIndex indexValue must always be a string."),new ZN(e,XN)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return XN},set:function(e){XN=e}}]),n}(ej),nj=new tj,rj=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;f(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return y(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),ij=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:sj.EMPTY_NODE,this.right=null!=a?a:sj.EMPTY_NODE}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return sj.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return sj.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();ij.RED=!0,ij.BLACK=!1;var aj,oj=function(){function e(){f(this,e)}return y(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ij(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),sj=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;f(this,e),this.comparator_=t,this.root_=n}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ij.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ij.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new rj(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new rj(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new rj(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new rj(this.root_,null,this.comparator_,!0,e)}}]),e}();function uj(e,t){return KC(e.name,t.name)}function cj(e,t){return KC(e,t)}sj.EMPTY_NODE=new oj;var lj,hj,dj,fj=function(e){return"number"===typeof e?"number:"+ZC(e):"string:"+e},pj=function(e){if(e.isLeafNode()){var t=e.val();at("string"===typeof t||"number"===typeof t||"object"===typeof t&&Rt(t,".sv"),"Priority must be a string or number.")}else at(e===aj||e.isEmpty(),"priority of unexpected type.");at(e===aj||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},vj=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;f(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,at(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),pj(this.priorityNode_)}return y(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return BN(t)?this:".priority"===DN(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=DN(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(at(".priority"!==r||1===ON(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(LN(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+fj(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ZC(this.value_):this.value_,this.lazyHash_=DC(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(at(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return at(i>=0,"Unknown leaf type: "+n),at(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return lj},set:function(e){lj=e}}]),e}();vj.VALUE_TYPE_ORDER=["object","boolean","number","string"];var mj,yj,gj=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?KC(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return ZN.MIN}},{key:"maxPost",value:function(){return new ZN(GC,new vj("[PRIORITY-POST]",dj))}},{key:"makePost",value:function(e,t){var n=hj(e);return new ZN(t,new vj("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ej),kj=new gj,wj=Math.log(2),bj=function(){function e(t){f(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/wj,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return y(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),_j=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new ij(o,a.node,ij.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new ij(o,a.node,ij.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new ij(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,ij.BLACK):(s(h,ij.BLACK),s(h,ij.RED))}return a}(new bj(e.length));return new sj(r||t,a)},xj={},Ij=function(){function e(t,n){f(this,e),this.indexes_=t,this.indexSet_=n}return y(e,[{key:"get",value:function(e){var t=Dt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof sj?t:null}},{key:"hasIndex",value:function(e){return Rt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){at(t!==nj,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(ZN.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?_j(i,t.getCompare()):xj;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Lt(this.indexes_,(function(e,i){var a=Dt(r.indexSet_,i);if(at(a,"Missing index implementation for "+i),e===xj){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(ZN.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),_j(o,a.getCompare())}return xj}var c=n.get(t.name),l=e;return c&&(l=l.remove(new ZN(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Lt(this.indexes_,(function(e){if(e===xj)return e;var r=n.get(t.name);return r?e.remove(new ZN(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return at(xj&&kj,"ChildrenNode.ts has not been loaded"),mj=mj||new e({".priority":xj},{".priority":kj})}}]),e}(),Ej=function(){function e(t,n,r){f(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&pj(this.priorityNode_),this.children_.isEmpty()&&at(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return y(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||yj}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?yj:t}},{key:"getChild",value:function(e){var t=DN(e);return null===t?this:this.getImmediateChild(t).getChild(LN(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(at(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new ZN(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?yj:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=DN(e);if(null===n)return t;at(".priority"!==DN(e)||1===ON(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(LN(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(kj,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+fj(this.getPriority().val())+":"),this.forEachChild(kj,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":DC(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ZN(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new ZN(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new ZN(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,ZN.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,ZN.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Sj?-1:0}},{key:"withIndex",value:function(t){if(t===nj||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===nj||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(kj),r=t.getIterator(kj),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===nj?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return yj||(yj=new e(new sj(cj),null,Ij.Default))}}]),e}();Ej.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Sj=new(function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.call(this,new sj(cj),Ej.EMPTY_NODE,Ij.Default)}return y(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Ej.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Ej));Object.defineProperties(ZN,{MIN:{value:new ZN(HC,Ej.EMPTY_NODE)},MAX:{value:new ZN(GC,Sj)}}),tj.__EMPTY_NODE=Ej.EMPTY_NODE,vj.__childrenNodeConstructor=Ej,aj=Sj,function(e){dj=e}(Sj);var Tj=!0;function Cj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ej.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),at(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new vj(e,Cj(t));if(e instanceof Array||!Tj){var n=Ej.EMPTY_NODE;return XC(e,(function(t,r){if(Rt(e,t)&&"."!==t.substring(0,1)){var i=Cj(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Cj(t))}var r=[],i=!1;if(XC(e,(function(e,t){if("."!==e.substring(0,1)){var n=Cj(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new ZN(e,n)))}})),0===r.length)return Ej.EMPTY_NODE;var a=_j(r,uj,(function(e){return e.name}),cj);if(i){var o=_j(r,kj.getCompare());return new Ej(a,Cj(t),new Ij({".priority":o},{".priority":kj}))}return new Ej(a,Cj(t),Ij.Default)}!function(e){hj=e}(Cj);var Nj=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).indexPath_=e,at(!BN(e)&&".priority"!==DN(e),"Can't create PathIndex with empty path or .priority key"),r}return y(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?KC(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Cj(e),r=Ej.EMPTY_NODE.updateChild(this.indexPath_,n);return new ZN(t,r)}},{key:"maxPost",value:function(){var e=Ej.EMPTY_NODE.updateChild(this.indexPath_,Sj);return new ZN(GC,e)}},{key:"toString",value:function(){return FN(this.indexPath_,0).join("/")}}]),n}(ej),jj=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?KC(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return ZN.MIN}},{key:"maxPost",value:function(){return ZN.MAX}},{key:"makePost",value:function(e,t){var n=Cj(e);return new ZN(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ej),Aj=new jj;function Pj(e){return{type:"value",snapshotNode:e}}function Rj(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Dj(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Oj(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Lj=function(){function e(t){f(this,e),this.index_=t}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){at(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Dj(t,o)):at(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Rj(t,n)):a.trackChildChange(Oj(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(kj,(function(e,r){t.hasChild(e)||n.trackChildChange(Dj(e,r))})),t.isLeafNode()||t.forEachChild(kj,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Oj(t,r,i))}else n.trackChildChange(Rj(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Ej.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Mj=function(){function e(t){f(this,e),this.indexedFilter_=new Lj(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new ZN(t,n))||(n=Ej.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Ej.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Ej.EMPTY_NODE);var i=this;return t.forEachChild(kj,(function(e,t){i.matches(new ZN(e,t))||(r=r.updateImmediateChild(e,Ej.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Fj=function(){function e(t){var n=this;f(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Mj(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new ZN(t,n))||(n=Ej.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Ej.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Ej.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(Ej.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,Ej.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;at(s.numChildren()===this.limit_,"");var u=new ZN(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name===t||s.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:a(d,u);if(l&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(Oj(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Dj(t,h));var p=s.updateImmediateChild(t,Ej.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(Rj(d.name,d.node)),p.updateImmediateChild(d.name,d.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(Dj(c.name,c.node)),i.trackChildChange(Rj(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,Ej.EMPTY_NODE)):e}}]),e}(),Uj=function(){function e(){f(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kj}return y(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return at(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return at(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:HC}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return at(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return at(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:GC}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return at(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===kj}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Vj(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Bj(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function qj(e,t){var n=e.copy();return n.index_=t,n}function zj(e){var t,n={};if(e.isDefault())return n;if(e.index_===kj?t="$priority":e.index_===Aj?t="$value":e.index_===nj?t="$key":(at(e.index_ instanceof Nj,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=At(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=At(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+At(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=At(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+At(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Wj(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==kj&&(t.i=e.index_.toString()),t}var Hj=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=VC("p:rest:"),o.listens_={},o}return y(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=zj(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Dt(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=zj(e._queryParams),r=e._path.toString(),i=new yt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ut(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=jt(c.responseText)}catch(n){zC("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&zC("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(at(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(TN),Gj=function(){function e(){f(this,e),this.rootNode_=Ej.EMPTY_NODE}return y(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Kj(){return{value:null,children:new Map}}function Qj(e,t,n){if(BN(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=DN(t);e.children.has(r)||e.children.set(r,Kj()),Qj(e.children.get(r),t=LN(t),n)}}function Yj(e,t){if(BN(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(kj,(function(t,n){Qj(e,new PN(t),n)})),Yj(e,t)}if(e.children.size>0){var r=DN(t);if(t=LN(t),e.children.has(r))Yj(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Jj(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Jj(r,new PN(t.toString()+"/"+e),n)}))}var $j,Xj=function(){function e(t){f(this,e),this.collection_=t,this.last_=null}return y(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&XC(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Zj=function(){function e(t,n){f(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Xj(t);var r=1e4+2e4*Math.random();iN(this.reportStats_.bind(this),Math.floor(r))}return y(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;XC(t,(function(t,i){i>0&&Rt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),iN(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function eA(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}($j||($j={}));var tA,nA=function(){function e(t,n,r){f(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=$j.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return y(e,[{key:"operationForChild",value:function(t){if(BN(this.path)){if(null!=this.affectedTree.value)return at(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new PN(t));return new e(RN(),n,this.revert)}return at(DN(this.path)===t,"operationForChild called for unrelated child."),new e(LN(this.path),this.affectedTree,this.revert)}}]),e}(),rA=function(){function e(t,n){f(this,e),this.source=t,this.path=n,this.type=$j.LISTEN_COMPLETE}return y(e,[{key:"operationForChild",value:function(t){return BN(this.path)?new e(this.source,RN()):new e(this.source,LN(this.path))}}]),e}(),iA=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.snap=r,this.type=$j.OVERWRITE}return y(e,[{key:"operationForChild",value:function(t){return BN(this.path)?new e(this.source,RN(),this.snap.getImmediateChild(t)):new e(this.source,LN(this.path),this.snap)}}]),e}(),aA=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.children=r,this.type=$j.MERGE}return y(e,[{key:"operationForChild",value:function(t){if(BN(this.path)){var n=this.children.subtree(new PN(t));return n.isEmpty()?null:n.value?new iA(this.source,RN(),n.value):new e(this.source,RN(),n)}return at(DN(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,LN(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),oA=function(){function e(t,n,r){f(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return y(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(BN(e))return this.isFullyInitialized()&&!this.filtered_;var t=DN(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),sA=y((function e(t){f(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function uA(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ot("Should only compare child_ events.");var r=new ZN(t.childName,t.snapshotNode),i=new ZN(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function cA(e,t){return{eventCache:e,serverCache:t}}function lA(e,t,n,r){return cA(new oA(t,n,r),e.serverCache)}function hA(e,t,n,r){return cA(e.eventCache,new oA(t,n,r))}function dA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function fA(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var pA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(tA||(tA=new sj(QC)),tA);f(this,e),this.value=t,this.children=n}return y(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:RN(),value:this.value};if(BN(e))return null;var n=DN(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(LN(e),t);return null!=i?{path:VN(new PN(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(BN(t))return this;var n=DN(t),r=this.children.get(n);return null!==r?r.subtree(LN(t)):new e(null)}},{key:"set",value:function(t,n){if(BN(t))return new e(n,this.children);var r=DN(t),i=(this.children.get(r)||new e(null)).set(LN(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(BN(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=DN(t),r=this.children.get(n);if(r){var i,a=r.remove(LN(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(BN(e))return this.value;var t=DN(e),n=this.children.get(t);return n?n.get(LN(e)):null}},{key:"setTree",value:function(t,n){if(BN(t))return n;var r,i=DN(t),a=(this.children.get(i)||new e(null)).setTree(LN(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(RN(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(VN(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,RN(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(BN(e))return null;var i=DN(e),a=this.children.get(i);return a?a.findOnPath_(LN(e),VN(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,RN(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(BN(t))return this;this.value&&r(n,this.value);var i=DN(t),a=this.children.get(i);return a?a.foreachOnPath_(LN(t),VN(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(RN(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(VN(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return XC(t,(function(e,t){n=n.set(new PN(e),t)})),n}}]),e}(),vA=function(){function e(t){f(this,e),this.writeTree_=t}return y(e,null,[{key:"empty",value:function(){return new e(new pA(null))}}]),e}();function mA(e,t,n){if(BN(t))return new vA(new pA(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=qN(i,t);return a=a.updateChild(o,n),new vA(e.writeTree_.set(i,a))}var s=new pA(n),u=e.writeTree_.setTree(t,s);return new vA(u)}function yA(e,t,n){var r=e;return XC(n,(function(e,n){r=mA(r,VN(t,e),n)})),r}function gA(e,t){if(BN(t))return vA.empty();var n=e.writeTree_.setTree(t,new pA(null));return new vA(n)}function kA(e,t){return null!=wA(e,t)}function wA(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(qN(n.path,t)):null}function bA(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(kj,(function(e,n){t.push(new ZN(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new ZN(e,n.value))})),t}function _A(e,t){if(BN(t))return e;var n=wA(e,t);return new vA(null!=n?new pA(n):e.writeTree_.subtree(t))}function xA(e){return e.writeTree_.isEmpty()}function IA(e,t){return EA(RN(),e.writeTree_,t)}function EA(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(at(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=EA(VN(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(VN(e,".priority"),r)),n}function SA(e,t){return UA(t,e)}function TA(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));at(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&CA(s,r.path)?i=!1:HN(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=jA(e.allWrites,NA,RN()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=gA(e.visibleWrites,r.path):XC(r.children,(function(t){e.visibleWrites=gA(e.visibleWrites,VN(r.path,t))}));return!0}return!1}function CA(e,t){if(e.snap)return HN(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&HN(VN(e.path,n),t))return!0;return!1}function NA(e){return e.visible}function jA(e,t,n){for(var r=vA.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)HN(n,o)?r=mA(r,s=qN(n,o),a.snap):HN(o,n)&&(s=qN(o,n),r=mA(r,RN(),a.snap.getChild(s)));else{if(!a.children)throw ot("WriteRecord should have .snap or .children");if(HN(n,o))r=yA(r,s=qN(n,o),a.children);else if(HN(o,n))if(BN(s=qN(o,n)))r=yA(r,RN(),a.children);else{var u=Dt(a.children,DN(s));if(u){var c=u.getChild(LN(s));r=mA(r,RN(),c)}}}}}return r}function AA(e,t,n,r,i){if(r||i){var a=_A(e.visibleWrites,t);if(!i&&xA(a))return n;if(i||null!=n||kA(a,RN())){return IA(jA(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(HN(e.path,t)||HN(t,e.path))}),t),n||Ej.EMPTY_NODE)}return null}var o=wA(e.visibleWrites,t);if(null!=o)return o;var s=_A(e.visibleWrites,t);return xA(s)?n:null!=n||kA(s,RN())?IA(s,n||Ej.EMPTY_NODE):null}function PA(e,t,n,r){return AA(e.writeTree,e.treePath,t,n,r)}function RA(e,t){return function(e,t,n){var r=Ej.EMPTY_NODE,i=wA(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(kj,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=_A(e.visibleWrites,t);return n.forEachChild(kj,(function(e,t){var n=IA(_A(a,new PN(e)),t);r=r.updateImmediateChild(e,n)})),bA(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return bA(_A(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function DA(e,t,n,r){return function(e,t,n,r,i){at(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=VN(t,n);if(kA(e.visibleWrites,a))return null;var o=_A(e.visibleWrites,a);return xA(o)?i.getChild(n):IA(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function OA(e,t){return function(e,t){return wA(e.visibleWrites,t)}(e.writeTree,VN(e.treePath,t))}function LA(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=_A(e.visibleWrites,t),c=wA(u,RN());if(null!=c)s=c;else{if(null==n)return[];s=IA(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),d=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),f=d.getNext();f&&l.length<i;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function MA(e,t,n){return function(e,t,n,r){var i=VN(t,n),a=wA(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?IA(_A(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function FA(e,t){return UA(VN(e.treePath,t),e.writeTree)}function UA(e,t){return{treePath:e,writeTree:t}}var VA=function(){function e(){f(this,e),this.changeMap=new Map}return y(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;at("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),at(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Oj(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Dj(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Rj(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ot("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Oj(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),BA=new(function(){function e(){f(this,e)}return y(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),qA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return y(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new oA(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return MA(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fA(this.viewCache_),i=LA(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function zA(e,t,n,r,i){var a,o,s=new VA;if(n.type===$j.OVERWRITE){var u=n;u.source.fromUser?a=GA(e,t,u.path,u.snap,r,i,s):(at(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!BN(u.path),a=HA(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===$j.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=VN(n,r);KA(t,DN(c))&&(s=GA(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=VN(n,r);KA(t,DN(c))||(s=GA(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(at(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=YA(e,t,c.path,c.children,r,i,o,s))}else if(n.type===$j.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=OA(r,n))return t;var s,u=new qA(r,t,i),c=t.eventCache.getNode();if(BN(n)||".priority"===DN(n)){var l;if(t.serverCache.isFullyInitialized())l=PA(r,fA(t));else{var h=t.serverCache.getNode();at(h instanceof Ej,"serverChildren would be complete if leaf node"),l=RA(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var d=DN(n),f=MA(r,d,t.serverCache);null==f&&t.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),(s=null!=f?e.filter.updateChild(c,d,f,LN(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,Ej.EMPTY_NODE,LN(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=PA(r,fA(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=OA(r,RN()),lA(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=OA(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(BN(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return HA(e,t,n,u.getNode().getChild(n),i,a,s,o);if(BN(n)){var c=new pA(null);return u.getNode().forEachChild(nj,(function(e,t){c=c.set(new PN(e),t)})),YA(e,t,n,c,i,a,s,o)}return t}var l=new pA(null);return r.foreach((function(e,t){var r=VN(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),YA(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==$j.LISTEN_COMPLETE)throw ot("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=hA(t,a.getNode(),a.isFullyInitialized()||BN(n),a.isFiltered());return WA(e,o,n,r,BA,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=dA(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Pj(dA(t)))}}(t,a,h),{viewCache:a,changes:h}}function WA(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=OA(r,n))return t;if(BN(n))if(at(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=fA(t),l=RA(r,c instanceof Ej?c:Ej.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=PA(r,fA(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var d=DN(n);if(".priority"===d){at(1===ON(n),"Can't have a priority with additional path components");var f=u.getNode(),p=DA(r,n,f,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(f,p):u.getNode()}else{var v,m=LN(n);if(u.isCompleteForChild(d)){s=t.serverCache.getNode();var y=DA(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(d).updateChild(m,y):u.getNode().getImmediateChild(d)}else v=MA(r,d,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),d,v,m,i,a):u.getNode()}}return lA(t,o,u.isFullyInitialized()||BN(n),e.filter.filtersNodes())}function HA(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(BN(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=DN(n);if(!c.isCompleteForPath(n)&&ON(n)>1)return t;var f=LN(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,BA,null)}var v=hA(t,u,c.isFullyInitialized()||BN(n),l.filtersNodes());return WA(e,v,n,i,new qA(i,v,a),s)}function GA(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new qA(i,t,a);if(BN(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=lA(t,u,!0,e.filter.filtersNodes());else{var h=DN(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=lA(t,u,c.isFullyInitialized(),c.isFiltered());else{var d,f=LN(n),p=c.getNode().getImmediateChild(h);if(BN(f))d=r;else{var v=l.getCompleteChild(h);d=null!=v?".priority"===MN(f)&&v.getChild(UN(f)).isEmpty()?v:v.updateChild(f,r):Ej.EMPTY_NODE}if(p.equals(d))s=t;else s=lA(t,e.filter.updateChild(c.getNode(),h,d,f,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function KA(e,t){return e.eventCache.isCompleteForChild(t)}function QA(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function YA(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=BN(n)?r:new pA(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=QA(0,t.serverCache.getNode().getImmediateChild(n),r);c=HA(e,c,new PN(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=QA(0,t.serverCache.getNode().getImmediateChild(n),r);c=HA(e,c,new PN(n),h,i,a,o,s)}})),c}var JA,$A=function(){function e(t,n){f(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Lj(i.getIndex()),o=(r=i).loadsAllData()?new Lj(r.getIndex()):r.hasLimit()?new Fj(r):new Mj(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(Ej.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(Ej.EMPTY_NODE,u.getNode(),null),h=new oA(c,s.isFullyInitialized(),a.filtersNodes()),d=new oA(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=cA(d,h),this.eventGenerator_=new sA(this.query_)}return y(e,[{key:"query",get:function(){return this.query_}}]),e}();function XA(e,t){var n=fA(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!BN(t)&&!n.getImmediateChild(DN(t)).isEmpty())?n.getChild(t):null}function ZA(e){return 0===e.eventRegistrations_.length}function eP(e,t,n){var r=[];if(n){at(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function tP(e,t,n,r){t.type===$j.MERGE&&null!==t.source.queryId&&(at(fA(e.viewCache_),"We should always have a full cache before handling merges"),at(dA(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=zA(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,at(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),at(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),at(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,nP(e,s.changes,s.viewCache.eventCache.getNode(),null)}function nP(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),uA(e,i,"child_removed",t,r,n),uA(e,i,"child_added",t,r,n),uA(e,i,"child_moved",a,r,n),uA(e,i,"child_changed",t,r,n),uA(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var rP,iP=y((function e(){f(this,e),this.views=new Map}));function aP(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return at(null!=a,"SyncTree gave us an op for an invalid query."),tP(a,t,n,r)}var o,s=[],u=T(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(tP(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function oP(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=PA(n,i?r:null),u=!1;s?u=!0:r instanceof Ej?(s=RA(n,r),u=!1):(s=Ej.EMPTY_NODE,u=!1);var c=cA(new oA(s,u,!1),new oA(r,i,!1));return new $A(t,c)}return o}function sP(e,t,n,r,i,a){var o=oP(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(kj,(function(e,t){r.push(Rj(e,t))})),n.isFullyInitialized()&&r.push(Pj(n.getNode())),nP(e,r,n.getNode(),t)}(o,n)}function uP(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=fP(e);if("default"===i){var u,c=T(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),d=h[0],f=h[1];o=o.concat(eP(f,n,r)),ZA(f)&&(e.views.delete(d),f.query._queryParams.loadsAllData()||a.push(f.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(eP(p,n,r)),ZA(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!fP(e)&&a.push(new(at(JA,"Reference.ts has not been loaded"),JA)(t._repo,t._path)),{removed:a,events:o}}function cP(e){var t,n=[],r=T(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function lP(e,t){var n,r=null,i=T(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||XA(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function hP(e,t){if(t._queryParams.loadsAllData())return pP(e);var n=t._queryIdentifier;return e.views.get(n)}function dP(e,t){return null!=hP(e,t)}function fP(e){return null!=pP(e)}function pP(e){var t,n=T(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var vP=1,mP=y((function e(t){f(this,e),this.listenProvider_=t,this.syncPointTree_=new pA(null),this.pendingWriteTree_={visibleWrites:vA.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function yP(e,t,n,r,i){return function(e,t,n,r,i){at(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=mA(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?SP(e,new iA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function gP(e,t,n,r){!function(e,t,n,r){at(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=yA(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=pA.fromObject(n);return SP(e,new aA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function kP(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(TA(e.pendingWriteTree_,t)){var i=new pA(null);return null!=r.snap?i=i.set(RN(),!0):XC(r.children,(function(e){i=i.set(new PN(e),!0)})),SP(e,new nA(r.path,i,n))}return[]}function wP(e,t,n){return SP(e,new iA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function bP(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||dP(o,t))){var u=uP(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return fP(t)}));if(l&&!h){var d=e.syncPointTree_.subtree(a);if(!d.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&fP(t))return[pP(t)];var r=[];return t&&(r=cP(t)),XC(n,(function(e,t){r=r.concat(t)})),r}))}(d),p=0;p<f.length;++p){var v=f[p],m=v.query,y=NP(e,v);e.listenProvider_.startListening(OP(m),jP(e,m),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(OP(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(AP(t));e.listenProvider_.stopListening(OP(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=AP(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return s}function _P(e,t,n,r){var i=PP(e,r);if(null!=i){var a=RP(i),o=a.path,s=a.queryId,u=qN(o,t);return DP(e,o,new iA(eA(s),u,n))}return[]}function xP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=qN(e,i);a=a||lP(t,n),o=o||fP(t)}));var s,u=e.syncPointTree_.get(i);(u?(o=o||fP(u),a=a||lP(u,RN())):(u=new iP,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)?s=!0:(s=!1,a=Ej.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=lP(t,RN());n&&(a=a.updateImmediateChild(e,n))})));var c=dP(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=AP(t);at(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=vP++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var d=sP(u,t,n,SA(e.pendingWriteTree_,i),a,s);if(!c&&!o&&!r){var f=hP(u,t);d=d.concat(function(e,t,n){var r=t._path,i=jP(e,t),a=NP(e,n),o=e.listenProvider_.startListening(OP(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)at(!fP(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!BN(e)&&t&&fP(t))return[pP(t).query];var r=[];return t&&(r=r.concat(cP(t).map((function(e){return e.query})))),XC(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(OP(l),jP(e,l))}return o}(e,t,f))}return d}function IP(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=lP(n,qN(e,t));if(r)return r}));return AA(r,t,i,n,!0)}function EP(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=qN(e,n);r=r||lP(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||lP(i,RN()):(i=new iP,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new oA(r,!0,!1):null;return function(e){return dA(e.viewCache_)}(oP(i,t,SA(e.pendingWriteTree_,t._path),a?o.getNode():Ej.EMPTY_NODE,a))}function SP(e,t){return TP(t,e.syncPointTree_,null,SA(e.pendingWriteTree_,RN()))}function TP(e,t,n,r){if(BN(e.path))return CP(e,t,n,r);var i=t.get(RN());null==n&&null!=i&&(n=lP(i,RN()));var a=[],o=DN(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=FA(r,o);a=a.concat(TP(s,u,c,l))}return i&&(a=a.concat(aP(i,e,r,n))),a}function CP(e,t,n,r){var i=t.get(RN());null==n&&null!=i&&(n=lP(i,RN()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=FA(r,t),u=e.operationForChild(t);u&&(a=a.concat(CP(u,i,o,s)))})),i&&(a=a.concat(aP(i,e,r,n))),a}function NP(e,t){var n=t.query,r=jP(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ej.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=PP(e,n);if(r){var i=RP(r),a=i.path,o=i.queryId,s=qN(a,t);return DP(e,a,new rA(eA(o),s))}return[]}(e,n._path,r):function(e,t){return SP(e,new rA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return bP(e,n,null,i)}}}function jP(e,t){var n=AP(t);return e.queryToTagMap.get(n)}function AP(e){return e._path.toString()+"$"+e._queryIdentifier}function PP(e,t){return e.tagToQueryMap.get(t)}function RP(e){var t=e.indexOf("$");return at(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new PN(e.substr(0,t))}}function DP(e,t,n){var r=e.syncPointTree_.get(t);return at(r,"Missing sync point for query tag that we're tracking"),aP(r,n,SA(e.pendingWriteTree_,t),null)}function OP(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(at(rP,"Reference.ts has not been loaded"),rP)(e._repo,e._path):e}var LP=function(){function e(t){f(this,e),this.node_=t}return y(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),MP=function(){function e(t,n){f(this,e),this.syncTree_=t,this.path_=n}return y(e,[{key:"getImmediateChild",value:function(t){var n=VN(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return IP(this.syncTree_,this.path_)}}]),e}(),FP=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},UP=function(e,t,n){return e&&"object"===typeof e?(at(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?VP(e[".sv"],t,n):"object"===typeof e[".sv"]?BP(e[".sv"],t):void at(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},VP=function(e,t,n){if("timestamp"===e)return n.timestamp;at(!1,"Unexpected server value: "+e)},BP=function(e,t,n){e.hasOwnProperty("increment")||at(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&at(!1,"Unexpected increment value: "+r);var i=t.node();if(at(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},qP=function(e,t,n,r){return WP(t,new MP(n,e),r)},zP=function(e,t,n){return WP(e,new LP(t),n)};function WP(e,t,n){var r,i=e.getPriority().val(),a=UP(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=UP(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new vj(s,Cj(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new vj(a))),u.forEachChild(kj,(function(e,i){var a=WP(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var HP=y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};f(this,e),this.name=t,this.parent=n,this.node=r}));function GP(e,t){for(var n=t instanceof PN?t:new PN(t),r=e,i=DN(n);null!==i;){var a=Dt(r.node.children,i)||{children:{},childCount:0};r=new HP(i,r,a),i=DN(n=LN(n))}return r}function KP(e){return e.node.value}function QP(e,t){e.node.value=t,ZP(e)}function YP(e){return e.node.childCount>0}function JP(e,t){XC(e.node.children,(function(n,r){t(new HP(n,e,r))}))}function $P(e,t,n,r){n&&!r&&t(e),JP(e,(function(e){$P(e,t,!0,r)})),n&&r&&t(e)}function XP(e){return new PN(null===e.parent?e.name:XP(e.parent)+"/"+e.name)}function ZP(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===KP(e)&&!YP(e)}(n),i=Rt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ZP(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ZP(e))}(e.parent,e.name,e)}var eR=/[\[\].#$\/\u0000-\u001F\u007F]/,tR=/[\[\].#$\u0000-\u001F\u007F]/,nR=10485760,rR=function(e){return"string"===typeof e&&0!==e.length&&!eR.test(e)},iR=function(e){return"string"===typeof e&&0!==e.length&&!tR.test(e)},aR=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!WC(e)||e&&"object"===typeof e&&Rt(e,".sv")},oR=function(e,t,n,r){r&&void 0===t||sR(Kt(e,"value"),t,n)},sR=function e(t,n,r){var i=r instanceof PN?new GN(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+QN(i));if("function"===typeof n)throw new Error(t+"contains a function "+QN(i)+" with contents = "+n.toString());if(WC(n))throw new Error(t+"contains "+n.toString()+" "+QN(i));if("string"===typeof n&&n.length>nR/3&&Jt(n)>nR)throw new Error(t+"contains a string greater than "+nR+" utf8 bytes "+QN(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(XC(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!rR(n)))throw new Error(t+" contains an invalid key ("+n+") "+QN(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Jt(u),KN(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Jt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+QN(i)+" in addition to actual children.")}},uR=function(e,t,n,r){if(!r||void 0!==t){var i=Kt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];XC(t,(function(e,t){var r=new PN(e);if(sR(i,t,VN(n,r)),".priority"===MN(r)&&!aR(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=FN(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!rR(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(zN);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&HN(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},cR=function(e,t,n){if(!n||void 0!==t){if(WC(t))throw new Error(Kt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!aR(t))throw new Error(Kt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lR=function(e,t,n,r){if((!r||void 0!==n)&&!rR(n))throw new Error(Kt(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hR=function(e,t,n,r){if((!r||void 0!==n)&&!iR(n))throw new Error(Kt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dR=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hR(e,t,n,r)},fR=function(e,t){if(".info"===DN(t))throw new Error(e+" failed = Can't modify data under /.info/")},pR=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!rR(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),iR(e)}(n))throw new Error(Kt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},vR=y((function e(){f(this,e),this.eventLists_=[],this.recursionDepth_=0}));function mR(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||WN(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function yR(e,t,n){mR(e,n),kR(e,(function(e){return WN(e,t)}))}function gR(e,t,n){mR(e,n),kR(e,(function(e){return HN(e,t)||HN(t,e)}))}function kR(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(wR(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function wR(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();LC&&UC("event: "+n.toString()),nN(r)}}}var bR="repo_interrupt",_R=25,xR=function(){function e(t,n,r,i){f(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kj(),this.transactionQueueTree_=new HP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return y(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function IR(e,t,n){if(e.stats_=gN(e.repoInfo_),e.forceRestClient_||rN())e.server_=new Hj(e.repoInfo_,(function(t,n,r,i){TR(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return CR(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{At(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new $N(e.repoInfo_,t,(function(t,n,r,i){TR(e,t,n,r,i)}),(function(t){CR(e,t)}),(function(t){!function(e,t){XC(t,(function(t,n){NR(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return yN[n]||(yN[n]=t()),yN[n]}(e.repoInfo_,(function(){return new Zj(e.stats_,e.server_)})),e.infoData_=new Gj,e.infoSyncTree_=new mP({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=wP(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),NR(e,"connected",!1),e.serverSyncTree_=new mP({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);gR(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function ER(e){var t=e.infoData_.getNode(new PN(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function SR(e){return FP({timestamp:ER(e)})}function TR(e,t,n,r,i){e.dataUpdateCount++;var a=new PN(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Lt(n,(function(e){return Cj(e)}));o=function(e,t,n,r){var i=PP(e,r);if(i){var a=RP(i),o=a.path,s=a.queryId,u=qN(o,t),c=pA.fromObject(n);return DP(e,o,new aA(eA(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Cj(n);o=_P(e.serverSyncTree_,a,u,i)}else if(r){var c=Lt(n,(function(e){return Cj(e)}));o=function(e,t,n){var r=pA.fromObject(n);return SP(e,new aA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Cj(n);o=wP(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=VR(e,a)),gR(e.eventQueue_,h,o)}function CR(e,t){NR(e,"connected",t),!1===t&&function(e){LR(e,"onDisconnectEvents");var t=SR(e),n=Kj();Jj(e.onDisconnect_,RN(),(function(r,i){var a=qP(r,i,e.serverSyncTree_,t);Qj(n,r,a)}));var r=[];Jj(n,RN(),(function(t,n){r=r.concat(wP(e.serverSyncTree_,t,n));var i=HR(e,t);VR(e,i)})),e.onDisconnect_=Kj(),gR(e.eventQueue_,RN(),r)}(e)}function NR(e,t,n){var r=new PN("/.info/"+t),i=Cj(n);e.infoData_.updateSnapshot(r,i);var a=wP(e.infoSyncTree_,r,i);gR(e.eventQueue_,r,a)}function jR(e){return e.nextWriteId_++}function AR(e,t,n,r,i){LR(e,"set",{path:t.toString(),value:n,priority:r});var a=SR(e),o=Cj(n,r),s=IP(e.serverSyncTree_,t),u=zP(o,s,a),c=jR(e),l=yP(e.serverSyncTree_,t,u,c,!0);mR(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||zC("set at "+t+" failed: "+n);var o=kP(e.serverSyncTree_,c,!a);gR(e.eventQueue_,t,o),MR(e,i,n,r)}));var h=HR(e,t);VR(e,h),gR(e.eventQueue_,h,[])}function PR(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Yj(e.onDisconnect_,t),MR(e,n,r,i)}))}function RR(e,t,n,r){var i=Cj(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Qj(e.onDisconnect_,t,i),MR(e,r,n,a)}))}function DR(e,t,n){var r;r=".info"===DN(t._path)?bP(e.infoSyncTree_,t,n):bP(e.serverSyncTree_,t,n),yR(e.eventQueue_,t._path,r)}function OR(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bR)}function LR(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];UC.apply(void 0,[t].concat(r))}function MR(e,t,n,r){t&&nN((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function FR(e,t,n){return IP(e.serverSyncTree_,t,n)||Ej.EMPTY_NODE}function UR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||WR(e,t),KP(t)){var n=qR(e,t);at(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=FR(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];at(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=qN(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){LR(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(kP(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);WR(e,GP(e.transactionQueueTree_,t)),UR(e,e.transactionQueueTree_),gR(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)nN(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{zC("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}VR(e,t)}}),o)}(e,XP(t),n)}else YP(t)&&JP(t,(function(t){UR(e,t)}))}function VR(e,t){var n=BR(e,t),r=XP(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=qN(n,c.path),h=!1;if(at(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(kP(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=_R)h=!0,s="maxretry",i=i.concat(kP(e.serverSyncTree_,c.currentWriteId,!0));else{var d=FR(e,c.path,o);c.currentInputSnapshot=d;var f=t[a].update(d.val());if(void 0!==f){sR("transaction failed: Data returned ",f,c.path);var p=Cj(f);"object"===typeof f&&null!=f&&Rt(f,".priority")||(p=p.updatePriority(d.getPriority()));var v=c.currentWriteId,m=SR(e),y=zP(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=jR(e),o.splice(o.indexOf(v),1),i=(i=i.concat(yP(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(kP(e.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(kP(e.serverSyncTree_,c.currentWriteId,!0))}gR(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);WR(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)nN(r[c]);UR(e,e.transactionQueueTree_)}(e,qR(e,n),r),r}function BR(e,t){var n,r=e.transactionQueueTree_;for(n=DN(t);null!==n&&void 0===KP(r);)r=GP(r,n),n=DN(t=LN(t));return r}function qR(e,t){var n=[];return zR(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function zR(e,t,n){var r=KP(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);JP(t,(function(t){zR(e,t,n)}))}function WR(e,t){var n=KP(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,QP(t,n.length>0?n:void 0)}JP(t,(function(t){WR(e,t)}))}function HR(e,t){var n=XP(BR(e,t)),r=GP(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){GR(e,t)})),GR(e,r),$P(r,(function(t){GR(e,t)})),n}function GR(e,t){var n=KP(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(at(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(at(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(kP(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?QP(t,void 0):n.length=a+1,gR(e.eventQueue_,XP(t),i);for(var s=0;s<r.length;s++)nN(r[s])}}var KR=function(e,t){var n=QR(e),r=n.namespace;"firebase.com"===n.domain&&qC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||qC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new fN(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new PN(n.pathString)}},QR=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var d=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=T(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):zC("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},YR="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",JR=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=YR.charAt(n%64),n=Math.floor(n/64);at(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=YR.charAt(t[r]);return at(20===o.length,"nextPushId: Length should be 20."),o}}(),$R=function(){function e(t,n,r,i){f(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return y(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+At(this.snapshot.exportVal())}}]),e}(),XR=function(){function e(t,n,r){f(this,e),this.eventRegistration=t,this.error=n,this.path=r}return y(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),ZR=function(){function e(t,n){f(this,e),this.snapshotCallback=t,this.cancelCallback=n}return y(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return at(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),eD=function(){function e(t,n){f(this,e),this._repo=t,this._path=n}return y(e,[{key:"cancel",value:function(){var e=new yt;return PR(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){fR("OnDisconnect.remove",this._path);var e=new yt;return RR(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){fR("OnDisconnect.set",this._path),oR("OnDisconnect.set",e,this._path,!1);var t=new yt;return RR(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){fR("OnDisconnect.setWithPriority",this._path),oR("OnDisconnect.setWithPriority",e,this._path,!1),cR("OnDisconnect.setWithPriority",t,!1);var n=new yt;return function(e,t,n,r,i){var a=Cj(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Qj(e.onDisconnect_,t,a),MR(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){fR("OnDisconnect.update",this._path),uR("OnDisconnect.update",e,this._path,!1);var t=new yt;return function(e,t,n,r){if(Ot(n))return UC("onDisconnect().update() called with empty data.  Don't do anything."),void MR(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&XC(n,(function(n,r){var i=Cj(r);Qj(e.onDisconnect_,VN(t,n),i)})),MR(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),tD=function(){function e(t,n,r,i){f(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return y(e,[{key:"key",get:function(){return BN(this._path)?null:MN(this._path)}},{key:"ref",get:function(){return new aD(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Wj(this._queryParams),t=JC(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Wj(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=$t(t))instanceof e))return!1;var n=this._repo===t._repo,r=WN(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function nD(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function rD(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===nj){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==HC)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==GC)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===kj){if(null!=t&&!aR(t)||null!=n&&!aR(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(at(e.getIndex()instanceof Nj||e.getIndex()===Aj,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function iD(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var aD=function(e){k(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,r,new Uj,!1)}return y(n,[{key:"parent",get:function(){var e=UN(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(tD),oD=function(){function e(t,n,r){f(this,e),this._node=t,this.ref=n,this._index=r}return y(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new PN(t),r=cD(this.ref,t);return new e(this._node.getChild(n),r,kj)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,cD(n.ref,r),kj))}))}},{key:"hasChild",value:function(e){var t=new PN(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function sD(e,t){return(e=$t(e))._checkNotDeleted("ref"),void 0!==t?cD(e._root,t):e._root}function uD(e,t){(e=$t(e))._checkNotDeleted("refFromURL");var n=KR(t,e._repo.repoInfo_.nodeAdmin);pR("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||qC("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),sD(e,n.path.toString())}function cD(e,t){return null===DN((e=$t(e))._path)?dR("child","path",t,!1):hR("child","path",t,!1),new aD(e._repo,VN(e._path,t))}function lD(e,t){e=$t(e),fR("set",e._path),oR("set",t,e._path,!1);var n=new yt;return AR(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function hD(e,t){uR("update",t,e._path,!1);var n=new yt;return function(e,t,n,r){LR(e,"update",{path:t.toString(),value:n});var i=!0,a=SR(e),o={};if(XC(n,(function(n,r){i=!1,o[n]=qP(VN(t,n),Cj(r),e.serverSyncTree_,a)})),i)UC("update() called with empty data.  Don't do anything."),MR(0,r,"ok",void 0);else{var s=jR(e),u=gP(e.serverSyncTree_,t,o,s);mR(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||zC("update at "+t+" failed: "+n);var o=kP(e.serverSyncTree_,s,!a),u=o.length>0?VR(e,t):t;gR(e.eventQueue_,u,o),MR(0,r,n,i)})),XC(n,(function(n){var r=HR(e,VN(t,n));VR(e,r)})),gR(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function dD(e){e=$t(e);var t=new ZR((function(){})),n=new fD(t);return function(e,t,n){var r=EP(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Cj(r).withIndex(t._queryParams.getIndex());if(xP(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=wP(e.serverSyncTree_,t._path,a);else{var o=jP(e.serverSyncTree_,t);i=_P(e.serverSyncTree_,t._path,a,o)}return gR(e.eventQueue_,t._path,i),bP(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return LR(e,"get for query "+At(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new oD(t,new aD(e._repo,e._path),e._queryParams.getIndex())}))}var fD=function(){function e(t){f(this,e),this.callbackContext=t}return y(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new $R("value",this,new oD(e.snapshotNode,new aD(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new XR(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),pD=function(){function e(t,n){f(this,e),this.eventType=t,this.callbackContext=n}return y(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new XR(this,e,t):null}},{key:"createEvent",value:function(e,t){at(null!=e.childName,"Child events should have a childName.");var n=cD(new aD(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new $R(e.type,this,new oD(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function vD(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){DR(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new ZR(n,a||void 0),c="value"===t?new fD(u):new pD(t,u);return function(e,t,n){var r;r=".info"===DN(t._path)?xP(e.infoSyncTree_,t,n):xP(e.serverSyncTree_,t,n),yR(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return DR(e._repo,e,c)}}function mD(e,t,n,r){return vD(e,"value",t,n,r)}function yD(e,t,n,r){return vD(e,"child_added",t,n,r)}function gD(e,t,n,r){return vD(e,"child_changed",t,n,r)}function kD(e,t,n,r){return vD(e,"child_moved",t,n,r)}function wD(e,t,n,r){return vD(e,"child_removed",t,n,r)}function bD(e,t,n){var r=null,i=n?new ZR(n):null;"value"===t?r=new fD(i):t&&(r=new pD(t,i)),DR(e._repo,e,r)}var _D=y((function e(){f(this,e)})),xD=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){oR("endAt",this._value,e._path,!0);var t=Bj(e._queryParams,this._value,this._key);if(iD(t),rD(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new tD(e._repo,e._path,t,e._orderByCalled)}}]),n}(_D);var ID=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){oR("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===nj||n?Bj(e,t,n):Bj(e,t,HC)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(iD(t),rD(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new tD(e._repo,e._path,t,e._orderByCalled)}}]),n}(_D);var ED=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){oR("startAt",this._value,e._path,!0);var t=Vj(e._queryParams,this._value,this._key);if(iD(t),rD(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new tD(e._repo,e._path,t,e._orderByCalled)}}]),n}(_D);var SD=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){oR("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===nj||n?Vj(e,t,n):Vj(e,t,GC)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(iD(t),rD(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new tD(e._repo,e._path,t,e._orderByCalled)}}]),n}(_D);var TD=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new tD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(_D);var CD=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new tD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(_D);var ND=function(e){k(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this))._path=e,r}return y(n,[{key:"_apply",value:function(e){nD(e,"orderByChild");var t=new PN(this._path);if(BN(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Nj(t),r=qj(e._queryParams,n);return rD(r),new tD(e._repo,e._path,r,!0)}}]),n}(_D);var jD=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){nD(e,"orderByKey");var t=qj(e._queryParams,nj);return rD(t),new tD(e._repo,e._path,t,!0)}}]),n}(_D);var AD=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){nD(e,"orderByPriority");var t=qj(e._queryParams,kj);return rD(t),new tD(e._repo,e._path,t,!0)}}]),n}(_D);var PD=function(e){k(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){nD(e,"orderByValue");var t=qj(e._queryParams,Aj);return rD(t),new tD(e._repo,e._path,t,!0)}}]),n}(_D);var RD=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){if(oR("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xD(this._value,this._key)._apply(new ED(this._value,this._key)._apply(e))}}]),n}(_D);function DD(e){for(var t=$t(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){at(!JA,"__referenceConstructor has already been defined"),JA=e}(aD),function(e){at(!rP,"__referenceConstructor has already been defined"),rP=e}(aD);var OD="FIREBASE_DATABASE_EMULATOR_HOST",LD={},MD=!1;function FD(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||qC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),UC("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=KR(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Librariaa-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[OD]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=KR(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new sN(sN.OWNER):new oN(e.name,e.options,t);pR("Invalid Firebase Database URL",s),BN(s.path)||qC("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=LD[t.name];i||(i={},LD[t.name]=i);var a=i[e.toURLString()];a&&qC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new xR(e,MD,n,r),i[e.toURLString()]=a,a}(u,e,l,new aN(e.name,n));return new UD(h,e)}var UD=function(){function e(t,n){f(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return y(e,[{key:"_repo",get:function(){return this._instanceStarted||(IR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new aD(this._repo,RN())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=LD[t];n&&n[e.key]===e||qC("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),OR(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&qC("Cannot call "+e+" on a deleted database.")}}]),e}();function VD(){EN.IS_TRANSPORT_INITIALIZED&&zC("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function BD(){VD(),bN.forceDisallow()}function qD(){VD(),IN.forceDisallow(),bN.forceAllow()}function zD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=$t(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&qC("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qC('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new sN(sN.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:gt(r.mockUserToken,e.app.options.projectId);a=new sN(o)}!function(e,t,n,r){e.repoInfo_=new fN("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function WD(e){var t;(e=$t(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(bR)}function HD(e,t){FC(e,t)}var GD={".sv":"timestamp"};var KD=function(){function e(t,n){f(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function QD(e,t,n){var r;if(e=$t(e),fR("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new yt,o=mD(e,(function(){}));return function(e,t,n,r,i,a){LR(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:RC(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=FR(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{sR("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=GP(e.transactionQueueTree_,t),h=KP(l)||[];h.push(o),QP(l,h),"object"===typeof u&&null!==u&&Rt(u,".priority")?(c=Dt(u,".priority"),at(aR(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(IP(e.serverSyncTree_,t)||Ej.EMPTY_NODE).getPriority().val();var d=SR(e),f=Cj(u,c),p=zP(f,s,d);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=jR(e);var v=yP(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);gR(e.eventQueue_,t,v),UR(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new oD(r,new aD(e._repo,e._path),kj),a.resolve(new KD(n,i)))}),o,i),a.promise}$N.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},$N.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){SC(Xn),Hn(new tn("database",(function(e,t){var n=t.instanceIdentifier;return FD(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ir(xC,IC,e),ir(xC,IC,"esm2017")}();var YD="@firebase/database-compat",JD="0.3.4",$D=new fn("@firebase/database-compat"),XD=function(e){var t="FIREBASE WARNING: "+e;$D.warn(t)},ZD=function(){function e(t){f(this,e),this._delegate=t}return y(e,[{key:"cancel",value:function(e){Gt("OnDisconnect.cancel",0,1,arguments.length),Qt("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Gt("OnDisconnect.remove",0,1,arguments.length),Qt("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Gt("OnDisconnect.set",1,2,arguments.length),Qt("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Gt("OnDisconnect.setWithPriority",2,3,arguments.length),Qt("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Gt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,XD("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qt("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),eO=function(){function e(t,n){f(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return Gt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),tO=function(){function e(t,n){f(this,e),this._database=t,this._delegate=n}return y(e,[{key:"val",value:function(){return Gt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Gt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Gt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Gt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Gt("DataSnapshot.child",0,1,arguments.length),t=String(t),hR("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Gt("DataSnapshot.hasChild",1,1,arguments.length),hR("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Gt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Gt("DataSnapshot.forEach",1,1,arguments.length),Qt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Gt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Gt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Gt("DataSnapshot.ref",0,0,arguments.length),new rO(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),nO=function(){function e(t,n){f(this,e),this.database=t,this._delegate=n}return y(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Gt("Query.on",2,4,arguments.length),Qt("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new tO(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return mD(this._delegate,u,c),n;case"child_added":return yD(this._delegate,u,c),n;case"child_removed":return wD(this._delegate,u,c),n;case"child_changed":return gD(this._delegate,u,c),n;case"child_moved":return kD(this._delegate,u,c),n;default:throw new Error(Kt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Gt("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Kt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Qt("Query.off","callback",t,!0),Yt("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,bD(this._delegate,e,r)}else bD(this._delegate,e)}},{key:"get",value:function(){var e=this;return dD(this._delegate).then((function(t){return new tO(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Gt("Query.once",1,4,arguments.length),Qt("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new yt,u=function(e,t){var r=new tO(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":mD(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":yD(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":wD(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":gD(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":kD(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(Kt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return Gt("Query.limitToFirst",1,1,arguments.length),new e(this.database,DD(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new TD(e)}(t)))}},{key:"limitToLast",value:function(t){return Gt("Query.limitToLast",1,1,arguments.length),new e(this.database,DD(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new CD(e)}(t)))}},{key:"orderByChild",value:function(t){return Gt("Query.orderByChild",1,1,arguments.length),new e(this.database,DD(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hR("orderByChild","path",e,!1),new ND(e)}(t)))}},{key:"orderByKey",value:function(){return Gt("Query.orderByKey",0,0,arguments.length),new e(this.database,DD(this._delegate,new jD))}},{key:"orderByPriority",value:function(){return Gt("Query.orderByPriority",0,0,arguments.length),new e(this.database,DD(this._delegate,new AD))}},{key:"orderByValue",value:function(){return Gt("Query.orderByValue",0,0,arguments.length),new e(this.database,DD(this._delegate,new PD))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gt("Query.startAt",0,2,arguments.length),new e(this.database,DD(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return lR("startAt","key",t,!0),new ED(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gt("Query.startAfter",0,2,arguments.length),new e(this.database,DD(this._delegate,function(e,t){return lR("startAfter","key",t,!0),new SD(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gt("Query.endAt",0,2,arguments.length),new e(this.database,DD(this._delegate,function(e,t){return lR("endAt","key",t,!0),new xD(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Gt("Query.endBefore",0,2,arguments.length),new e(this.database,DD(this._delegate,function(e,t){return lR("endBefore","key",t,!0),new ID(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Gt("Query.equalTo",1,2,arguments.length),new e(this.database,DD(this._delegate,function(e,t){return lR("equalTo","key",t,!0),new RD(e,t)}(t,n)))}},{key:"toString",value:function(){return Gt("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Gt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Gt("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new rO(this.database,new aD(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Qt(e,"cancel",r.cancel,!0),r.context=n,Yt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Kt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),rO=function(e){k(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,new tD(r._repo,r._path,new Uj,!1))).database=e,i._delegate=r,i}return y(n,[{key:"getKey",value:function(){return Gt("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Gt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,cD(this._delegate,e))}},{key:"getParent",value:function(){Gt("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Gt("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Gt("Reference.set",1,2,arguments.length),Qt("Reference.set","onComplete",t,!0);var n=lD(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Gt("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,XD("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fR("Reference.update",this._delegate._path),Qt("Reference.update","onComplete",t,!0);var i=hD(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Gt("Reference.setWithPriority",2,3,arguments.length),Qt("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(fR("setWithPriority",e._path),oR("setWithPriority",t,e._path,!1),cR("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new yt;return AR(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Gt("Reference.remove",0,1,arguments.length),Qt("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,fR("remove",t._path),lD(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;Gt("Reference.transaction",1,3,arguments.length),Qt("Reference.transaction","transactionUpdate",e,!1),Qt("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Kt(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=QD(this._delegate,e,{applyLocally:n}).then((function(e){return new eO(e.committed,new tO(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Gt("Reference.setPriority",1,2,arguments.length),Qt("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=$t(e),fR("setPriority",e._path),cR("setPriority",t,!1);var n=new yt;return AR(e._repo,VN(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Gt("Reference.push",0,2,arguments.length),Qt("Reference.push","onComplete",t,!0);var i=function(e,t){e=$t(e),fR("push",e._path),oR("push",t,e._path,!0);var n,r=ER(e._repo),i=JR(r),a=cD(e,i),o=cD(e,i);return n=null!=t?lD(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return fR("Reference.onDisconnect",this._delegate._path),new ZD(new eD(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(nO),iO=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:BD,forceLongPolling:qD}}return y(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};zD(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Gt("database.ref",0,1,arguments.length),e instanceof rO){var t=uD(this._delegate,e.toString());return new rO(this,t)}var n=sD(this._delegate,e);return new rO(this,n)}},{key:"refFromURL",value:function(e){Gt("database.refFromURL",1,1,arguments.length);var t=uD(this._delegate,e);return new rO(this,t)}},{key:"goOffline",value:function(){return Gt("database.goOffline",0,0,arguments.length),function(e){(e=$t(e))._checkNotDeleted("goOffline"),OR(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Gt("database.goOnline",0,0,arguments.length),WD(this._delegate)}}]),e}();iO.ServerValue={TIMESTAMP:GD,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var aO=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;SC(r);var u=new rn("auth-internal",new sn("database-standalone"));return u.setComponent(new tn("auth-internal",(function(){return i}),"PRIVATE")),{instance:new iO(FD(t,u,void 0,n,s),t),namespace:a}}}),oO=iO.ServerValue;!function(e){e.INTERNAL.registerComponent(new tn("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new iO(i,r)}),"PUBLIC").setServiceProps({Reference:rO,Query:nO,Database:iO,DataSnapshot:tO,enableLogging:HD,INTERNAL:aO,ServerValue:oO}).setMultipleInstances(!0)),e.registerVersion(YD,JD)}(Rr);var sO=Rr.initializeApp({apiKey:"AIzaSyBLYuebMGwIZVfNQ9uvcwyE_wsCckKVH1I",authDomain:"libraria-6e67a.firebaseapp.com",databaseURL:"https://libraria-6e67a-default-rtdb.firebaseio.com",projectId:"libraria-6e67a",storageBucket:"libraria-6e67a.appspot.com",messagingSenderId:"284994241520",appId:"1:284994241520:web:bbc7aef14a847f1c6e5335"}).database().ref();function uO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1],i=l((0,r.useState)([]),2),a=(i[0],i[1],l((0,r.useState)([]),2)),o=(a[0],a[1],l((0,r.useState)(""),2)),s=o[0],u=o[1];return(0,$e.jsx)("div",{children:(0,$e.jsx)("div",{className:"sb2-2-3",children:(0,$e.jsx)("div",{className:"row",children:(0,$e.jsx)("div",{className:"col-md-12",children:(0,$e.jsxs)("div",{className:"box-inn-sp",children:[(0,$e.jsxs)("div",{className:"inn-title",children:[(0,$e.jsx)("h4",{children:"Student Details  "}),(0,$e.jsx)("br",{}),(0,$e.jsx)("span",{className:"",children:(0,$e.jsx)("select",{onChange:function(e){u(e.target.value),sO.child("studentdata").child(e.target.value).child("datas").on("value",(function(e){n(e.val())}))},style:{display:"block"},id:"Class",name:"Class",children:nt.map((function(e){return(0,$e.jsx)("option",{value:e,children:e})}))})}),(0,$e.jsx)("p",{children:"All about students like name, student id, phone, email, country, city and more"})]}),(0,$e.jsx)("div",{className:"tab-inn",children:(0,$e.jsx)("div",{id:"tablepenal",style:{overflow:"scroll",maxHeight:"550px"},className:"table-responsive table-desi",children:(0,$e.jsxs)("table",{className:"table table-hover",children:[(0,$e.jsx)("thead",{children:(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("th",{children:"User"}),(0,$e.jsx)("th",{children:"Name"}),(0,$e.jsx)("th",{children:"Roll.No"}),(0,$e.jsx)("th",{children:"FatherName"}),(0,$e.jsx)("th",{children:"D.O.B"}),(0,$e.jsx)("th",{children:"Class"}),(0,$e.jsx)("th",{children:"View"})]})}),(0,$e.jsx)("tbody",{children:Object.keys(t).map((function(e){return console.log(e),(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{children:(0,$e.jsx)("span",{className:"list-img",children:(0,$e.jsx)("img",{src:t[e].Image,alt:""})})}),(0,$e.jsx)("td",{children:(0,$e.jsxs)("a",{href:"#",children:[(0,$e.jsx)("span",{className:"list-enq-name",children:"".concat(t[e].Name,"  ")})," "]})}),(0,$e.jsx)("td",{children:t[e].RollNo}),(0,$e.jsx)("td",{children:t[e].Fathername}),(0,$e.jsx)("td",{children:t[e].DOB}),(0,$e.jsx)("td",{children:(0,$e.jsx)("span",{className:"label label-success",children:s})}),(0,$e.jsx)("td",{children:(0,$e.jsx)("button",{className:" btn btn-info",onClick:function(){return t=e,void sO.child("studentdata").child(s).child("datas").child(t).remove((function(e){e?alert(e):alert("delete")}));var t},children:"Delete"})})]})})}))})]})})})]})})})})})}function cO(){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)("div",{class:"container-fluid sb2",children:(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"sb2-1",children:(0,$e.jsx)(et,{})}),(0,$e.jsx)("div",{class:"sb2-2",children:(0,$e.jsx)(uO,{})})]})})})}function lO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1];function i(e){n(vn(vn({},t),{},rt({},e.target.name,e.target.value)))}var a=l((0,r.useState)(""),2),o=a[0],s=a[1];return(0,r.useEffect)((function(){}),[o]),console.log(t),(0,$e.jsxs)("div",{children:[(0,$e.jsx)("form",{children:(0,$e.jsx)("div",{class:"file-field input-field",children:(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"input-field col s12",children:(0,$e.jsx)("select",{name:"",id:"course",class:"validate",required:!0,children:nt.map((function(e){return(0,$e.jsx)("option",{value:e,children:e})}))})}),(0,$e.jsx)("div",{class:"input-field col s12",children:(0,$e.jsx)("select",{name:"",id:"sem",class:"validate",required:!0,children:tt.map((function(e){return(0,$e.jsx)("option",{value:"sem".concat(e),children:"sem".concat(e)})}))})}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese4",name:"Book1",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book1 Name"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese5",name:"Book1URL",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book1 Image URL"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese4",name:"Book2",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book2 Name"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese5",name:"Book2URL",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book2 Image URL"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese4",name:"Book3",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book3 Name"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese5",name:"Book3URL",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book3 Image URL"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese4",name:"Book4",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book4 Name"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese5",name:"Book4URL",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book4 Image URL"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese4",name:"Book5",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book5 Name"})]}),(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:i,id:"Courese5",name:"Book5URL",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{children:"Book5 Image URL"})]})]})})}),(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"input-field col s12",children:(0,$e.jsx)("i",{class:"waves-effect waves-light btn-large waves-input-wrapper",children:(0,$e.jsx)("input",{onClick:function(){var e=document.getElementById("course").value,n=document.getElementById("sem").value;null==e||""==e?null==n||""==n?alert("please enter Course and sem"):alert("please enter sem"):sO.child("CourseDetails").child(e).child(n).remove((function(r){r?alert(r):sO.child("CourseDetails").child(e).child(n).push(t,(function(e){e?alert(e):(alert("success"),window.location.reload())}))})),s("1")},type:"submit",class:"waves-button-input",value:"Save"})})})})]})}function hO(){var e=(new Date).getDate(),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(new Date).getMonth()],n=(new Date).getFullYear(),i=l((0,r.useState)(""),2),a=i[0],o=i[1],s=l((0,r.useState)({}),2),u=s[0],c=s[1],h=l((0,r.useState)({}),2),d=h[0],f=h[1],p=l((0,r.useState)({}),2),v=p[0],m=p[1],y=l((0,r.useState)(""),2),g=(y[0],y[1]),k=l((0,r.useState)(0),2),w=k[0],b=k[1];function _(r){var i,a=r.target.title,o=r.target.checked;1==o?(b(w+1),f(vn(vn({},d),{},(rt(i={},r.target.name,a),rt(i,"issuedatess",e),rt(i,"months",t),rt(i,"years",n),rt(i,"totalbook",w+1),i)))):0==o&&(b(w-1),delete d[r.target.name])}return(0,r.useEffect)((function(){5==w&&(document.getElementById("box").checked=!0),5!==w&&(document.getElementById("box").checked=!1)}),[w]),(0,$e.jsxs)("div",{children:[(0,$e.jsx)("form",{children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("select",{id:"class",children:nt.map((function(e){return(0,$e.jsx)("option",{value:e,children:e})}))}),(0,$e.jsx)("select",{id:"sems",children:tt.map((function(e){return(0,$e.jsx)("option",{value:"sem".concat(e),children:"sem".concat(e)})}))})]})})})}),(0,$e.jsx)("div",{class:"row",id:"subbtn",children:(0,$e.jsx)("div",{class:"input-field col s12",children:(0,$e.jsx)("i",{class:"waves-effect waves-light btn-large waves-input-wrapper",children:(0,$e.jsx)("input",{type:"submit",class:"waves-button-input",style:{fontSize:"large"},value:"Submit",onClick:function(){var e=document.getElementById("class").value,t=document.getElementById("sems").value;null==e||""==e||"choose class"==e?null==t||""==t||"semchoose"==t?alert("Please select Courese and semester"):alert("please select Course"):"choose class"!==e&&(null==t||""==t||"semchoose"==t?alert("Please select semester"):(o(e),document.getElementById("data").style.display="block",document.getElementById("subbtn").style.display="none",document.getElementById("rolbtn").style.display="block",sO.child("studentdata").child(e).on("value",(function(e){}))))}})})})}),(0,$e.jsx)("form",{children:(0,$e.jsxs)("div",{class:"row",id:"data",style:{display:"none"},children:[(0,$e.jsxs)("div",{class:"input-field col s6",children:[(0,$e.jsx)("input",{id:"t5-n1",type:"text",class:"validate"}),(0,$e.jsx)("label",{for:"t5-n1",children:"Roll Number"})]}),(0,$e.jsx)("div",{class:"input-field col s6",id:"studentnames",style:{display:"none"},children:Object.keys(v).map((function(e){return(0,$e.jsx)("input",{id:"t5-n2",type:"text",onChange:function(){g("1")},value:v[e].Name,disabled:!0,class:"validate"})}))})]})}),(0,$e.jsx)("div",{className:"row",children:(0,$e.jsx)("div",{class:"input-field col s12",style:{display:"none"},id:"rolbtn",children:(0,$e.jsx)("i",{class:"waves-effect waves-light btn-large waves-input-wrapper",children:(0,$e.jsx)("input",{type:"submit",class:"waves-button-input",style:{fontSize:"large"},value:"Find Roll No",onClick:function(){var e=document.getElementById("t5-n1").value;sO.child("studentdata").child(a).child(e).on("value",(function(t){null!==t.val()?(m(t.val()),document.getElementById("studentnames").style.display="block",document.getElementById("rolbtn").style.display="none",document.getElementById("refresh").style.display="block",document.getElementById("bookbtn").style.display="block"):null==t.val()&&sO.child("studentdata").child(a).push(e,(function(t){if(t)alert(t);else{sO.child("studentdata").child(a).child(e).push({Name:"No data"},(function(t){t?alert(t):sO.child("studentdata").child(a).child(e).on("value",(function(e){m(e.val())}))}))}}))}))}})})})}),(0,$e.jsxs)("div",{className:"row",children:[(0,$e.jsx)("div",{class:"input-field col s6",style:{display:"none"},id:"bookbtn",children:(0,$e.jsx)("i",{class:"waves-effect waves-light btn-large waves-input-wrapper",children:(0,$e.jsx)("input",{type:"submit",class:"waves-button-input",style:{fontSize:"large"},value:"Find Books",onClick:function(){var e=document.getElementById("sems").value,t=document.getElementById("class").value;null==t||""==t?null==e||""==e?alert("Please select Courese and semester"):alert("please select Course"):sO.child("CourseDetails").child(t).child(e).on("value",(function(n){if(null==n.val()||""==n.val()){sO.child("CourseDetails").child(t).child(e).push({Book1:"nodata"})}else c(n.val()),document.getElementById("bookbtn").style.display="none",document.getElementById("bookselector").style.display="block"}))}})})}),(0,$e.jsx)("div",{class:"input-field col s6",style:{display:"none"},id:"refresh",children:(0,$e.jsx)("i",{class:"waves-effect waves-light btn-large waves-input-wrapper",children:(0,$e.jsx)("input",{type:"submit",class:"waves-button-input",style:{fontSize:"large"},value:"Refresh",onClick:function(){window.location.reload()}})})})]}),(0,$e.jsxs)("div",{className:"row",style:{display:"none"},id:"bookselector",children:[(0,$e.jsx)("div",{class:"input-field col s12 ",children:(0,$e.jsxs)("table",{className:"table table-striped",children:[(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("input",{type:"checkbox",onClick:function(r){var i,a=r.target.checked;if(1==a)b(5),(o=document.getElementById("box1")).checked=!0,(s=document.getElementById("box2")).checked=!0,(u=document.getElementById("box3")).checked=!0,(c=document.getElementById("box4")).checked=!0,(l=document.getElementById("box5")).checked=!0,f((rt(i={},o.name,o.title),rt(i,s.name,s.title),rt(i,u.name,u.title),rt(i,c.name,c.title),rt(i,l.name,l.title),rt(i,"issuedatess",e),rt(i,"months",t),rt(i,"years",n),rt(i,"totalbook",w+1),i));else if(0==a){var o,s,u,c,l;b(0),(o=document.getElementById("box1")).checked=!1,(s=document.getElementById("box2")).checked=!1,(u=document.getElementById("box3")).checked=!1,(c=document.getElementById("box4")).checked=!1,(l=document.getElementById("box5")).checked=!1,f({book:"Not any books"})}},name:"",id:"box"}),(0,$e.jsx)("label",{style:{fontSize:"large"},htmlFor:"box",children:"Select All"})]}),(0,$e.jsx)("hr",{}),(0,$e.jsx)("tbody",{children:Object.keys(u).map((function(e,t){return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("tr",{children:(0,$e.jsxs)("td",{children:[(0,$e.jsx)("input",{type:"checkbox",onClick:_,title:u[e].Book1URL,name:"Book1",id:"box1",value:u[e].Book1}),(0,$e.jsx)("label",{className:"border",style:{fontSize:"large"},htmlFor:"box1",children:u[e].Book1})]})}),(0,$e.jsx)("tr",{children:(0,$e.jsxs)("td",{children:[(0,$e.jsx)("input",{type:"checkbox",onClick:_,name:"Book2",id:"box2",title:u[e].Book2URL,value:u[e].Book2}),(0,$e.jsx)("label",{style:{fontSize:"large"},htmlFor:"box2",children:u[e].Book2})]})}),(0,$e.jsx)("tr",{children:(0,$e.jsxs)("td",{children:[(0,$e.jsx)("input",{type:"checkbox",onClick:_,name:"Book3",id:"box3",title:u[e].Book3URL,value:u[e].Book3}),(0,$e.jsx)("label",{style:{fontSize:"large"},htmlFor:"box3",children:u[e].Book3})]})}),(0,$e.jsx)("tr",{children:(0,$e.jsxs)("td",{children:[(0,$e.jsx)("input",{type:"checkbox",onClick:_,name:"Book4",id:"box4",title:u[e].Book4URL,value:u[e].Book4}),(0,$e.jsx)("label",{style:{fontSize:"large"},htmlFor:"box4",children:u[e].Book4})]})}),(0,$e.jsx)("tr",{children:(0,$e.jsxs)("td",{children:[(0,$e.jsx)("input",{type:"checkbox",onClick:_,name:"Book5",id:"box5",title:u[e].Book5URL,value:u[e].Book5}),(0,$e.jsx)("label",{style:{fontSize:"large"},htmlFor:"box5",children:u[e].Book5})]})})]})}))}),(0,$e.jsx)("hr",{})]})}),(0,$e.jsx)("div",{class:"input-field col s12",style:{display:"block"},id:"savebtndata",children:(0,$e.jsx)("i",{class:"waves-effect waves-light btn-large waves-input-wrapper ",children:(0,$e.jsx)("input",{type:"submit",class:"waves-button-input",style:{fontSize:"large"},value:"Book Issues",onClick:function(){if(f(vn(vn({},d),{},{issuedatess:e,months:t,years:n,totalbook:w+1})),"Not any books"==d.book)alert("please select minimum one book");else if("Not any books"!==d.book){var r=document.getElementById("t5-n1").value;alert("You Have Selected "+w+" Books"),sO.child("booksissues").child(r).remove(),sO.child("booksissues").child(r).push(d,(function(e){e?alert(e):alert("save")}))}}})})})]}),(0,$e.jsx)("div",{className:"row"})]})}function dO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1],i=l((0,r.useState)([]),2),a=i[0],o=i[1],s=l((0,r.useState)(""),2);s[0],s[1];(0,r.useEffect)((function(){sO.child("CourseDetails").on("value",(function(e){null==e.val()||""==e.val()?o([]):o(e.val())}))}),[]);var u=l((0,r.useState)([]),2),c=u[0],h=u[1];function d(e){n(vn(vn({},t),{},rt({},e.target.name,e.target.value)))}return(0,r.useEffect)((function(){Object.keys(a).map((function(e){h(e)}))}),[a]),console.log(c),(0,$e.jsx)("div",{children:(0,$e.jsxs)("div",{className:"sb2-2",children:[(0,$e.jsx)("div",{className:"sb2-2-2",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsxs)("a",{href:"index-2.html",children:[(0,$e.jsx)("i",{className:"fa fa-home","aria-hidden":"true"})," Home"]})}),(0,$e.jsx)("li",{className:"active-bre",children:(0,$e.jsx)("a",{href:"#",children:" Add new course"})}),(0,$e.jsx)("li",{className:"page-back",children:(0,$e.jsxs)("a",{href:"index-2.html",children:[(0,$e.jsx)("i",{className:"fa fa-backward","aria-hidden":"true"})," Back"]})})]})}),(0,$e.jsx)("div",{className:"sb2-2-3",children:(0,$e.jsx)("div",{className:"row",children:(0,$e.jsx)("div",{className:"col-md-12",children:(0,$e.jsx)("div",{className:"box-inn-sp admin-form",children:(0,$e.jsxs)("div",{className:"sb2-2-add-blog sb2-2-1",children:[(0,$e.jsx)("h2",{children:"Libraria"}),(0,$e.jsxs)("ul",{className:"nav nav-tabs tab-list",children:[(0,$e.jsx)("li",{className:"",children:(0,$e.jsxs)("a",{"data-toggle":"tab",href:"#menu1","aria-expanded":"true",children:[(0,$e.jsx)("i",{className:"fa fa-bed","aria-hidden":"true"})," ",(0,$e.jsx)("span",{children:"New student"})]})}),(0,$e.jsx)("li",{className:"",children:(0,$e.jsxs)("a",{"data-toggle":"tab",href:"#menu2","aria-expanded":"false",children:[(0,$e.jsx)("i",{className:"fa fa-picture-o","aria-hidden":"true"})," ",(0,$e.jsx)("span",{children:"Create courese "})]})}),(0,$e.jsx)("li",{className:"active",children:(0,$e.jsxs)("a",{"data-toggle":"tab",href:"#menu3","aria-expanded":"false",children:[(0,$e.jsx)("i",{className:"fa fa-facebook","aria-hidden":"true"})," ",(0,$e.jsx)("span",{children:"Book Issue"})]})})]}),(0,$e.jsxs)("div",{className:"tab-content",children:[(0,$e.jsx)("div",{id:"home",className:"tab-pane fade active in"}),(0,$e.jsxs)("div",{id:"menu1",className:"tab-pane fade",children:[(0,$e.jsxs)("div",{className:"inn-title",children:[(0,$e.jsx)("h4",{children:"Requirements, feese, student profile and how to apply"}),(0,$e.jsx)("p",{children:"Airtport Hotels The Right Way To Start A Short Break Holiday"})]}),(0,$e.jsxs)("div",{className:"bor ad-cou-deta-h4",children:[(0,$e.jsxs)("form",{children:[(0,$e.jsx)("h4",{children:"Requirements:"}),(0,$e.jsxs)("div",{className:"row",children:[(0,$e.jsxs)("div",{className:"input-field col s12",children:[(0,$e.jsx)("input",{type:"text",className:"validate",required:!0,onChange:d,name:"Name"}),(0,$e.jsx)("label",{children:"Name"})]}),(0,$e.jsxs)("div",{className:"input-field col s12",children:[(0,$e.jsx)("input",{type:"number",className:"validate",required:!0,onChange:d,id:"names",name:"RollNo"}),(0,$e.jsx)("label",{children:"RollNo."})]}),(0,$e.jsx)("div",{className:"input-field col s12",children:(0,$e.jsx)("input",{type:"file",className:"validate form-control",onChange:function(e){var r=e.target.files[0],i=new FileReader;i.onloadend=function(){console.log("RESULT",i.result),n(vn(vn({},t),{},{Image:i.result}))},i.readAsDataURL(r)},required:!0})}),(0,$e.jsx)("div",{className:"input-field col s12",children:(0,$e.jsx)("select",{name:"Class",id:"selecterclass",className:"validate",required:!0,children:nt.map((function(e){return(0,$e.jsx)("option",{value:e,children:e})}))})}),(0,$e.jsxs)("div",{className:"input-field col s12",children:[(0,$e.jsx)("input",{type:"text",className:"validate",required:!0,onChange:d,name:"Fathername"}),(0,$e.jsx)("label",{children:"Father Name"})]}),(0,$e.jsx)("div",{className:"input-field col s12",children:(0,$e.jsx)("input",{type:"date",className:"validate",required:!0,onChange:d,name:"DOB"})})]})]}),(0,$e.jsx)("div",{className:"row",children:(0,$e.jsx)("div",{className:"input-field col s12",children:(0,$e.jsx)("i",{className:"waves-effect waves-light btn-large waves-input-wrapper",children:(0,$e.jsx)("input",{type:"submit",className:"waves-button-input",value:"Submit",onClick:function(){var e=document.getElementById("names").value,r=document.getElementById("selecterclass").value;n(vn(vn({},t),{},{class:r})),null==r||""==r||"choose class"==r?alert("Plese select course"):sO.child("studentdata").child(r).child(e).remove((function(n){n?console.log(n):(sO.child("studentdata").child(r).child("datas").push(t,(function(e){e&&alert("Error")})),sO.child("studentdata").child(r).child(e).push(t,(function(e){e?alert("Error"):(alert("Success"),window.location.reload())})))}))}})})})})]})]}),(0,$e.jsxs)("div",{id:"menu2",className:"tab-pane fade",children:[(0,$e.jsxs)("div",{className:"inn-title",children:[(0,$e.jsx)("h4",{children:"Add Course"}),(0,$e.jsx)("p",{children:"Airtport Hotels The Right Way To Start A Short Break Holiday"})]}),(0,$e.jsx)("div",{className:"bor",children:(0,$e.jsx)(lO,{})})]}),(0,$e.jsxs)("div",{id:"menu3",className:"tab-pane fade active in",children:[(0,$e.jsx)("div",{className:"inn-title",children:(0,$e.jsx)("h4",{children:"Book Issue"})}),(0,$e.jsx)("div",{className:"bor ad-cou-deta-h4",children:(0,$e.jsx)(hO,{})})]})]})]})})})})})]})})}function fO(){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)("div",{class:"container-fluid sb2",children:(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"sb2-1",children:(0,$e.jsx)(et,{})}),(0,$e.jsx)(dO,{})]})})})}function pO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1],i=l((0,r.useState)({}),2),a=i[0],o=i[1],s=l((0,r.useState)(),2),u=s[0],c=s[1];return(0,r.useEffect)((function(){sO.child("galery").on("value",(function(e){o(e.val())}))}),[]),(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{class:"inn-title",children:[(0,$e.jsx)("h4",{children:"Photo Gallery"}),(0,$e.jsx)("p",{children:"Airtport Hotels The Right Way To Start A Short Break Holiday"})]}),(0,$e.jsxs)("div",{className:"row bor ",style:{display:"flex",justifyContent:"space-between"},children:[(0,$e.jsxs)("div",{class:"input-group col ",children:[(0,$e.jsxs)("select",{name:"",id:"selecter",style:{marginTop:"100px"},children:[(0,$e.jsx)("option",{value:"gallery",children:"Gallery"}),(0,$e.jsx)("option",{value:"Document",children:"Document"})]}),(0,$e.jsx)("input",{type:"file",onChange:function(e){var r=e.target.files[0],i=new FileReader(r);i.readAsDataURL(r),i.onload=function(){c(i.result),n(vn(vn({},t),{},{img:i.result,Name:r.name,dis:"".concat((new Date).toLocaleDateString()," (").concat((new Date).getHours(),":").concat((new Date).getMinutes(),")")}))}},className:"p-5",style:{fontSize:"30px"},name:"",id:"upload"}),(0,$e.jsx)("button",{onClick:function(){var e=document.getElementById("selecter").value;sO.child(e).push(t,(function(e){e?alert(e):alert("data save")}))},className:"btn btn-success ",style:{marginTop:"30px"},children:"Save"})]}),(0,$e.jsx)("div",{className:"col",children:(0,$e.jsx)("img",{src:u,width:"150px",height:"120px",alt:""})})]}),(0,$e.jsx)("div",{className:"sb2-2-3",children:(0,$e.jsx)("div",{className:"row",children:(0,$e.jsx)("div",{className:"col-md-12",children:(0,$e.jsxs)("div",{className:"box-inn-sp",children:[(0,$e.jsxs)("div",{className:"inn-title",children:[(0,$e.jsx)("h4",{children:"Images  "}),(0,$e.jsx)("br",{}),(0,$e.jsx)("p",{children:"All about students like name, student id, phone, email, country, city and more"})]}),(0,$e.jsx)("div",{className:"tab-inn",children:(0,$e.jsx)("div",{id:"tablepenal",style:{overflow:"scroll",maxHeight:"550px"},className:"table-responsive table-desi",children:(0,$e.jsxs)("table",{className:"table table-hover",children:[(0,$e.jsx)("thead",{children:(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("th",{children:"Index No."}),(0,$e.jsx)("th",{children:"Image"}),(0,$e.jsx)("th",{children:"Image Name"}),(0,$e.jsx)("th",{children:"Upload Time"}),(0,$e.jsx)("th",{children:"Button"})]})}),(0,$e.jsx)("tbody",{children:Object.keys(a).map((function(e,t){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{children:(0,$e.jsx)("span",{children:t+1})}),(0,$e.jsx)("td",{children:(0,$e.jsx)("a",{href:a[e].img,target:"_blank",children:(0,$e.jsx)("span",{className:"list-img",children:(0,$e.jsx)("img",{src:a[e].img,alt:""})})})}),(0,$e.jsx)("td",{children:(0,$e.jsx)("span",{children:a[e].Name})}),(0,$e.jsx)("td",{children:(0,$e.jsx)("span",{children:a[e].dis})}),(0,$e.jsxs)("td",{children:[(0,$e.jsx)("button",{className:" btn btn-info py-2",onClick:function(){return function(e){sO.child("galery/".concat(e)).remove((function(e){e?alert(e):alert("seccuss")}))}(e)},children:"Delete"}),(0,$e.jsx)("a",{href:a[e].img,target:"_blank",children:(0,$e.jsx)("button",{className:" btn btn-success",children:"view"})})]})]})})}))})]})})})]})})})})]})})}function vO(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("div",{class:"container-fluid sb2",children:(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"sb2-1",children:(0,$e.jsx)(et,{})}),(0,$e.jsx)("div",{class:"sb2-2",children:(0,$e.jsx)(pO,{})})]})})})}function mO(){return(0,$e.jsx)("div",{})}function yO(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{class:"wed-hom-footer",children:(0,$e.jsxs)("div",{class:"container",children:[(0,$e.jsxs)("div",{class:"row wed-foot-link",children:[(0,$e.jsxs)("div",{class:"col-md-6 foot-tc-mar-t-o",children:[(0,$e.jsx)("h4",{children:"Links"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/",children:"Home"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/about",children:"About Us"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/Eventuser",children:"Events"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/Contact",children:"Contact Us"})})]})]}),(0,$e.jsxs)("div",{class:"col-md-6",children:[(0,$e.jsx)("h4",{children:"HELP & SUPPORT"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:"  Live help"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"/Contact",children:"Contact us"})}),(0,$e.jsx)("li",{children:(0,$e.jsx)(Qe,{to:"https://www.aicte-india.org/feedback/index.php",target:"-",children:"Feedback"})})]})]})]}),(0,$e.jsxs)("div",{class:"row wed-foot-link-1",children:[(0,$e.jsxs)("div",{class:"col-md-6 foot-tc-mar-t-o",children:[(0,$e.jsx)("h4",{children:"Get In Touch"}),(0,$e.jsx)("a",{href:"https://goo.gl/maps/yFst8D2qmfquqyEm9",target:"_blank",children:(0,$e.jsx)("p",{children:"Address: Near Railway Station"})}),(0,$e.jsxs)("p",{children:["Phone: ",(0,$e.jsx)("a",{href:"tel:+(91) 01262 \u2013 248443",children:"+(91) 01262 \u2013 248443"})]}),(0,$e.jsxs)("p",{children:["Email: ",(0,$e.jsx)("a",{href:"mailto:vcengg1995@gmail.com",children:"vcengg1995@gmail.com"})]})]}),(0,$e.jsxs)("div",{class:"col-md-6",children:[(0,$e.jsx)("h4",{children:"SOCIAL MEDIA"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:(0,$e.jsx)("i",{class:"fa fa-facebook","aria-hidden":"true"})})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:(0,$e.jsx)("i",{class:"fa fa-twitter","aria-hidden":"true"})})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:(0,$e.jsx)("i",{class:"fa fa-google-plus","aria-hidden":"true"})})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:(0,$e.jsx)("i",{class:"fa fa-youtube","aria-hidden":"true"})})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("a",{href:"#",children:(0,$e.jsx)("i",{class:"fa fa-whatsapp","aria-hidden":"true"})})})]})]})]})]})})})}function gO(){var e=l((0,r.useState)(""),2),t=e[0],n=e[1],i=l((0,r.useState)(""),2),a=i[0],o=i[1],s=l((0,r.useState)(""),2),u=s[0],c=s[1],h=l((0,r.useState)(""),2),d=h[0],f=h[1],p=l((0,r.useState)(""),2),v=(p[0],p[1],l((0,r.useState)(""),2)),m=v[0],y=v[1];console.log(m);var g=new Date(m).getMonth();return console.log(g),(0,r.useEffect)((function(){""!==a&&Object.keys(a).map((function(e){c(a[e].RollNo),y(a[e].DOB),f(a[e].Image)}))}),[a]),(0,$e.jsx)("div",{children:(0,$e.jsx)("div",{id:"modal1",class:"modal fade",role:"dialog",children:(0,$e.jsxs)("div",{class:"log-in-pop",children:[(0,$e.jsx)("div",{class:"log-in-pop-left",style:{width:"300px",height:"500px",border:"none"},children:(0,$e.jsx)("img",{src:"https://images.unsplash.com/photo-1555116505-38ab61800975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTV8fGxpYnJhcnl8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60",style:{maxWidth:"100%",maxHeight:"100%",display:"block"}})}),(0,$e.jsxs)("div",{class:"log-in-pop-right",children:[(0,$e.jsx)("a",{href:"#",class:"pop-close","data-dismiss":"modal",children:(0,$e.jsx)("img",{src:"images/cancel.png",alt:""})}),(0,$e.jsx)("h4",{children:"Login"}),(0,$e.jsx)("p",{children:"Don't have an account? Create your account. It's take less then a minutes"}),(0,$e.jsxs)("form",{class:"s12",children:[(0,$e.jsx)("div",{id:"courseandsubmit",children:(0,$e.jsx)("div",{children:(0,$e.jsx)("div",{class:"input-field s12",children:(0,$e.jsx)("select",{id:"selector",children:nt.map((function(e){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)("option",{value:e,children:e})})}))})})})}),(0,$e.jsxs)("div",{style:{display:"none"},id:"userandpasswrod",children:[(0,$e.jsx)("div",{children:(0,$e.jsxs)("div",{class:"input-field s12",children:[(0,$e.jsx)("input",{onChange:function(e){var n=e.target.value;sO.child("studentdata").child(t).child(n).on("value",(function(e){null==e.val()||""==e.val()?o([]):o(e.val())}))},type:"text","data-ng-model":"name",class:"validate",id:"userba"}),(0,$e.jsx)("label",{children:"User name"})]})}),(0,$e.jsx)("div",{children:(0,$e.jsxs)("div",{class:"input-field s12",children:[(0,$e.jsx)("input",{id:"passworddata",type:"password",class:"validate"}),(0,$e.jsx)("label",{children:"Password (YYYY-MM-DD)"})]})})]})]}),(0,$e.jsx)("div",{id:"submitbtns",children:(0,$e.jsx)("div",{class:"input-field s4",children:(0,$e.jsx)("button",{onClick:function(){var e=document.getElementById("selector").value;console.log(e),null==e||"choose class"==e||""==e?alert("please select class/course"):(n(e),document.getElementById("userandpasswrod").style.display="block",document.getElementById("loginuserandpass").style.display="block",document.getElementById("courseandsubmit").style.display="none",document.getElementById("submitbtns").style.display="none")},className:"btn btn-outline-success",children:"save"})})}),(0,$e.jsx)("div",{style:{display:"none"},id:"loginuserandpass",children:(0,$e.jsxs)("div",{class:"input-field s4",children:[(0,$e.jsx)("input",{type:"submit",onClick:function(){var e=document.getElementById("passworddata").value,t=document.getElementById("userba").value;console.log(e),""==t||null==t||t!==u?e!==m||""==e||null==e?alert("please enter Username and password"):alert("please enter username"):""==e||e!==m||null==e?t!==u||""==t||null==t?alert("please enter username"):alert("please enter  password"):t==u&&e==m&&(alert("welocome"),sessionStorage.setItem("img",d),sessionStorage.setItem("roll",u),window.location.replace("/Studentsdata"))},value:"Login",class:"waves-effect waves-light log-in-btn"})," "]})})]})]})})})}var kO=function(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{class:"icon-float",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsx)(Qe,{to:"https://www.facebook.com/campaign/landing.php?campaign_id=14884913640&extra_1=s%7Cc%7C589460569849%7Cb%7Cfacebook%20%27%7C&placement=&creative=589460569849&keyword=facebook%20%27&partner_id=googlesem&extra_2=campaignid%3D14884913640%26adgroupid%3D128696220912%26matchtype%3Db%26network%3Dg%26source%3Dnotmobile%26search_or_content%3Ds%26device%3Dc%26devicemodel%3D%26adposition%3D%26target%3D%26targetid%3Dkwd-327195741349%26loc_physical_ms%3D9050523%26loc_interest_ms%3D%26feeditemid%3D%26param1%3D%26param2%3D&gad=1&gclid=CjwKCAjwue6hBhBVEiwA9YTx8PzGdl89xIlFHMBDdXv_-DFEqNmiWgNXcwJfsfMhaxx7uKmQPsAQjBoCboMQAvD_BwE",class:"fb1",target:"-",children:(0,$e.jsx)("i",{class:"fa fa-facebook","aria-hidden":"true"})})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)(Qe,{to:"https://support.google.com/answer/2451065?hl=en",class:"gp1",target:"-",children:(0,$e.jsx)("i",{class:"fa fa-google-plus","aria-hidden":"true"})})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)(Qe,{to:"https://twitter.com/i/flow/login?input_flow_data=%7B%22requested_variant%22%3A%22eyJsYW5nIjoiZW4ifQ%3D%3D%22%7D",target:"-",class:"tw1",children:(0,$e.jsx)("i",{class:"fa fa-twitter","aria-hidden":"true"})})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)(Qe,{to:"https://www.linkedin.com/home/?originalSubdomain=in",target:"-",class:"li1",children:(0,$e.jsx)("i",{class:"fa fa-linkedin","aria-hidden":"true"})})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)("a",{href:"#",class:"wa1",children:(0,$e.jsx)("i",{class:"fa fa-whatsapp","aria-hidden":"true"})})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)(Qe,{to:"mailto:vcengg1995@gmail.com",target:"-",class:"sh1",children:(0,$e.jsx)("i",{class:"fa fa-envelope-o","aria-hidden":"true"})})," "]})]})})})})};function wO(){return document.title="About Us",(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsx)(gO,{}),(0,$e.jsx)(kO,{}),(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{class:"container com-sp pad-bot-70",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsxs)("div",{class:"cor about-sp",children:[(0,$e.jsx)("div",{class:"ed-about-tit",children:(0,$e.jsxs)("div",{class:"con-title",children:[(0,$e.jsxs)("h2",{children:["About ",(0,$e.jsx)("span",{children:" Vaish"})]}),(0,$e.jsx)("p",{children:(0,$e.jsx)("strong",{children:"Approved by AICTE, Ministry of HRD, Govt of India and Affiliated to MDU, Rohtak"})})]})}),(0,$e.jsx)("div",{class:"ed-about-sec1",children:(0,$e.jsx)("div",{class:"ed-advan",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsx)("div",{class:"ed-ad-img",children:(0,$e.jsx)("img",{src:"images/adv/1.png",alt:""})}),(0,$e.jsxs)("div",{class:"ed-ad-dec",children:[(0,$e.jsx)("h4",{children:"President Message"}),(0,$e.jsx)("img",{src:"https://vcertk.com/wp-content/uploads/2022/09/WhatsApp-Image-2022-09-05-at-9.54.55-PM-214x300.jpeg",alt:""})," ",(0,$e.jsx)("br",{}),(0,$e.jsx)("br",{}),(0,$e.jsxs)("p",{children:["The last couple of decades have seen great changes in the field of education. The total emphasis now is to provide professional education and training to the young men and women to enable them to find their own space in the employment world. In this direction Vaish Education Society over the years, has been totally committed and fully equipped to pursue dreams of excellence in imparting basic and higher education to the students. In our sprawling campus, we have provided the most modern infrastructure, state-of-art-laboratories, with all required equipments and highly experienced and dedicated faculty. But more importantly, we have always endeavored to generate an environment on the campus that allows our students to develop and grow as well-rounded thinking professionals confident enough to take on the highly competitive outside world. We have a mission in higher education and we promise to continually review the quality of our aims and strive to go higher in the field. I wish all the success to students and warm regards to all visitors.",(0,$e.jsx)("h1",{children:"  Sh. Navin Kumar Jain"}),"President"]})]})]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)("div",{class:"ed-ad-img",children:(0,$e.jsx)("img",{src:"images/adv/3.png",alt:""})}),(0,$e.jsxs)("div",{class:"ed-ad-dec",children:[(0,$e.jsx)("h4",{children:"Principal Message"}),(0,$e.jsx)("img",{src:"https://vcertk.com/wp-content/uploads/2019/04/PO.jpg",alt:""}),(0,$e.jsx)("br",{}),(0,$e.jsx)("br",{}),(0,$e.jsxs)("p",{children:["Vaish College of Engineering was established in 1995 with a mission to achieve excellence in technical education. The college is committed to produce world class Engineers.At the Vaish College of Engineering , we are striving hard to achieve excellence in all fields e.g. academics, infrastructural facilities, practical training and personality development programs for  the students.I would like  to welcome all the new entrants and assure them that they will be provided an environment to achieve higher  academic excellence which will enable them to meet all the challenges in their future. We have a mission in higher education and we promise to continually review the quality of our aims and strive to go higher and higher in the field. We are confident that they will meet your expectations due to their hardwork and good learning.",(0,$e.jsx)("br",{}),(0,$e.jsx)("h1",{children:"Dr. Deepak Goyal"}),"(Principal)"]})]})]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)("div",{class:"ed-ad-img",children:(0,$e.jsx)("img",{src:"images/adv/4.png",alt:""})}),(0,$e.jsxs)("div",{class:"ed-ad-dec",children:[(0,$e.jsx)("h4",{children:"Mission"}),(0,$e.jsxs)("p",{children:["To provide quality education by grooming the technical skills/abilities of the students.",(0,$e.jsx)("br",{}),"To improve the overall persona of the students by enabling them to identify their maximum capacity and consequently shape them into the future pioneers.",(0,$e.jsx)("br",{}),"To connect the students with roots of their culture by giving them freedom to spread their wings in the sky of different cultural activities.",(0,$e.jsx)("br",{}),"To make students good human beings, who are always ready to serve society and environment."]}),(0,$e.jsx)("br",{})]})]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)("div",{class:"ed-ad-img",children:(0,$e.jsx)("img",{src:"images/adv/6.png",alt:""})}),(0,$e.jsxs)("div",{class:"ed-ad-dec",children:[(0,$e.jsx)("h4",{children:"Vision"}),(0,$e.jsx)("p",{children:"To provide quality technical education for the holistic development of the society."})]})]}),(0,$e.jsxs)("li",{children:[(0,$e.jsx)("div",{class:"ed-ad-img",children:(0,$e.jsx)("img",{src:"images/adv/5.png",alt:""})}),(0,$e.jsxs)("div",{class:"ed-ad-dec",children:[(0,$e.jsx)("h4",{children:"Facilities"}),(0,$e.jsx)("p",{children:"Hostel Facilities"}),(0,$e.jsx)("p",{children:"Reading Room"}),(0,$e.jsx)("p",{children:"Fully Wifi campus"})]})]})]})})}),(0,$e.jsxs)("div",{class:"ed-about-sec1",children:[(0,$e.jsx)("div",{class:"col-md-6"}),(0,$e.jsx)("div",{class:"col-md-6"})]})]})})})}),(0,$e.jsx)(yO,{})]})}function bO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){sO.child("galery").on("value",(function(e){n(e.val())}))}),[]),(0,$e.jsxs)("div",{children:[(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{class:"head-2",children:(0,$e.jsx)("div",{class:"container",children:(0,$e.jsx)("div",{class:"head-2-inn head-2-inn-padd-top",children:(0,$e.jsx)("h1",{children:"Photo Gallery"})})})})}),(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{class:"ed-res-bg",children:(0,$e.jsx)("div",{class:"container com-sp pad-bot-70 ed-res-bg",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"cor about-sp h-gal ed-pho-gal",children:(0,$e.jsx)("ul",{children:Object.keys(t).map((function(e){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)("a",{href:t[e].img,target:"_blank",children:(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:t[e].img,alt:""})})})})}))})})})})})})]})}function _O(){return(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsx)(bO,{}),(0,$e.jsx)(yO,{})]})}function xO(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{class:"pop-cour",children:(0,$e.jsxs)("div",{class:"container com-sp pad-bot-70",children:[(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"con-title",children:(0,$e.jsx)("h2",{children:(0,$e.jsx)("span",{children:"Resources"})})})}),(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"col-md-6",children:(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/CS.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"/",children:(0,$e.jsx)("h3",{children:"B.Tech"})}),(0,$e.jsx)("h4",{children:"Computer Science"}),(0,$e.jsx)("p",{children:"Classes started from coming friday(21 jun 2023),total seats 100 and available seats 10"})," ",(0,$e.jsx)("span",{class:"home-top-cour-rat",children:"5.0"}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"/Links",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"Click Here"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/EC.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"B.Tech"})}),(0,$e.jsx)("h4",{children:"Electronics & Communication"}),(0,$e.jsx)("p",{children:"Classes started from coming friday(21 jun 2023),total seats 100 and available seats 10"})," ",(0,$e.jsx)("span",{class:"home-top-cour-rat",children:"4.2"}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"/Links",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"})," Click Here"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/MS.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"Management Studies"})}),(0,$e.jsx)("p",{children:"Classes started from coming friday(21 jun 2023),total seats 100 and available seats 10"})," ",(0,$e.jsx)("span",{class:"home-top-cour-rat",children:"4.2"}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"/Links",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"Click Here"]})," "]})})})]})]})]})}),(0,$e.jsx)("div",{class:"col-md-6",children:(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ME.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"B.Tech"})}),(0,$e.jsx)("h4",{children:"Mechanical Engineering"}),(0,$e.jsx)("p",{children:"Classes started from coming friday(21 jun 2023),total seats 100 and available seats 10"})," ",(0,$e.jsx)("span",{class:"home-top-cour-rat",children:"4.2"}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"/Links",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"})," Click Here"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/EE.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"B.Tech"})}),(0,$e.jsx)("h4",{children:"Electrical Engineering"}),(0,$e.jsx)("p",{children:"Classes started from coming friday(21 jun 2023),total seats 100 and available seats 10"})," ",(0,$e.jsx)("span",{class:"home-top-cour-rat",children:"4.2"}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"/Links",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"})," Click Here"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/BCA.JPEG",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"BCA"})}),(0,$e.jsx)("p",{children:"Classes started from coming friday(21 jun 2023),total seats 100 and available seats 10"})," ",(0,$e.jsx)("span",{class:"home-top-cour-rat",children:"4.2"}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("a",{href:"course-details.html",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"Click Here"]})," "]})})})]})]})]})})]})]})})})}function IO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1],i=l((0,r.useState)([]),2),a=i[0],o=i[1];return(0,r.useEffect)((function(){sO.child("events").on("value",(function(e){null==e.val()||""==e.val()?n({}):n(e.val())}))}),[]),(0,$e.jsxs)("div",{children:[a.map((function(e){return console.log(e),(0,$e.jsx)("div",{id:"myModal",class:"modal fade",role:"dialog",children:(0,$e.jsx)("div",{class:"modal-dialog",children:(0,$e.jsxs)("div",{class:"modal-content",children:[(0,$e.jsxs)("div",{class:"modal-header",children:[(0,$e.jsx)("button",{type:"button",class:"close","data-dismiss":"modal",children:"\xd7"}),(0,$e.jsx)("h4",{class:"modal-title",children:"".concat(e.Event_name," (Event Date: ").concat(e.eventdate,")")})]}),(0,$e.jsxs)("div",{class:"modal-body",children:[(0,$e.jsx)("center",{children:(0,$e.jsx)("img",{src:e.Image,alt:"",width:"100%"})}),(0,$e.jsx)("br",{}),(0,$e.jsx)("hr",{}),(0,$e.jsx)("p",{children:e.Event_Descriptions})]}),(0,$e.jsx)("div",{class:"modal-footer",children:(0,$e.jsx)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal",children:"Close"})})]})})})})),(0,$e.jsx)("section",{children:(0,$e.jsxs)("div",{class:"container com-sp",children:[(0,$e.jsx)("div",{class:"row",children:(0,$e.jsxs)("div",{class:"con-title",children:[(0,$e.jsxs)("h2",{children:["News and ",(0,$e.jsx)("span",{children:"Events"})]}),(0,$e.jsx)("p",{children:"Here we cover all newses and events which is realated to our college."})]})}),(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"col-md-4",children:(0,$e.jsxs)("div",{class:"bot-gal h-gal ho-event-mob-bot-sp",children:[(0,$e.jsx)("h4",{children:"Photo Gallery"}),(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/8.jpg",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/9.PNG",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/10.jpg",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/11.PNG",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/1.jpg",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/2.PNG",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/3.PNG",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/4.PNG",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/5.PNG",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/6.jpg",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/7.jpg",alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{class:"materialboxed","data-caption":"Education master image captions",src:"images/ami/8.jpg",alt:""})})]})]})}),(0,$e.jsx)("div",{class:"col-md-4",children:(0,$e.jsxs)("div",{class:"bot-gal h-vid ho-event-mob-bot-sp",children:[(0,$e.jsx)("h4",{children:"Video Gallery"}),(0,$e.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/GHMq_HEfBCQ",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,$e.jsx)("h5",{children:"Maecenas sollicitudin lacinia"}),(0,$e.jsx)("p",{children:"The Vaish College of Engg. Affiliated with M.D. University, Rohtak is a premiere institute in the region offering B.Tech, M.Tech, MBA, BBA, BCA courses within an environment rich in resources. The college established in 1995 is one of the First Self-Financing Colleges of Haryana. The campus is delightfully planned and landscape with impressive buildings, lawns, playgrounds and shaded avenues."})]})}),(0,$e.jsx)("div",{class:"col-md-4",children:(0,$e.jsxs)("div",{class:"bot-gal h-blog ho-event",children:[(0,$e.jsx)("h4",{children:"News & Event"}),(0,$e.jsx)("div",{class:"ho-event",children:(0,$e.jsx)("ul",{children:Object.keys(t).map((function(e){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("div",{class:"ho-ev-date pg-eve-date",children:[(0,$e.jsx)("span",{}),t[e].uploaddate,(0,$e.jsx)("span",{})]}),(0,$e.jsxs)("div",{class:"ho-ev-link pg-eve-desc",children:[(0,$e.jsx)("a",{"data-toggle":"modal","data-target":"#myModal",onClick:function(){!function(e){sO.child("events/".concat(e)).on("value",(function(e){o([e.val()])}))}(e)},children:(0,$e.jsxs)("h4",{title:t[e].uploaddate,children:[t[e].Event_name," "]})}),(0,$e.jsx)("p",{children:t[e].Event_Descriptions}),(0,$e.jsxs)("span",{children:["Upload event ",t[e].uploaddate]}),(0,$e.jsxs)("span",{children:["(",t[e].uploadtime,")"]})]})]})})}))})})]})})]})]})})]})}function EO(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{children:(0,$e.jsxs)("div",{id:"myCarousel",class:"carousel slide","data-ride":"carousel",children:[(0,$e.jsxs)("div",{class:"carousel-inner",children:[(0,$e.jsxs)("div",{class:"item slider1 active",children:[(0,$e.jsx)("img",{src:"images/slider/2.PNG",alt:"",style:{opacity:"0.9"}}),(0,$e.jsxs)("div",{class:"carousel-caption slider-con",children:[(0,$e.jsxs)("h2",{children:["Welcome to ",(0,$e.jsx)("span",{children:"LIBRARIA"})]}),(0,$e.jsx)("p",{style:{fontSize:"27px",color:"SlateBlue"},children:(0,$e.jsx)("strong",{children:"Unlock your potential with knowledge at our college library"})}),(0,$e.jsx)(Qe,{to:"https://vcertk.com/vision-and-mission/",class:"bann-btn-1",target:"-",children:"Mision"}),(0,$e.jsx)(Qe,{to:"https://vcertk.com/vision-and-mission/",class:"bann-btn-2",target:"-",children:"Vision"})]})]}),(0,$e.jsxs)("div",{class:"item",children:[(0,$e.jsx)("img",{src:"images/slider/5.JPG",alt:"",style:{opacity:"0.9"}}),(0,$e.jsxs)("div",{class:"carousel-caption slider-con",children:[(0,$e.jsxs)("h2",{children:["Admission open ",(0,$e.jsx)("span",{})]}),(0,$e.jsx)("p",{style:{fontSize:"27px",color:"tomato"},children:(0,$e.jsx)("strong",{children:'"Explore the world through our books - your journey starts here at the librarExplore the world through our books - your journey starts here at the library'})}),(0,$e.jsx)(Qe,{to:"https://vcertk.com/admission-2018-19/",class:"bann-btn-1",target:"-",children:"Click Me"})]})]}),(0,$e.jsxs)("div",{class:"item",children:[(0,$e.jsx)("img",{src:"images/slider/6.PNG",alt:"",style:{opacity:"0.7"}}),(0,$e.jsxs)("div",{class:"carousel-caption slider-con",children:[(0,$e.jsxs)("h2",{children:["Libraria ",(0,$e.jsx)("span",{})]}),(0,$e.jsx)("p",{style:{fontSize:"27px",color:"black"},children:(0,$e.jsx)("strong",{children:"Empowering Minds, Enriching Souls: Discover the World of Knowledge at Our College Library"})}),(0,$e.jsx)(Qe,{to:"https://vcertk.com/vision-and-mission/",class:"bann-btn-1",target:"-",children:"Mision"}),(0,$e.jsx)(Qe,{to:"https://vcertk.com/vision-and-mission/",class:"bann-btn-2",target:"-",children:"Vision"}),"                    "]})]})]}),(0,$e.jsx)("a",{class:"left carousel-control",href:"#myCarousel","data-slide":"prev",children:(0,$e.jsx)("i",{class:"fa fa-chevron-left slider-arr"})}),(0,$e.jsx)("a",{class:"right carousel-control",href:"#myCarousel","data-slide":"next",children:(0,$e.jsx)("i",{class:"fa fa-chevron-right slider-arr"})})]})})})}var SO=function(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{class:"container",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"wed-hom-ser",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsxs)("a",{target:"_blank",href:"https://www.vcertk.com/wp-content/uploads/2020/07/Prospectus-2020-21-New1-min.pdf",class:"waves-effect waves-light btn-large wed-pop-ser-btn",children:[(0,$e.jsx)("img",{src:"images/icon/h-ic1.png",alt:""}),"Brochure"]})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)("a",{href:"https://vcertk.com/admission-2018-19/",class:"waves-effect waves-light btn-large wed-pop-ser-btn",target:"_",children:[(0,$e.jsx)("img",{src:"images/icon/h-ic2.png",alt:""})," Admission"]})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)("a",{href:"https://vcertk.com/campus/",class:"waves-effect waves-light btn-large wed-pop-ser-btn",target:"_",children:[(0,$e.jsx)("img",{src:"images/icon/h-ic4.png",alt:""}),"Campus"]})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)("a",{href:"seminar.html",class:"waves-effect waves-light btn-large wed-pop-ser-btn",target:"_",children:[(0,$e.jsx)("img",{src:"images/icon/h-ic3.png",alt:""})," Seminar"]})})]})})})})})})};function TO(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{children:(0,$e.jsxs)("div",{className:"container com-sp pad-bot-70",children:[(0,$e.jsx)("div",{className:"row",children:(0,$e.jsx)("div",{className:"con-title",children:(0,$e.jsxs)("h2",{children:["Discover ",(0,$e.jsx)("span",{children:"More"})]})})}),(0,$e.jsx)("div",{className:"row",children:(0,$e.jsxs)("div",{className:"ed-course",children:[(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"http://www.vesrohtak.org/",target:"-",children:[(0,$e.jsx)("img",{src:"images/h-about.PNG\r ",alt:!0}),(0,$e.jsx)("span",{children:"Vaish Society"})]})})}),(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"https://vcertk.com/wp-content/uploads/2022/05/admission-form-2022-23.pdf",target:"-",children:[(0,$e.jsx)("img",{src:"images/h-adm1.jpg",alt:!0}),(0,$e.jsx)("span",{children:"Admission Form"})]})})}),(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"https://vcertk.com/admission-helpline/",target:"-",children:[(0,$e.jsx)("img",{src:"images/h-res.PNG",alt:!0}),(0,$e.jsx)("span",{children:"Admission Helpline"})]})})}),(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"https://vcertk.com/campus/",target:"-",children:[(0,$e.jsx)("img",{src:"images/h-res.PNG",alt:!0}),(0,$e.jsx)("span",{children:"Vaish Campus"})]})})}),(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"https://vcertk.com/auditorium/",children:[(0,$e.jsx)("img",{src:"images/h-about1.jpg",alt:!0}),(0,$e.jsx)("span",{children:"Auditoriam"})]})})}),(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"https://vcertk.com/syllabus/",target:"-",children:[(0,$e.jsx)("img",{src:"images/h-adm.PNG",alt:!0}),(0,$e.jsx)("span",{children:"Download Syllabus"})]})})}),(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"http://result.mdurtk.in/postexam/result.aspx",target:"-",children:[(0,$e.jsx)("img",{src:"images/h-cam1.jpg",alt:!0}),(0,$e.jsx)("span",{children:"Results"})]})})}),(0,$e.jsx)("div",{className:"col-md-3 col-sm-4 col-xs-12",children:(0,$e.jsx)("div",{className:"ed-course-in",children:(0,$e.jsxs)(Qe,{className:"course-overlay",to:"https://vcertk.com/tp-cell/",target:"-",children:[(0,$e.jsx)("img",{src:"images/h-res1.jpg",alt:!0}),(0,$e.jsx)("span",{children:"Training & Placement"})]})})})]})})]})})})}function CO(){return document.title="Home",(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsx)(EO,{}),(0,$e.jsx)(SO,{}),(0,$e.jsx)(TO,{}),(0,$e.jsx)(xO,{}),(0,$e.jsx)(IO,{}),(0,$e.jsx)(gO,{}),(0,$e.jsx)(yO,{}),(0,$e.jsx)(kO,{})]})}function NO(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=l((0,r.useState)({}),2),n=t[0],i=t[1],a=l((0,r.useState)(""),2),o=a[0],s=a[1];function u(){var e="".concat((new Date).getDate(),"/").concat((new Date).getMonth()+1,"/").concat((new Date).getFullYear()),t="".concat((new Date).getHours(),":").concat((new Date).getMinutes());i(vn(vn({},n),{},{uploaddate:e,uploadtime:t})),s("1")}return(0,r.useEffect)((function(){""!==o&&sO.child("events").push(n,(function(e){e?alert(e):alert("save")}))}),[o]),(0,$e.jsx)("div",{children:(0,$e.jsx)("div",{class:"sb2-2-3",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"col-md-12",children:(0,$e.jsxs)("div",{class:"box-inn-sp admin-form",children:[(0,$e.jsxs)("div",{class:"inn-title",children:[(0,$e.jsx)("h4",{children:"Add Event"}),(0,$e.jsx)("p",{children:"Here you can edit your website basic details URL, Phone, Email, Address, User and password and more"})]}),(0,$e.jsx)("div",{class:"tab-inn",children:(0,$e.jsxs)("form",{onSubmit:u,children:[(0,$e.jsx)("div",{class:"row",children:(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("input",{onChange:function(e){i(vn(vn({},n),{},rt({},e.target.name,e.target.value)))},name:"Event_name",type:"text",class:"validate",required:!0}),(0,$e.jsx)("label",{tabIndex:1,class:"",children:"Event name"})]})}),(0,$e.jsx)("div",{class:"row",children:(0,$e.jsxs)("div",{class:"input-field col s12",children:[(0,$e.jsx)("textarea",{onChange:function(e){var t,r=e.target.value,a=r.substring(0,20);i(vn(vn({},n),{},(rt(t={},e.target.name,r),rt(t,"Short_dis",a+"..."),t)))},name:"Event_Descriptions"}),(0,$e.jsx)("label",{class:"",children:"Event Descriptions"})]})}),(0,$e.jsx)("div",{class:"row",children:(0,$e.jsxs)("div",{class:"file-field input-field col s12",children:[(0,$e.jsxs)("div",{class:"btn admin-upload-btn",children:[(0,$e.jsx)("span",{children:"File"}),(0,$e.jsx)("input",{onChange:function(e){var t=e.target.files[0],r=new FileReader;r.onloadend=function(){i(vn(vn({},n),{},{Image:r.result}))},r.readAsDataURL(t)},type:"file"})]}),(0,$e.jsx)("div",{class:"file-path-wrapper",children:(0,$e.jsx)("input",{class:"file-path validate",disabled:!0,type:"text",placeholder:"Event image"})})]})}),(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"input-field col s6",children:(0,$e.jsx)("input",{onChange:function(t){var r=t.target.value,a=new Date(r).getMonth(),o="".concat(e[a],", ").concat(new Date(r).getFullYear()),s=new Date(r).getDate()+1;i(vn(vn({},n),{},{Event_date:s,Event_Monthandyear:o}))},name:"eventdate",type:"date",title:"Event Date",class:"validate"})})}),(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:" col s12",children:(0,$e.jsx)("button",{onClick:u,className:"btn btn-outline-success",children:"Save"})})})]})})]})})})})})}function jO(){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)("div",{class:"container-fluid sb2",children:(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"sb2-1",children:(0,$e.jsx)(et,{})}),(0,$e.jsx)("div",{class:"sb2-2",children:(0,$e.jsx)(NO,{})})]})})})}function AO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1],i=l((0,r.useState)([]),2),a=i[0],o=i[1];return(0,r.useEffect)((function(){sO.child("events").on("value",(function(e){null==e.val()||""==e.val()?n({}):n(e.val())}))}),[]),(0,$e.jsxs)("div",{children:[a.map((function(e){return console.log(e),(0,$e.jsx)("div",{id:"myModal",class:"modal fade",role:"dialog",children:(0,$e.jsx)("div",{class:"modal-dialog",children:(0,$e.jsxs)("div",{class:"modal-content",children:[(0,$e.jsxs)("div",{class:"modal-header",children:[(0,$e.jsx)("button",{type:"button",class:"close","data-dismiss":"modal",children:"\xd7"}),(0,$e.jsx)("h4",{class:"modal-title",children:"".concat(e.Event_name," (Event Date: ").concat(e.eventdate,")")})]}),(0,$e.jsxs)("div",{class:"modal-body",children:[(0,$e.jsx)("center",{children:(0,$e.jsx)("img",{src:e.Image,alt:""})}),(0,$e.jsx)("br",{}),(0,$e.jsx)("hr",{}),(0,$e.jsx)("p",{children:e.Event_Descriptions})]}),(0,$e.jsx)("div",{class:"modal-footer",children:(0,$e.jsx)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal",children:"Close"})})]})})})})),(0,$e.jsx)("ul",{children:Object.keys(t).map((function(e){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("div",{class:"ho-ev-date pg-eve-date",children:[(0,$e.jsx)("span",{}),(0,$e.jsx)("span",{children:t[e].uploaddate})]}),(0,$e.jsxs)("div",{class:"ho-ev-link pg-eve-desc",children:[(0,$e.jsx)("a",{href:"event-register.html",children:(0,$e.jsxs)("h4",{title:t[e].uploaddate,children:[t[e].Event_name," "]})}),(0,$e.jsx)("p",{children:t[e].Event_Descriptions}),(0,$e.jsxs)("span",{children:["Upload event ",t[e].uploaddate]}),(0,$e.jsxs)("span",{children:["(",t[e].uploadtime,")"]})]}),(0,$e.jsx)("div",{class:"pg-eve-reg",children:(0,$e.jsx)("a",{class:"btn btn-info btn-lg","data-toggle":"modal","data-target":"#myModal",onClick:function(){!function(e){sO.child("events/".concat(e)).on("value",(function(e){console.log(e.val()),o([e.val()])}))}(e)},children:"Read more"})})]})})}))})]})}function PO(){return(0,$e.jsxs)("div",{children:[(0,$e.jsx)(kO,{}),(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{class:"container com-sp",children:(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"cor about-sp",children:(0,$e.jsxs)("div",{class:"ed-about-tit",children:[(0,$e.jsxs)("div",{class:"con-title",children:[(0,$e.jsxs)("h2",{children:["College ",(0,$e.jsx)("span",{children:" Events"})]}),(0,$e.jsx)("hr",{})]}),(0,$e.jsx)("div",{children:(0,$e.jsx)("div",{class:"ho-event pg-eve-main",children:(0,$e.jsx)(AO,{})})})]})})})})})]})}function RO(){return(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsx)(PO,{})]})}var DO=function(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{children:(0,$e.jsx)("div",{className:"container com-sp pad-bot-70",children:(0,$e.jsx)("div",{className:"row",children:(0,$e.jsxs)("div",{className:"cor about-sp",children:[(0,$e.jsx)("div",{className:"ed-about-tit",children:(0,$e.jsx)("div",{className:"con-title",children:(0,$e.jsxs)("h2",{children:["Contact ",(0,$e.jsx)("span",{children:" Us"})]})})}),(0,$e.jsxs)("div",{className:"pg-contact",children:[(0,$e.jsxs)("div",{className:"col-md-3 col-sm-6 col-xs-12 new-con new-con1",children:[(0,$e.jsxs)("h2",{children:["Vaish ",(0,$e.jsx)("span",{children:"Society"})]}),(0,$e.jsx)("p",{children:"Approved by AICTE, Ministry of HRD, Govt of India and Affiliated to MDU, Rohtak"})]}),(0,$e.jsxs)("div",{className:"col-md-3 col-sm-6 col-xs-12 new-con new-con1",children:[(0,$e.jsx)("h4",{children:"Address"}),(0,$e.jsx)("p",{children:"  Vaish College of Engineering"}),(0,$e.jsx)("p",{children:" Vaish Educational Complex "}),(0,$e.jsx)("p",{children:" Landmark : Next To Railway Station"})]}),(0,$e.jsxs)("div",{className:"col-md-3 col-sm-6 col-xs-12 new-con new-con3",children:[(0,$e.jsx)("h4",{children:"CONTACT INFO:"}),(0,$e.jsxs)("p",{children:[" ",(0,$e.jsx)("a",{href:"tel:// +(91) 01262 \u2013 248443",className:"contact-icon",children:"Tel: +(91) 01262 \u2013 248443"}),(0,$e.jsx)("br",{})," ",(0,$e.jsx)("a",{href:"tel://9416291163",className:"contact-icon",children:"Mobile: 9416291163"}),(0,$e.jsx)("br",{})," ",(0,$e.jsx)("a",{href:"mailto:vcengg1995@gmail.com",className:"contact-icon",children:"Email: vcengg1995@gmail.com"})," "]})]}),(0,$e.jsxs)("div",{className:"col-md-3 col-sm-6 col-xs-12 new-con new-con4",children:[(0,$e.jsx)("h4",{children:"Website"}),(0,$e.jsxs)("p",{children:[" ",(0,$e.jsx)("a",{href:"https://vcertk.com/",target:"-",children:"Website:  https://vcertk.com/"})]})]})]})]})})})})})},OO=function(){var e=l((0,r.useState)(),2),t=e[0],n=e[1],i=l((0,r.useState)(t),2);i[0],i[1];function a(e){n(vn(vn({},t),{},rt({},e.target.name,e.target.value)))}return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{id:"map",children:(0,$e.jsxs)("div",{className:"row contact-map",children:[(0,$e.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d55894.88322843295!2d76.50649125820314!3d28.885561600000003!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390d850555555555%3A0xc88cfe5dc9080473!2sVaish%20College%20of%20Engineering!5e0!3m2!1sen!2sin!4v1681659975817!5m2!1sen!2sin",width:600,height:450,style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),(0,$e.jsx)("div",{className:"container",children:(0,$e.jsxs)("div",{className:"overlay-contact footer-part footer-part-form",children:[(0,$e.jsxs)("div",{className:"map-head",children:[(0,$e.jsx)("p",{children:"Send Us Now"}),(0,$e.jsx)("h2",{children:"GetIn Touch"})," ",(0,$e.jsx)("span",{className:"footer-ser-re",children:"Service Request Form"})," "]}),(0,$e.jsx)("form",{id:"contact_form",name:"contact_form",action:"  ",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{className:"col-md-6 col-sm-6 col-xs-12 contact-input-spac",children:[(0,$e.jsx)("input",{type:"text",onChange:a,placeholder:"Name",name:"name",required:!0})," "]}),(0,$e.jsxs)("li",{className:"col-md-6 col-sm-6 col-xs-12 contact-input-spac",children:[(0,$e.jsx)("input",{type:"text",onChange:a,placeholder:"last-name",name:"lastname",required:!0})," "]}),(0,$e.jsxs)("li",{className:"col-md-6 col-sm-6 col-xs-12 contact-input-spac",children:[(0,$e.jsx)("input",{type:"email",onChange:a,placeholder:"E-mail",name:"email",required:!0})," "]}),(0,$e.jsxs)("li",{className:"col-md-6 col-sm-6 col-xs-12 contact-input-spac",children:[(0,$e.jsx)("input",{type:"text",onChange:a,placeholder:"Phone",name:"phone",required:!0})," "]}),(0,$e.jsx)("li",{className:"col-md-12 col-sm-12 col-xs-12 contact-input-spac",children:(0,$e.jsx)("textarea",{onChange:a,name:"subject",placeholder:"subject",required:!0,defaultValue:""})}),(0,$e.jsxs)("li",{className:"col-md-6",children:[(0,$e.jsx)("input",{type:"submit",onClick:function(){sO.child("ContactInfo").push(t,(function(e){e?alert("sorry"):(alert("saved"),window.location.reload())}))},defaultValue:"SUBMIT"})," "]})]})})]})})]})})})},LO=function(){return document.title="Contact",(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsx)(DO,{}),(0,$e.jsx)(OO,{}),(0,$e.jsx)(yO,{}),(0,$e.jsx)(kO,{})]})};function MO(){"".concat((new Date).getHours()).concat((new Date).getMinutes());return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",{class:"sb2-12",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsx)("li",{children:(0,$e.jsx)("img",{src:sessionStorage.getItem("img"),alt:""})}),(0,$e.jsx)("li",{children:(0,$e.jsxs)("h5",{children:["Libraria",(0,$e.jsx)("span",{})]})}),(0,$e.jsx)("li",{})]})}),(0,$e.jsx)("div",{class:"sb2-13",children:(0,$e.jsx)("ul",{"data-collapsible":"accordion",children:(0,$e.jsx)("li",{children:(0,$e.jsxs)(Qe,{to:"/",children:[(0,$e.jsx)("i",{class:"fa fa-book","aria-hidden":"true"}),"Log Out"]})})})})]})}function FO(){var e=l((0,r.useState)({}),2),t=e[0],n=e[1],i=l((0,r.useState)([]),2),a=i[0],o=i[1],s=l((0,r.useState)(""),2),u=(s[0],s[1],l((0,r.useState)(""),2)),c=(u[0],u[1],l((0,r.useState)(""),2)),h=(c[0],c[1],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),d=l((0,r.useState)(""),2),f=d[0],p=d[1],v=l((0,r.useState)({countdownDays:"",countdownHours:"",countdownlMinutes:"",countdownSeconds:""}),2),m=v[0],y=v[1];return(0,r.useEffect)((function(){!function(){var e=setInterval((function(){var t=new Date(f).getTime()-(new Date).getTime(),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4),a=Math.floor(t%6e4/1e3);y({countdownDays:n,countdownHours:r,countdownMinutes:i,countdownSeconds:a}),t<0&&(clearInterval(e),p(!1))}),1e3)}()})),(0,r.useEffect)((function(){var e=sessionStorage.getItem("roll");null==e?sessionStorage.setItem("roll","No_data"):sO.child("booksissues").child(e).on("value",(function(e){null!==e.val()&&n(e.val())}))}),[]),(0,r.useEffect)((function(){if(t!=={}){var e=[];Object.keys(t).map((function(n){e.push(t[n])})),o(e)}}),[t]),(0,r.useEffect)((function(){a!==[]&&a.map((function(e){var t=new Date("".concat(e.issuedatess," ").concat(e.months," ").concat(e.years));t.setDate(t.getDate()+90);var n=new Date(t).getDate(),r=h[new Date(t).getMonth()],i=new Date(t).getFullYear();p("".concat(n," ").concat(r," ").concat(i," 09:10:25"))}))}),[a]),(0,$e.jsxs)("div",{class:"udb-sec udb-cour",children:[(0,$e.jsxs)("h4",{children:[(0,$e.jsx)("img",{src:"images/icon/db2.png",alt:""})," Your books"]}),(0,$e.jsx)("div",{class:"sdb-cours",children:(0,$e.jsx)("div",{children:a.map((function(e){return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",{className:"imagediv",children:(0,$e.jsx)("img",{className:"imageclass",src:e.Book1})}),(0,$e.jsx)("div",{className:"imagediv",children:(0,$e.jsx)("img",{className:"imageclass",src:e.Book2})}),(0,$e.jsx)("div",{className:"imagediv",children:(0,$e.jsx)("img",{className:"imageclass",src:e.Book3})}),(0,$e.jsx)("div",{className:"imagediv",children:(0,$e.jsx)("img",{className:"imageclass",src:e.Book4})}),(0,$e.jsx)("div",{className:"imagediv",children:(0,$e.jsx)("img",{className:"imageclass",src:e.Book5})})]})}))})}),(0,$e.jsx)("br",{}),(0,$e.jsxs)("div",{class:"udb-sec udb-prof",children:[(0,$e.jsxs)("h4",{children:[(0,$e.jsx)("img",{src:"images/icon/db1.png",alt:""})," My Profile"]}),(0,$e.jsx)("div",{class:"sdb-tabl-com sdb-pro-table",children:(0,$e.jsx)("table",{class:"responsive-table bordered",children:(0,$e.jsxs)("tbody",{children:[(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{children:"Student Id"}),(0,$e.jsx)("td",{children:":"}),(0,$e.jsx)("td",{children:sessionStorage.getItem("roll")})]}),a.map((function(e){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{children:"Book Issue date"}),(0,$e.jsx)("td",{children:":"}),(0,$e.jsx)("td",{children:"".concat(e.issuedatess," ").concat(e.months,",").concat(e.years)})]})})})),!1!==f?(0,$e.jsx)($e.Fragment,{children:(0,$e.jsxs)("tr",{children:[(0,$e.jsx)("td",{children:"Book Reissue date"}),(0,$e.jsx)("td",{children:":"}),(0,$e.jsx)("td",{children:"".concat(m.countdownDays," days: \n                                            ").concat(m.countdownHours," hours: \n                                            ").concat(m.countdownMinutes," min: \n                                            ").concat(m.countdownSeconds," sec")})]})}):(0,$e.jsx)("p",{children:"Deal has been Expired"})]})})})]})]})}var UO=function(){return(0,$e.jsx)("div",{children:(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)("div",{class:"container-fluid sb2",children:(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"sb2-1",children:(0,$e.jsx)(MO,{})}),(0,$e.jsx)("div",{class:"sb2-2",children:(0,$e.jsx)(FO,{})})]})})})})},VO=function(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{class:"pop-cour",children:(0,$e.jsxs)("div",{class:"container com-sp pad-bot-70",children:[(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"con-title",children:(0,$e.jsxs)("h2",{children:[" Study ",(0,$e.jsx)("span",{children:"Material"})]})})}),(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"col-md-6",children:(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem1.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:(0,$e.jsx)("h3",{children:"Sem1"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem3.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"/SubjectsMain",children:(0,$e.jsx)("h3",{children:"Sem3"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"/SubjectsMain",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem5.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:(0,$e.jsx)("h3",{children:"Sem5"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem7.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:(0,$e.jsx)("h3",{children:"Sem7"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]})]})}),(0,$e.jsx)("div",{class:"col-md-6",children:(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem2.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:(0,$e.jsx)("h3",{children:"Sem2"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem4.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:(0,$e.jsx)("h3",{children:"Sem4"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem6.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"/SubjectsMain",children:(0,$e.jsx)("h3",{children:"Sem6"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"/SubjectsMain",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay/sem8.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:(0,$e.jsx)("h3",{children:"Sem8"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsx)("ul",{children:(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://drive.google.com/drive/u/4/folders/14GxxhJYgf058V1l1T8tXamObloukP6ly",children:[(0,$e.jsx)("i",{class:"fa fa-file","aria-hidden":"true"}),"Subjects"]})," "]})})})]})]})]})})]})]})})})},BO=function(){return(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsx)(VO,{}),(0,$e.jsx)(kO,{}),(0,$e.jsx)(yO,{})]})},qO=function(){return(0,$e.jsx)("div",{children:(0,$e.jsx)("section",{class:"pop-cour",children:(0,$e.jsxs)("div",{class:"container com-sp pad-bot-70",children:[(0,$e.jsx)("div",{class:"row",children:(0,$e.jsx)("div",{class:"con-title",children:(0,$e.jsxs)("h2",{children:["Study",(0,$e.jsx)("span",{children:"Material"})]})})}),(0,$e.jsxs)("div",{class:"row",children:[(0,$e.jsx)("div",{class:"col-md-6",children:(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay2/Ai.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)(Qe,{to:"/",children:(0,$e.jsx)("h3",{children:"Artificial Intelligence"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://drive.google.com/drive/u/4/folders/1PYV5H5tto7SzNrxO1rhrg-2-tFyochsS",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"PDF"]})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("a",{href:"https://drive.google.com/file/d/1goRIQq26XO3F_wTqn6sseBJ2fvGnMOyA/view",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-file-text-o",style:{color:"green"},"aria-hidden":" "}),"Links"]})," "]})]})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay2/MWC.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"Wireless & Mobile Communication"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://vcertk.com/departments/#ece",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"PDF"]})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("a",{href:"course-details.html",children:[(0,$e.jsx)("i",{class:"fa fa-file-text-o",style:{color:"green"},"aria-hidden":" "}),"Links"]})," "]})]})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay2/CG.PNG",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"Computer Graphics"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://vcertk.com/departments/#ece",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"PDF"]})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("a",{href:"course-details.html",children:[(0,$e.jsx)("i",{class:"fa fa-file-text-o",style:{color:"green"},"aria-hidden":" "}),"Links"]})," "]})]})})]})]})]})}),(0,$e.jsx)("div",{class:"col-md-6",children:(0,$e.jsxs)("div",{children:[(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay2/Ds.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"Data Science"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://vcertk.com/departments/#ece",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"PDF"]})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("a",{href:"course-details.html",children:[(0,$e.jsx)("i",{class:"fa fa-file-text-o",style:{color:"green"},"aria-hidden":" "}),"Links"]})," "]})]})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay2/Aj.jpg",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"Advanced Java"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://vcertk.com/departments/#ece",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"PDF"]})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("a",{href:"course-details.html",children:[(0,$e.jsx)("i",{class:"fa fa-file-text-o",style:{color:"green"},"aria-hidden":" "}),"Links"]})," "]})]})})]})]}),(0,$e.jsxs)("div",{class:"home-top-cour",children:[(0,$e.jsxs)("div",{class:"col-md-3",children:[" ",(0,$e.jsx)("img",{src:"images/course/ajay2/CD.PNG",alt:""})," "]}),(0,$e.jsxs)("div",{class:"col-md-9 home-top-cour-desc",children:[(0,$e.jsx)("a",{href:"course-details.html",children:(0,$e.jsx)("h3",{children:"Compiler Design"})}),(0,$e.jsx)("div",{class:"hom-list-share",children:(0,$e.jsxs)("ul",{children:[(0,$e.jsxs)("li",{children:[(0,$e.jsxs)(Qe,{to:"https://vcertk.com/departments/#ece",target:"-",children:[(0,$e.jsx)("i",{class:"fa fa-bar-chart","aria-hidden":"true"}),"PDF"]})," "]}),(0,$e.jsxs)("li",{children:[(0,$e.jsxs)("a",{href:"course-details.html",children:[(0,$e.jsx)("i",{class:"fa fa-file-text-o",style:{color:"green"},"aria-hidden":" "}),"Links"]})," "]})]})})]})]})]})})]})]})})})},zO=function(){return(0,$e.jsxs)("div",{children:[(0,$e.jsx)(Xe,{}),(0,$e.jsx)(qO,{}),(0,$e.jsx)(kO,{}),(0,$e.jsx)(yO,{})]})};function WO(){return(0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)(He,{children:(0,$e.jsxs)(Ue,{children:[(0,$e.jsx)(Me,{path:"/",element:(0,$e.jsx)(CO,{})}),(0,$e.jsx)(Me,{path:"/about",element:(0,$e.jsx)(wO,{})}),(0,$e.jsx)(Me,{path:"/Courses",element:(0,$e.jsx)(mO,{})}),(0,$e.jsx)(Me,{path:"/Gallerys",element:(0,$e.jsx)(_O,{})}),(0,$e.jsx)(Me,{path:"/AdminLogin",element:(0,$e.jsx)(Ze,{})}),(0,$e.jsx)(Me,{path:"/".concat(sessionStorage.getItem("fl")),element:(0,$e.jsx)(fO,{})}),(0,$e.jsx)(Me,{path:"/Allstudentdetails",element:(0,$e.jsx)(cO,{})}),(0,$e.jsx)(Me,{path:"/Uplodgallery",element:(0,$e.jsx)(vO,{})}),(0,$e.jsx)(Me,{path:"/Eventadddata",element:(0,$e.jsx)(jO,{})}),(0,$e.jsx)(Me,{path:"/Eventuser",element:(0,$e.jsx)(RO,{})}),(0,$e.jsx)(Me,{path:"/Contact",element:(0,$e.jsx)(LO,{})}),(0,$e.jsx)(Me,{path:"/Studentsdata",element:(0,$e.jsx)(UO,{})}),(0,$e.jsx)(Me,{path:"/Links",element:(0,$e.jsx)(BO,{})}),(0,$e.jsx)(Me,{path:"/SubjectsMain",element:(0,$e.jsx)(zO,{})})]})})})}a.render((0,$e.jsx)($e.Fragment,{children:(0,$e.jsx)(WO,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.aa899e0b.js.map